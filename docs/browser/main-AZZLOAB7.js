var xv=Object.defineProperty,Tv=Object.defineProperties;var Ov=Object.getOwnPropertyDescriptors;var Ld=Object.getOwnPropertySymbols;var Pv=Object.prototype.hasOwnProperty,Av=Object.prototype.propertyIsEnumerable;var Vd=(n,e,t)=>e in n?xv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,g=(n,e)=>{for(var t in e||={})Pv.call(e,t)&&Vd(n,t,e[t]);if(Ld)for(var t of Ld(e))Av.call(e,t)&&Vd(n,t,e[t]);return n},_=(n,e)=>Tv(n,Ov(e));var Q=(n,e,t)=>new Promise((i,r)=>{var o=c=>{try{a(t.next(c))}catch(l){r(l)}},s=c=>{try{a(t.throw(c))}catch(l){r(l)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function jd(n,e){return Object.is(n,e)}var xe=null,po=!1,mo=1,Kt=Symbol("SIGNAL");function ue(n){let e=xe;return xe=n,e}function Hd(){return xe}var pr={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ic(n){if(po)throw new Error("");if(xe===null)return;xe.consumerOnSignalRead(n);let e=xe.nextProducerIndex++;if(Co(xe),e<xe.producerNode.length&&xe.producerNode[e]!==n&&hr(xe)){let t=xe.producerNode[e];yo(t,xe.producerIndexOfThis[e])}xe.producerNode[e]!==n&&(xe.producerNode[e]=n,xe.producerIndexOfThis[e]=hr(xe)?zd(n,xe,e):0),xe.producerLastReadVersion[e]=n.version}function kv(){mo++}function Bd(n){if(!(hr(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===mo)){if(!n.producerMustRecompute(n)&&!oc(n)){n.dirty=!1,n.lastCleanEpoch=mo;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=mo}}function Ud(n){if(n.liveConsumerNode===void 0)return;let e=po;po=!0;try{for(let t of n.liveConsumerNode)t.dirty||Nv(t)}finally{po=e}}function $d(){return xe?.consumerAllowSignalWrites!==!1}function Nv(n){n.dirty=!0,Ud(n),n.consumerMarkedDirty?.(n)}function vo(n){return n&&(n.nextProducerIndex=0),ue(n)}function rc(n,e){if(ue(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(hr(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)yo(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function oc(n){Co(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(Bd(t),i!==t.version))return!0}return!1}function sc(n){if(Co(n),hr(n))for(let e=0;e<n.producerNode.length;e++)yo(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function zd(n,e,t){if(Wd(n),n.liveConsumerNode.length===0&&Gd(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=zd(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function yo(n,e){if(Wd(n),n.liveConsumerNode.length===1&&Gd(n))for(let i=0;i<n.producerNode.length;i++)yo(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Co(r),r.producerIndexOfThis[i]=e}}function hr(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Co(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Wd(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Gd(n){return n.producerNode!==void 0}function qd(n){let e=Object.create(Rv);e.computation=n;let t=()=>{if(Bd(e),ic(e),e.value===go)throw e.error;return e.value};return t[Kt]=e,t}var tc=Symbol("UNSET"),nc=Symbol("COMPUTING"),go=Symbol("ERRORED"),Rv=_(g({},pr),{value:tc,dirty:!0,error:null,equal:jd,producerMustRecompute(n){return n.value===tc||n.value===nc},producerRecomputeValue(n){if(n.value===nc)throw new Error("Detected cycle in computations.");let e=n.value;n.value=nc;let t=vo(n),i;try{i=n.computation()}catch(r){i=go,n.error=r}finally{rc(n,t)}if(e!==tc&&e!==go&&i!==go&&n.equal(e,i)){n.value=e;return}n.value=i,n.version++}});function Fv(){throw new Error}var Yd=Fv;function Qd(){Yd()}function Zd(n){Yd=n}var Lv=null;function Kd(n){let e=Object.create(Xd);e.value=n;let t=()=>(ic(e),e.value);return t[Kt]=e,t}function ac(n,e){$d()||Qd(),n.equal(n.value,e)||(n.value=e,Vv(n))}function Jd(n,e){$d()||Qd(),ac(n,e(n.value))}var Xd=_(g({},pr),{equal:jd,value:void 0});function Vv(n){n.version++,kv(),Ud(n),Lv?.()}function K(n){return typeof n=="function"}function ui(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var bo=ui(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function mr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ge=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(K(i))try{i()}catch(o){e=o instanceof bo?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{ef(o)}catch(s){e=e??[],s instanceof bo?e=[...e,...s.errors]:e.push(s)}}if(e)throw new bo(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ef(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&mr(t,e)}remove(e){let{_finalizers:t}=this;t&&mr(t,e),e instanceof n&&e._removeParent(this)}};ge.EMPTY=(()=>{let n=new ge;return n.closed=!0,n})();var cc=ge.EMPTY;function So(n){return n instanceof ge||n&&"closed"in n&&K(n.remove)&&K(n.add)&&K(n.unsubscribe)}function ef(n){K(n)?n():n.unsubscribe()}var It={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var di={setTimeout(n,e,...t){let{delegate:i}=di;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=di;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Do(n){di.setTimeout(()=>{let{onUnhandledError:e}=It;if(e)e(n);else throw n})}function gr(){}var tf=lc("C",void 0,void 0);function nf(n){return lc("E",void 0,n)}function rf(n){return lc("N",n,void 0)}function lc(n,e,t){return{kind:n,value:e,error:t}}var Rn=null;function fi(n){if(It.useDeprecatedSynchronousErrorHandling){let e=!Rn;if(e&&(Rn={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Rn;if(Rn=null,t)throw i}}else n()}function of(n){It.useDeprecatedSynchronousErrorHandling&&Rn&&(Rn.errorThrown=!0,Rn.error=n)}var Fn=class extends ge{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,So(e)&&e.add(this)):this.destination=Bv}static create(e,t,i){return new hi(e,t,i)}next(e){this.isStopped?dc(rf(e),this):this._next(e)}error(e){this.isStopped?dc(nf(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dc(tf,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jv=Function.prototype.bind;function uc(n,e){return jv.call(n,e)}var fc=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){_o(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){_o(i)}else _o(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){_o(t)}}},hi=class extends Fn{constructor(e,t,i){super();let r;if(K(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&It.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&uc(e.next,o),error:e.error&&uc(e.error,o),complete:e.complete&&uc(e.complete,o)}):r=e}this.destination=new fc(r)}};function _o(n){It.useDeprecatedSynchronousErrorHandling?of(n):Do(n)}function Hv(n){throw n}function dc(n,e){let{onStoppedNotification:t}=It;t&&di.setTimeout(()=>t(n,e))}var Bv={closed:!0,next:gr,error:Hv,complete:gr};var pi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ct(n){return n}function hc(...n){return pc(n)}function pc(n){return n.length===0?ct:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=$v(t)?t:new hi(t,i,r);return fi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=sf(i),new i((r,o)=>{let s=new hi({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[pi](){return this}pipe(...t){return pc(t)(this)}toPromise(t){return t=sf(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function sf(n){var e;return(e=n??It.Promise)!==null&&e!==void 0?e:Promise}function Uv(n){return n&&K(n.next)&&K(n.error)&&K(n.complete)}function $v(n){return n&&n instanceof Fn||Uv(n)&&So(n)}function mc(n){return K(n?.lift)}function le(n){return e=>{if(mc(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(n,e,t,i,r){return new gc(n,e,t,i,r)}var gc=class extends Fn{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function mi(){return le((n,e)=>{let t=null;n._refCount++;let i=ce(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var gi=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,mc(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ge;let t=this.getSubject();e.add(this.source.subscribe(ce(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ge.EMPTY)}return e}refCount(){return mi()(this)}};var af=ui(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _e=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new wo(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new af}next(t){fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?cc:(this.currentObservers=null,o.push(t),new ge(()=>{this.currentObservers=null,mr(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new wo(e,t),n})(),wo=class extends _e{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:cc}};var se=class extends _e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var lt=new he(n=>n.complete());function cf(n){return n&&K(n.schedule)}function lf(n){return n[n.length-1]}function Io(n){return K(lf(n))?n.pop():void 0}function vn(n){return cf(lf(n))?n.pop():void 0}function df(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{l(i.next(d))}catch(p){s(p)}}function c(d){try{l(i.throw(d))}catch(p){s(p)}}function l(d){d.done?o(d.value):r(d.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}function uf(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ln(n){return this instanceof Ln?(this.v=n,this):new Ln(n)}function ff(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(v){return function(E){return Promise.resolve(E).then(v,p)}}function a(v,E){i[v]&&(r[v]=function(L){return new Promise(function(X,ie){o.push([v,L,X,ie])>1||c(v,L)})},E&&(r[v]=E(r[v])))}function c(v,E){try{l(i[v](E))}catch(L){C(o[0][3],L)}}function l(v){v.value instanceof Ln?Promise.resolve(v.value.v).then(d,p):C(o[0][2],v)}function d(v){c("next",v)}function p(v){c("throw",v)}function C(v,E){v(E),o.shift(),o.length&&c(o[0][0],o[0][1])}}function hf(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof uf=="function"?uf(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),r(a,c,s.done,s.value)})}}function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Eo=n=>n&&typeof n.length=="number"&&typeof n!="function";function Mo(n){return K(n?.then)}function xo(n){return K(n[pi])}function To(n){return Symbol.asyncIterator&&K(n?.[Symbol.asyncIterator])}function Oo(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function zv(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Po=zv();function Ao(n){return K(n?.[Po])}function ko(n){return ff(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Ln(t.read());if(r)return yield Ln(void 0);yield yield Ln(i)}}finally{t.releaseLock()}})}function No(n){return K(n?.getReader)}function Ie(n){if(n instanceof he)return n;if(n!=null){if(xo(n))return Wv(n);if(Eo(n))return Gv(n);if(Mo(n))return qv(n);if(To(n))return pf(n);if(Ao(n))return Yv(n);if(No(n))return Qv(n)}throw Oo(n)}function Wv(n){return new he(e=>{let t=n[pi]();if(K(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Gv(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function qv(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Do)})}function Yv(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function pf(n){return new he(e=>{Zv(n,e).catch(t=>e.error(t))})}function Qv(n){return pf(ko(n))}function Zv(n,e){var t,i,r,o;return df(this,void 0,void 0,function*(){try{for(t=hf(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Xe(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Ro(n,e=0){return le((t,i)=>{t.subscribe(ce(i,r=>Xe(i,n,()=>i.next(r),e),()=>Xe(i,n,()=>i.complete(),e),r=>Xe(i,n,()=>i.error(r),e)))})}function Fo(n,e=0){return le((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function mf(n,e){return Ie(n).pipe(Fo(e),Ro(e))}function gf(n,e){return Ie(n).pipe(Fo(e),Ro(e))}function vf(n,e){return new he(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function yf(n,e){return new he(t=>{let i;return Xe(t,e,()=>{i=n[Po](),Xe(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>K(i?.return)&&i.return()})}function Lo(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{Xe(t,e,()=>{let i=n[Symbol.asyncIterator]();Xe(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Cf(n,e){return Lo(ko(n),e)}function bf(n,e){if(n!=null){if(xo(n))return mf(n,e);if(Eo(n))return vf(n,e);if(Mo(n))return gf(n,e);if(To(n))return Lo(n,e);if(Ao(n))return yf(n,e);if(No(n))return Cf(n,e)}throw Oo(n)}function we(n,e){return e?bf(n,e):Ie(n)}function J(...n){let e=vn(n);return we(n,e)}function vi(n,e){let t=K(n)?n:()=>n,i=r=>r.error(t());return new he(e?r=>e.schedule(i,0,r):i)}function vc(n){return!!n&&(n instanceof he||K(n.lift)&&K(n.subscribe))}var Jt=ui(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ae(n,e){return le((t,i)=>{let r=0;t.subscribe(ce(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:Kv}=Array;function Jv(n,e){return Kv(e)?n(...e):n(e)}function Vo(n){return ae(e=>Jv(n,e))}var{isArray:Xv}=Array,{getPrototypeOf:e0,prototype:t0,keys:n0}=Object;function jo(n){if(n.length===1){let e=n[0];if(Xv(e))return{args:e,keys:null};if(i0(e)){let t=n0(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function i0(n){return n&&typeof n=="object"&&e0(n)===t0}function Ho(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Bo(...n){let e=vn(n),t=Io(n),{args:i,keys:r}=jo(n);if(i.length===0)return we([],e);let o=new he(r0(i,e,r?s=>Ho(r,s):ct));return t?o.pipe(Vo(t)):o}function r0(n,e,t=ct){return i=>{Sf(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)Sf(e,()=>{let l=we(n[c],e),d=!1;l.subscribe(ce(i,p=>{o[c]=p,d||(d=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function Sf(n,e,t){n?Xe(t,n,e):e()}function Df(n,e,t,i,r,o,s,a){let c=[],l=0,d=0,p=!1,C=()=>{p&&!c.length&&!l&&e.complete()},v=L=>l<i?E(L):c.push(L),E=L=>{o&&e.next(L),l++;let X=!1;Ie(t(L,d++)).subscribe(ce(e,ie=>{r?.(ie),o?v(ie):e.next(ie)},()=>{X=!0},void 0,()=>{if(X)try{for(l--;c.length&&l<i;){let ie=c.shift();s?Xe(e,s,()=>E(ie)):E(ie)}C()}catch(ie){e.error(ie)}}))};return n.subscribe(ce(e,v,()=>{p=!0,C()})),()=>{a?.()}}function Te(n,e,t=1/0){return K(e)?Te((i,r)=>ae((o,s)=>e(i,o,r,s))(Ie(n(i,r))),t):(typeof e=="number"&&(t=e),le((i,r)=>Df(i,r,n,t)))}function yc(n=1/0){return Te(ct,n)}function _f(){return yc(1)}function yi(...n){return _f()(we(n,vn(n)))}function Uo(n){return new he(e=>{Ie(n()).subscribe(e)})}function Cc(...n){let e=Io(n),{args:t,keys:i}=jo(n),r=new he(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let p=!1;Ie(t[d]).subscribe(ce(o,C=>{p||(p=!0,l--),a[d]=C},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(i?Ho(i,a):a),o.complete())}))}});return e?r.pipe(Vo(e)):r}function Et(n,e){return le((t,i)=>{let r=0;t.subscribe(ce(i,o=>n.call(e,o,r++)&&i.next(o)))})}function yn(n){return le((e,t)=>{let i=null,r=!1,o;i=e.subscribe(ce(t,void 0,void 0,s=>{o=Ie(n(s,yn(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function wf(n,e,t,i,r){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(ce(s,d=>{let p=l++;c=a?n(c,d,p):(a=!0,d),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function Ci(n,e){return K(e)?Te(n,e,1):Te(n,1)}function Cn(n){return le((e,t)=>{let i=!1;e.subscribe(ce(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Xt(n){return n<=0?()=>lt:le((e,t)=>{let i=0;e.subscribe(ce(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function bc(n){return ae(()=>n)}function $o(n=o0){return le((e,t)=>{let i=!1;e.subscribe(ce(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function o0(){return new Jt}function vr(n){return le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Lt(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Et((r,o)=>n(r,o,i)):ct,Xt(1),t?Cn(e):$o(()=>new Jt))}function bi(n){return n<=0?()=>lt:le((e,t)=>{let i=[];e.subscribe(ce(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Sc(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Et((r,o)=>n(r,o,i)):ct,bi(1),t?Cn(e):$o(()=>new Jt))}function Dc(n,e){return le(wf(n,e,arguments.length>=2,!0))}function _c(...n){let e=vn(n);return le((t,i)=>{(e?yi(n,t,e):yi(n,t)).subscribe(i)})}function Mt(n,e){return le((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(ce(i,c=>{r?.unsubscribe();let l=0,d=o++;Ie(n(c,d)).subscribe(r=ce(i,p=>i.next(e?e(c,p,d,l++):p),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Vn(n){return le((e,t)=>{Ie(n).subscribe(ce(t,()=>t.complete(),gr)),!t.closed&&e.subscribe(t)})}function Le(n,e,t){let i=K(n)||e||t?{next:n,error:e,complete:t}:n;return i?le((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(ce(o,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),o.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),o.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):ct}var ch="https://g.co/ng/security#xss",V=class extends Error{constructor(e,t){super(Rl(e,t)),this.code=e}};function Rl(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function xr(n){return{toString:n}.toString()}var zo="__parameters__";function s0(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function lh(n,e,t){return xr(()=>{let i=s0(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,l,d){let p=c.hasOwnProperty(zo)?c[zo]:Object.defineProperty(c,zo,{value:[]})[zo];for(;p.length<=d;)p.push(null);return(p[d]=p[d]||[]).push(s),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var yr=globalThis;function me(n){for(let e in n)if(n[e]===me)return e;throw Error("Could not find renamed property on target object.")}function a0(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Qe(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Qe).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Vc(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var c0=me({__forward_ref__:me});function yt(n){return n.__forward_ref__=yt,n.toString=function(){return Qe(this())},n}function Ye(n){return uh(n)?n():n}function uh(n){return typeof n=="function"&&n.hasOwnProperty(c0)&&n.__forward_ref__===yt}function O(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Jn(n){return{providers:n.providers||[],imports:n.imports||[]}}function ws(n){return If(n,fh)||If(n,hh)}function dh(n){return ws(n)!==null}function If(n,e){return n.hasOwnProperty(e)?n[e]:null}function l0(n){let e=n&&(n[fh]||n[hh]);return e||null}function Ef(n){return n&&(n.hasOwnProperty(Mf)||n.hasOwnProperty(u0))?n[Mf]:null}var fh=me({\u0275prov:me}),Mf=me({\u0275inj:me}),hh=me({ngInjectableDef:me}),u0=me({ngInjectorDef:me}),z=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=O({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ph(n){return n&&!!n.\u0275providers}var d0=me({\u0275cmp:me}),f0=me({\u0275dir:me}),h0=me({\u0275pipe:me}),p0=me({\u0275mod:me}),es=me({\u0275fac:me}),Sr=me({__NG_ELEMENT_ID__:me}),xf=me({__NG_ENV_ID__:me});function en(n){return typeof n=="string"?n:n==null?"":String(n)}function m0(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():en(n)}function g0(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new V(-200,n)}function Fl(n,e){throw new V(-201,!1)}var oe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(oe||{}),jc;function mh(){return jc}function et(n){let e=jc;return jc=n,e}function gh(n,e,t){let i=ws(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&oe.Optional)return null;if(e!==void 0)return e;Fl(n,"Injector")}var v0={},Dr=v0,Hc="__NG_DI_FLAG__",ts="ngTempTokenPath",y0="ngTokenPath",C0=/\n/gm,b0="\u0275",Tf="__source",wi;function S0(){return wi}function bn(n){let e=wi;return wi=n,e}function D0(n,e=oe.Default){if(wi===void 0)throw new V(-203,!1);return wi===null?gh(n,void 0,e):wi.get(n,e&oe.Optional?null:void 0,e)}function M(n,e=oe.Default){return(mh()||D0)(Ye(n),e)}function k(n,e=oe.Default){return M(n,Is(e))}function Is(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Bc(n){let e=[];for(let t=0;t<n.length;t++){let i=Ye(n[t]);if(Array.isArray(i)){if(i.length===0)throw new V(900,!1);let r,o=oe.Default;for(let s=0;s<i.length;s++){let a=i[s],c=_0(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(M(r,o))}else e.push(M(i))}return e}function vh(n,e){return n[Hc]=e,n.prototype[Hc]=e,n}function _0(n){return n[Hc]}function w0(n,e,t,i){let r=n[ts];throw e[Tf]&&r.unshift(e[Tf]),n.message=I0(`
`+n.message,r,t,i),n[y0]=r,n[ts]=null,n}function I0(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==b0?n.slice(2):n;let r=Qe(e);if(Array.isArray(e))r=e.map(Qe).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Qe(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(C0,`
  `)}`}var Ll=vh(lh("Optional"),8);var yh=vh(lh("SkipSelf"),4);function Bn(n,e){let t=n.hasOwnProperty(es);return t?n[es]:null}function E0(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function M0(n){return n.flat(Number.POSITIVE_INFINITY)}function Vl(n,e){n.forEach(t=>Array.isArray(t)?Vl(t,e):e(t))}function Ch(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ns(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function x0(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function jl(n,e,t){let i=Tr(n,e);return i>=0?n[i|1]=t:(i=~i,x0(n,i,e,t)),i}function wc(n,e){let t=Tr(n,e);if(t>=0)return n[t|1]}function Tr(n,e){return T0(n,e,1)}function T0(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var Ei={},tt=[],Mi=new z(""),bh=new z("",-1),Sh=new z(""),is=class{get(e,t=Dr){if(t===Dr){let i=new Error(`NullInjectorError: No provider for ${Qe(e)}!`);throw i.name="NullInjectorError",i}return t}},Dh=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Dh||{}),Ht=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ht||{}),_n=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(_n||{});function O0(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function Uc(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];A0(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function P0(n){return n===3||n===4||n===6}function A0(n){return n.charCodeAt(0)===64}function _r(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?Of(n,t,r,null,e[++i]):Of(n,t,r,null,null))}}return n}function Of(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(i===null){r!==null&&(n[o+1]=r);return}else if(i===n[o+1]){n[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i),r!==null&&n.splice(o++,0,r)}var _h="ng-template";function k0(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&O0(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(Hl(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Hl(n){return n.type===4&&n.value!==_h}function N0(n,e,t){let i=n.type===4&&!t?_h:n.value;return e===i}function R0(n,e,t){let i=4,r=n.attrs,o=r!==null?V0(r):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!xt(i)&&!xt(c))return!1;if(s&&xt(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!N0(n,c,t)||c===""&&e.length===1){if(xt(i))return!1;s=!0}}else if(i&8){if(r===null||!k0(n,r,c,t)){if(xt(i))return!1;s=!0}}else{let l=e[++a],d=F0(c,r,Hl(n),t);if(d===-1){if(xt(i))return!1;s=!0;continue}if(l!==""){let p;if(d>o?p="":p=r[d+1].toLowerCase(),i&2&&l!==p){if(xt(i))return!1;s=!0}}}}return xt(i)||s}function xt(n){return(n&1)===0}function F0(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return j0(e,n)}function L0(n,e,t=!1){for(let i=0;i<e.length;i++)if(R0(n,e[i],t))return!0;return!1}function V0(n){for(let e=0;e<n.length;e++){let t=n[e];if(P0(t))return e}return n.length}function j0(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function Pf(n,e){return n?":not("+e.trim()+")":e}function H0(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!xt(s)&&(e+=Pf(o,r),r=""),i=s,o=o||!xt(i);t++}return r!==""&&(e+=Pf(o,r)),e}function B0(n){return n.map(H0).join(",")}function U0(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!xt(r))break;r=o}i++}return{attrs:e,classes:t}}function j(n){return xr(()=>{let e=Th(n),t=_(g({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Dh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ht.Emulated,styles:n.styles||tt,_:null,schemas:n.schemas||null,tView:null,id:""});Oh(t);let i=n.dependencies;return t.directiveDefs=kf(i,!1),t.pipeDefs=kf(i,!0),t.id=W0(t),t})}function $0(n){return wn(n)||Ih(n)}function z0(n){return n!==null}function Xn(n){return xr(()=>({type:n.type,bootstrap:n.bootstrap||tt,declarations:n.declarations||tt,imports:n.imports||tt,exports:n.exports||tt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Af(n,e){if(n==null)return Ei;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a=_n.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(t[o]=a!==_n.None?[i,a]:i,e[o]=s):t[o]=i}return t}function Se(n){return xr(()=>{let e=Th(n);return Oh(e),e})}function wh(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function wn(n){return n[d0]||null}function Ih(n){return n[f0]||null}function Eh(n){return n[h0]||null}function Mh(n){let e=wn(n)||Ih(n)||Eh(n);return e!==null?e.standalone:!1}function xh(n,e){let t=n[p0]||null;if(!t&&e===!0)throw new Error(`Type ${Qe(n)} does not have '\u0275mod' property.`);return t}function Th(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ei,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||tt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Af(n.inputs,e),outputs:Af(n.outputs),debugInfo:null}}function Oh(n){n.features?.forEach(e=>e(n))}function kf(n,e){if(!n)return null;let t=e?Eh:$0;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(z0)}function W0(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Es(n){return{\u0275providers:n}}function G0(...n){return{\u0275providers:Ph(!0,n),\u0275fromNgModule:!0}}function Ph(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return Vl(e,s=>{let a=s;$c(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&Ah(r,o),t}function Ah(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];Bl(r,o=>{e(o,i)})}}function $c(n,e,t,i){if(n=Ye(n),!n)return!1;let r=null,o=Ef(n),s=!o&&wn(n);if(!o&&!s){let c=n.ngModule;if(o=Ef(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)$c(l,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let l;try{Vl(o.imports,d=>{$c(d,e,t,i)&&(l||=[],l.push(d))})}finally{}l!==void 0&&Ah(l,e)}if(!a){let l=Bn(r)||(()=>new r);e({provide:r,useFactory:l,deps:tt},r),e({provide:Sh,useValue:r,multi:!0},r),e({provide:Mi,useValue:()=>M(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let l=n;Bl(c,d=>{e(d,l)})}}else return!1;return r!==n&&n.providers!==void 0}function Bl(n,e){for(let t of n)ph(t)&&(t=t.\u0275providers),Array.isArray(t)?Bl(t,e):e(t)}var q0=me({provide:String,useValue:me});function kh(n){return n!==null&&typeof n=="object"&&q0 in n}function Y0(n){return!!(n&&n.useExisting)}function Q0(n){return!!(n&&n.useFactory)}function xi(n){return typeof n=="function"}function Z0(n){return!!n.useClass}var Ms=new z(""),Yo={},K0={},Ic;function xs(){return Ic===void 0&&(Ic=new is),Ic}var nt=class{},wr=class extends nt{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wc(e,s=>this.processProvider(s)),this.records.set(bh,Si(void 0,this)),r.has("environment")&&this.records.set(nt,Si(void 0,this));let o=this.records.get(Ms);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Sh,tt,oe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ue(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ue(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=bn(this),i=et(void 0),r;try{return e()}finally{bn(t),et(i)}}get(e,t=Dr,i=oe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xf))return e[xf](this);i=Is(i);let r,o=bn(this),s=et(void 0);try{if(!(i&oe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=ny(e)&&ws(e);l&&this.injectableDefInScope(l)?c=Si(zc(e),Yo):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&oe.Self?xs():this.parent;return t=i&oe.Optional&&t===Dr?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[ts]=a[ts]||[]).unshift(Qe(e)),o)throw a;return w0(a,e,"R3InjectorError",this.source)}else throw a}finally{et(s),bn(o)}}resolveInjectorInitializers(){let e=ue(null),t=bn(this),i=et(void 0),r;try{let o=this.get(Mi,tt,oe.Self);for(let s of o)s()}finally{bn(t),et(i),ue(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Qe(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new V(205,!1)}processProvider(e){e=Ye(e);let t=xi(e)?e:Ye(e&&e.provide),i=X0(e);if(!xi(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Si(void 0,Yo,!0),r.factory=()=>Bc(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=ue(null);try{return t.value===Yo&&(t.value=K0,t.value=t.factory()),typeof t.value=="object"&&t.value&&ty(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ue(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ye(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function zc(n){let e=ws(n),t=e!==null?e.factory:Bn(n);if(t!==null)return t;if(n instanceof z)throw new V(204,!1);if(n instanceof Function)return J0(n);throw new V(204,!1)}function J0(n){if(n.length>0)throw new V(204,!1);let t=l0(n);return t!==null?()=>t.factory(n):()=>new n}function X0(n){if(kh(n))return Si(void 0,n.useValue);{let e=Nh(n);return Si(e,Yo)}}function Nh(n,e,t){let i;if(xi(n)){let r=Ye(n);return Bn(r)||zc(r)}else if(kh(n))i=()=>Ye(n.useValue);else if(Q0(n))i=()=>n.useFactory(...Bc(n.deps||[]));else if(Y0(n))i=()=>M(Ye(n.useExisting));else{let r=Ye(n&&(n.useClass||n.provide));if(ey(n))i=()=>new r(...Bc(n.deps));else return Bn(r)||zc(r)}return i}function Si(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ey(n){return!!n.deps}function ty(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function ny(n){return typeof n=="function"||typeof n=="object"&&n instanceof z}function Wc(n,e){for(let t of n)Array.isArray(t)?Wc(t,e):t&&ph(t)?Wc(t.\u0275providers,e):e(t)}function sn(n,e){n instanceof wr&&n.assertNotDestroyed();let t,i=bn(n),r=et(void 0);try{return e()}finally{bn(i),et(r)}}function iy(){return mh()!==void 0||S0()!=null}function ry(n){return typeof n=="function"}var an=0,ee=1,W=2,Be=3,Ot=4,kt=5,rs=6,os=7,Pt=8,Ti=9,Bt=10,Me=11,Ir=12,Nf=13,Fi=14,Ut=15,Un=16,Di=17,tn=18,Ts=19,Rh=20,Sn=21,Ec=22,gt=23,At=25,Fh=1;var $n=7,ss=8,Oi=9,ut=10,as=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(as||{});function Dn(n){return Array.isArray(n)&&typeof n[Fh]=="object"}function cn(n){return Array.isArray(n)&&n[Fh]===!0}function Lh(n){return(n.flags&4)!==0}function Os(n){return n.componentOffset>-1}function Ul(n){return(n.flags&1)===1}function In(n){return!!n.template}function Gc(n){return(n[W]&512)!==0}var qc=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function Vh(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}function ei(){return jh}function jh(n){return n.type.prototype.ngOnChanges&&(n.setInput=sy),oy}ei.ngInherit=!0;function oy(){let n=Bh(this),e=n?.current;if(e){let t=n.previous;if(t===Ei)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function sy(n,e,t,i,r){let o=this.declaredInputs[i],s=Bh(n)||ay(n,{previous:Ei,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new qc(l&&l.currentValue,t,c===Ei),Vh(n,e,r,t)}var Hh="__ngSimpleChanges__";function Bh(n){return n[Hh]||null}function ay(n,e){return n[Hh]=e}var Rf=null;var Vt=function(n,e,t){Rf?.(n,e,t)},cy="svg",ly="math";function $t(n){for(;Array.isArray(n);)n=n[an];return n}function Uh(n,e){return $t(e[n])}function Ct(n,e){return $t(e[n.index])}function $h(n,e){return n.data[e]}function zh(n,e){return n[e]}function Mn(n,e){let t=e[n];return Dn(t)?t:t[an]}function uy(n){return(n[W]&4)===4}function $l(n){return(n[W]&128)===128}function dy(n){return cn(n[Be])}function cs(n,e){return e==null?null:n[e]}function Wh(n){n[Di]=0}function Gh(n){n[W]&1024||(n[W]|=1024,$l(n)&&As(n))}function fy(n,e){for(;n>0;)e=e[Fi],n--;return e}function Ps(n){return!!(n[W]&9216||n[gt]?.dirty)}function Yc(n){n[Bt].changeDetectionScheduler?.notify(8),n[W]&64&&(n[W]|=1024),Ps(n)&&As(n)}function As(n){n[Bt].changeDetectionScheduler?.notify(0);let e=zn(n);for(;e!==null&&!(e[W]&8192||(e[W]|=8192,!$l(e)));)e=zn(e)}function qh(n,e){if((n[W]&256)===256)throw new V(911,!1);n[Sn]===null&&(n[Sn]=[]),n[Sn].push(e)}function hy(n,e){if(n[Sn]===null)return;let t=n[Sn].indexOf(e);t!==-1&&n[Sn].splice(t,1)}function zn(n){let e=n[Be];return cn(e)?e[Be]:e}var re={lFrame:ip(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Yh=!1;function py(){return re.lFrame.elementDepthCount}function my(){re.lFrame.elementDepthCount++}function gy(){re.lFrame.elementDepthCount--}function Qh(){return re.bindingsEnabled}function vy(){return re.skipHydrationRootTNode!==null}function yy(n){return re.skipHydrationRootTNode===n}function Cy(){re.skipHydrationRootTNode=null}function de(){return re.lFrame.lView}function Ve(){return re.lFrame.tView}function w(n){return re.lFrame.contextLView=n,n[Pt]}function I(n){return re.lFrame.contextLView=null,n}function it(){let n=Zh();for(;n!==null&&n.type===64;)n=n.parent;return n}function Zh(){return re.lFrame.currentTNode}function by(){let n=re.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Or(n,e){let t=re.lFrame;t.currentTNode=n,t.isParent=e}function Kh(){return re.lFrame.isParent}function Sy(){re.lFrame.isParent=!1}function Dy(){return re.lFrame.contextLView}function Jh(){return Yh}function Ff(n){Yh=n}function _y(){let n=re.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Xh(){return re.lFrame.bindingIndex}function wy(n){return re.lFrame.bindingIndex=n}function ks(){return re.lFrame.bindingIndex++}function Ns(n){let e=re.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Iy(){return re.lFrame.inI18n}function Ey(n,e){let t=re.lFrame;t.bindingIndex=t.bindingRootIndex=n,Qc(e)}function My(){return re.lFrame.currentDirectiveIndex}function Qc(n){re.lFrame.currentDirectiveIndex=n}function xy(n){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ep(){return re.lFrame.currentQueryIndex}function zl(n){re.lFrame.currentQueryIndex=n}function Ty(n){let e=n[ee];return e.type===2?e.declTNode:e.type===1?n[kt]:null}function tp(n,e,t){if(t&oe.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(t&oe.Host);)if(r=Ty(o),r===null||(o=o[Fi],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=re.lFrame=np();return i.currentTNode=e,i.lView=n,!0}function Wl(n){let e=np(),t=n[ee];re.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function np(){let n=re.lFrame,e=n===null?null:n.child;return e===null?ip(n):e}function ip(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function rp(){let n=re.lFrame;return re.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var op=rp;function Gl(){let n=rp();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Oy(n){return(re.lFrame.contextLView=fy(n,re.lFrame.contextLView))[Pt]}function ln(){return re.lFrame.selectedIndex}function Wn(n){re.lFrame.selectedIndex=n}function ql(){let n=re.lFrame;return $h(n.tView,n.selectedIndex)}function Py(){return re.lFrame.currentNamespace}var sp=!0;function Yl(){return sp}function Ql(n){sp=n}function Ay(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=jh(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Zl(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Qo(n,e,t){ap(n,e,3,t)}function Zo(n,e,t,i){(n[W]&3)===t&&ap(n,e,t,i)}function Mc(n,e){let t=n[W];(t&3)===e&&(t&=16383,t+=1,n[W]=t)}function ap(n,e,t,i){let r=i!==void 0?n[Di]&65535:0,o=i??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(n[Di]+=65536),(a<o||o==-1)&&(ky(n,t,e,c),n[Di]=(n[Di]&4294901760)+c+2),c++}function Lf(n,e){Vt(4,n,e);let t=ue(null);try{e.call(n)}finally{ue(t),Vt(5,n,e)}}function ky(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[W]>>14<n[Di]>>16&&(n[W]&3)===e&&(n[W]+=16384,Lf(a,o)):Lf(a,o)}var Ii=-1,Gn=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function Ny(n){return n instanceof Gn}function Ry(n){return(n.flags&8)!==0}function Fy(n){return(n.flags&16)!==0}var xc={},Zc=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Is(i);let r=this.injector.get(e,xc,i);return r!==xc||t===xc?r:this.parentInjector.get(e,t,i)}};function cp(n){return n!==Ii}function ls(n){return n&32767}function Ly(n){return n>>16}function us(n,e){let t=Ly(n),i=e;for(;t>0;)i=i[Fi],t--;return i}var Kc=!0;function ds(n){let e=Kc;return Kc=n,e}var Vy=256,lp=Vy-1,up=5,jy=0,jt={};function Hy(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(Sr)&&(i=t[Sr]),i==null&&(i=t[Sr]=jy++);let r=i&lp,o=1<<r;e.data[n+(r>>up)]|=o}function fs(n,e){let t=dp(n,e);if(t!==-1)return t;let i=e[ee];i.firstCreatePass&&(n.injectorIndex=e.length,Tc(i.data,n),Tc(e,null),Tc(i.blueprint,null));let r=Kl(n,e),o=n.injectorIndex;if(cp(r)){let s=ls(r),a=us(r,e),c=a[ee].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function Tc(n,e){n.push(0,0,0,0,0,0,0,0,e)}function dp(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Kl(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=gp(r),i===null)return Ii;if(t++,r=r[Fi],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Ii}function Jc(n,e,t){Hy(n,e,t)}function fp(n,e,t){if(t&oe.Optional||n!==void 0)return n;Fl(e,"NodeInjector")}function hp(n,e,t,i){if(t&oe.Optional&&i===void 0&&(i=null),!(t&(oe.Self|oe.Host))){let r=n[Ti],o=et(void 0);try{return r?r.get(e,i,t&oe.Optional):gh(e,i,t&oe.Optional)}finally{et(o)}}return fp(i,e,t)}function pp(n,e,t,i=oe.Default,r){if(n!==null){if(e[W]&2048&&!(i&oe.Self)){let s=zy(n,e,t,i,jt);if(s!==jt)return s}let o=mp(n,e,t,i,jt);if(o!==jt)return o}return hp(e,t,i,r)}function mp(n,e,t,i,r){let o=Uy(t);if(typeof o=="function"){if(!tp(e,n,i))return i&oe.Host?fp(r,t,i):hp(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&oe.Optional))Fl(t);else return s}finally{op()}}else if(typeof o=="number"){let s=null,a=dp(n,e),c=Ii,l=i&oe.Host?e[Ut][kt]:null;for((a===-1||i&oe.SkipSelf)&&(c=a===-1?Kl(n,e):e[a+8],c===Ii||!jf(i,!1)?a=-1:(s=e[ee],a=ls(c),e=us(c,e)));a!==-1;){let d=e[ee];if(Vf(o,a,d.data)){let p=By(a,e,t,s,i,l);if(p!==jt)return p}c=e[a+8],c!==Ii&&jf(i,e[ee].data[a+8]===l)&&Vf(o,a,e)?(s=d,a=ls(c),e=us(c,e)):a=-1}}return r}function By(n,e,t,i,r,o){let s=e[ee],a=s.data[n+8],c=i==null?Os(a)&&Kc:i!=s&&(a.type&3)!==0,l=r&oe.Host&&o===a,d=Ko(a,s,t,c,l);return d!==null?qn(e,s,d,a):jt}function Ko(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,p=i?a:a+d,C=r?a+d:l;for(let v=p;v<C;v++){let E=s[v];if(v<c&&t===E||v>=c&&E.type===t)return v}if(r){let v=s[c];if(v&&In(v)&&v.type===t)return c}return null}function qn(n,e,t,i){let r=n[t],o=e.data;if(Ny(r)){let s=r;s.resolving&&g0(m0(o[t]));let a=ds(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?et(s.injectImpl):null,d=tp(n,i,oe.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&Ay(t,o[t],e)}finally{l!==null&&et(l),ds(a),s.resolving=!1,op()}}return r}function Uy(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Sr)?n[Sr]:void 0;return typeof e=="number"?e>=0?e&lp:$y:e}function Vf(n,e,t){let i=1<<n;return!!(t[e+(n>>up)]&i)}function jf(n,e){return!(n&oe.Self)&&!(n&oe.Host&&e)}var Hn=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return pp(this._tNode,this._lView,e,Is(i),t)}};function $y(){return new Hn(it(),de())}function bt(n){return xr(()=>{let e=n.prototype.constructor,t=e[es]||Xc(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[es]||Xc(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Xc(n){return uh(n)?()=>{let e=Xc(Ye(n));return e&&e()}:Bn(n)}function zy(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[W]&2048&&!(s[W]&512);){let a=mp(o,s,t,i|oe.Self,jt);if(a!==jt)return a;let c=o.parent;if(!c){let l=s[Rh];if(l){let d=l.get(t,jt,i);if(d!==jt)return d}c=gp(s),s=s[Fi]}o=c}return r}function gp(n){let e=n[ee],t=e.type;return t===2?e.declTNode:t===1?n[kt]:null}function Hf(n,e=null,t=null,i){let r=vp(n,e,t,i);return r.resolveInjectorInitializers(),r}function vp(n,e=null,t=null,i,r=new Set){let o=[t||tt,G0(n)];return i=i||(typeof n=="object"?void 0:Qe(n)),new wr(o,e||xs(),i||null,r)}var vt=class n{static{this.THROW_IF_NOT_FOUND=Dr}static{this.NULL=new is}static create(e,t){if(Array.isArray(e))return Hf({name:""},t,e,"");{let i=e.name??"";return Hf({name:i},e.parent,e.providers,i)}}static{this.\u0275prov=O({token:n,providedIn:"any",factory:()=>M(bh)})}static{this.__NG_ELEMENT_ID__=-1}};var Wy=new z("");Wy.__NG_ELEMENT_ID__=n=>{let e=it();if(e===null)throw new V(204,!1);if(e.type&2)return e.value;if(n&oe.Optional)return null;throw new V(204,!1)};var Gy="ngOriginalError";function Oc(n){return n[Gy]}var yp=!0,Cp=(()=>{class n{static{this.__NG_ELEMENT_ID__=qy}static{this.__NG_ENV_ID__=t=>t}}return n})(),el=class extends Cp{constructor(e){super(),this._lView=e}onDestroy(e){return qh(this._lView,e),()=>hy(this._lView,e)}};function qy(){return new el(de())}var Li=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new se(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=O({token:n,providedIn:"root",factory:()=>new n})}}return n})();var tl=class extends _e{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,iy()&&(this.destroyRef=k(Cp,{optional:!0})??void 0,this.pendingTasks=k(Li,{optional:!0})??void 0)}emit(e){let t=ue(null);try{super.next(e)}finally{ue(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof ge&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},G=tl;function hs(...n){}function bp(n){let e,t;function i(){n=hs;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function Bf(n){return queueMicrotask(()=>n()),()=>{n=hs}}var Jl="isAngularZone",ps=Jl+"_ID",Yy=0,Ee=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new G(!1),this.onMicrotaskEmpty=new G(!1),this.onStable=new G(!1),this.onError=new G(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=yp}=e;if(typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,Ky(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Jl)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new V(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,Qy,hs,hs);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},Qy={};function Xl(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Zy(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){bp(()=>{n.callbackScheduled=!1,nl(n),n.isCheckStableRunning=!0,Xl(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),nl(n)}function Ky(n){let e=()=>{Zy(n)},t=Yy++;n._inner=n._inner.fork({name:"angular",properties:{[Jl]:!0,[ps]:t,[ps+t]:!0},onInvokeTask:(i,r,o,s,a,c)=>{if(Jy(c))return i.invokeTask(o,s,a,c);try{return Uf(n),i.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),$f(n)}},onInvoke:(i,r,o,s,a,c,l)=>{try{return Uf(n),i.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Xy(c)&&e(),$f(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,nl(n),Xl(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function nl(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Uf(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $f(n){n._nesting--,Xl(n)}var il=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new G,this.onMicrotaskEmpty=new G,this.onStable=new G,this.onError=new G}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function Jy(n){return Sp(n,"__ignore_ng_zone__")}function Xy(n){return Sp(n,"__scheduler_tick__")}function Sp(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var nn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Oc(e);for(;t&&Oc(t);)t=Oc(t);return t||null}},eC=new z("",{providedIn:"root",factory:()=>{let n=k(Ee),e=k(nn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function tC(){return Vi(it(),de())}function Vi(n,e){return new dt(Ct(n,e))}var dt=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=tC}}return n})();function nC(n){return n instanceof dt?n.nativeElement:n}function iC(){return this._results[Symbol.iterator]()}var rl=class n{get changes(){return this._changes??=new G}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=iC)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=M0(e);(this._changesDetected=!E0(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Dp(n){return(n.flags&128)===128}var _p=new Map,rC=0;function oC(){return rC++}function sC(n){_p.set(n[Ts],n)}function ol(n){_p.delete(n[Ts])}var zf="__ngContext__";function Yn(n,e){Dn(e)?(n[zf]=e[Ts],sC(e)):n[zf]=e}function wp(n){return Ep(n[Ir])}function Ip(n){return Ep(n[Ot])}function Ep(n){for(;n!==null&&!cn(n);)n=n[Ot];return n}var sl;function Mp(n){sl=n}function aC(){if(sl!==void 0)return sl;if(typeof document<"u")return document;throw new V(210,!1)}var eu=new z("",{providedIn:"root",factory:()=>cC}),cC="ng",tu=new z(""),ji=new z("",{providedIn:"platform",factory:()=>"unknown"});var nu=new z("",{providedIn:"root",factory:()=>aC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var lC="h",uC="b";var dC=()=>null;function iu(n,e,t=!1){return dC(n,e,t)}var xp=!1,fC=new z("",{providedIn:"root",factory:()=>xp});var ms=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ch})`}};function Pr(n){return n instanceof ms?n.changingThisBreaksApplicationSecurity:n}function Tp(n,e){let t=hC(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ch})`)}return t===e}function hC(n){return n instanceof ms&&n.getTypeName()||null}var pC=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Op(n){return n=String(n),n.match(pC)?n:"unsafe:"+n}var ru=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ru||{});function $(n){let e=mC();return e?e.sanitize(ru.URL,n)||"":Tp(n,"URL")?Pr(n):Op(en(n))}function mC(){let n=de();return n&&n[Bt].sanitizer}function Pp(n){return n.ownerDocument.defaultView}function Ap(n){return n instanceof Function?n():n}var rn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(rn||{}),gC;function ou(n,e){return gC(n,e)}function _i(n,e,t,i,r){if(i!=null){let o,s=!1;cn(i)?o=i:Dn(i)&&(s=!0,i=i[an]);let a=$t(i);n===0&&t!==null?r==null?Lp(e,t,a):gs(e,t,a,r||null,!0):n===1&&t!==null?gs(e,t,a,r||null,!0):n===2?PC(e,a,s):n===3&&e.destroyNode(a),o!=null&&kC(e,n,o,t,r)}}function vC(n,e){return n.createText(e)}function yC(n,e,t){n.setValue(e,t)}function kp(n,e,t){return n.createElement(e,t)}function CC(n,e){Np(n,e),e[an]=null,e[kt]=null}function bC(n,e,t,i,r,o){i[an]=r,i[kt]=e,Rs(n,i,t,1,r,o)}function Np(n,e){e[Bt].changeDetectionScheduler?.notify(9),Rs(n,e,e[Me],2,null,null)}function SC(n){let e=n[Ir];if(!e)return Pc(n[ee],n);for(;e;){let t=null;if(Dn(e))t=e[Ir];else{let i=e[ut];i&&(t=i)}if(!t){for(;e&&!e[Ot]&&e!==n;)Dn(e)&&Pc(e[ee],e),e=e[Be];e===null&&(e=n),Dn(e)&&Pc(e[ee],e),t=e&&e[Ot]}e=t}}function DC(n,e,t,i){let r=ut+i,o=t.length;i>0&&(t[r-1][Ot]=e),i<o-ut?(e[Ot]=t[r],Ch(t,ut+i,e)):(t.push(e),e[Ot]=null),e[Be]=t;let s=e[Un];s!==null&&t!==s&&Rp(s,e);let a=e[tn];a!==null&&a.insertView(n),Yc(e),e[W]|=128}function Rp(n,e){let t=n[Oi],i=e[Be];if(Dn(i))n[W]|=as.HasTransplantedViews;else{let r=i[Be][Ut];e[Ut]!==r&&(n[W]|=as.HasTransplantedViews)}t===null?n[Oi]=[e]:t.push(e)}function su(n,e){let t=n[Oi],i=t.indexOf(e);t.splice(i,1)}function al(n,e){if(n.length<=ut)return;let t=ut+e,i=n[t];if(i){let r=i[Un];r!==null&&r!==n&&su(r,i),e>0&&(n[t-1][Ot]=i[Ot]);let o=ns(n,ut+e);CC(i[ee],i);let s=o[tn];s!==null&&s.detachView(o[ee]),i[Be]=null,i[Ot]=null,i[W]&=-129}return i}function Fp(n,e){if(!(e[W]&256)){let t=e[Me];t.destroyNode&&Rs(n,e,t,3,null,null),SC(e)}}function Pc(n,e){if(e[W]&256)return;let t=ue(null);try{e[W]&=-129,e[W]|=256,e[gt]&&sc(e[gt]),wC(n,e),_C(n,e),e[ee].type===1&&e[Me].destroy();let i=e[Un];if(i!==null&&cn(e[Be])){i!==e[Be]&&su(i,e);let r=e[tn];r!==null&&r.detachView(n)}ol(e)}finally{ue(t)}}function _C(n,e){let t=n.cleanup,i=e[os];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[t[o+1]];t[o].call(s)}i!==null&&(e[os]=null);let r=e[Sn];if(r!==null){e[Sn]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function wC(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Gn)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];Vt(4,a,c);try{c.call(a)}finally{Vt(5,a,c)}}else{Vt(4,r,o);try{o.call(r)}finally{Vt(5,r,o)}}}}}function IC(n,e,t){return EC(n,e.parent,t)}function EC(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[an];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=n.data[i.directiveStart+r];if(o===Ht.None||o===Ht.Emulated)return null}return Ct(i,t)}}function gs(n,e,t,i,r){n.insertBefore(e,t,i,r)}function Lp(n,e,t){n.appendChild(e,t)}function Wf(n,e,t,i,r){i!==null?gs(n,e,t,i,r):Lp(n,e,t)}function Vp(n,e){return n.parentNode(e)}function MC(n,e){return n.nextSibling(e)}function xC(n,e,t){return OC(n,e,t)}function TC(n,e,t){return n.type&40?Ct(n,t):null}var OC=TC,Gf;function au(n,e,t,i){let r=IC(n,i,e),o=e[Me],s=i.parent||e[kt],a=xC(s,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Wf(o,r,t[c],a,!1);else Wf(o,r,t,a,!1);Gf!==void 0&&Gf(o,i,e,t,r)}function Cr(n,e){if(e!==null){let t=e.type;if(t&3)return Ct(e,n);if(t&4)return cl(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return Cr(n,i);{let r=n[e.index];return cn(r)?cl(-1,r):$t(r)}}else{if(t&128)return Cr(n,e.next);if(t&32)return ou(e,n)()||$t(n[e.index]);{let i=jp(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=zn(n[Ut]);return Cr(r,i)}else return Cr(n,e.next)}}}return null}function jp(n,e){if(e!==null){let i=n[Ut][kt],r=e.projection;return i.projection[r]}return null}function cl(n,e){let t=ut+n+1;if(t<e.length){let i=e[t],r=i[ee].firstChild;if(r!==null)return Cr(i,r)}return e[$n]}function PC(n,e,t){n.removeChild(null,e,t)}function cu(n,e,t,i,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],c=t.type;if(s&&e===0&&(a&&Yn($t(a),i),t.flags|=2),(t.flags&32)!==32)if(c&8)cu(n,e,t.child,i,r,o,!1),_i(e,n,r,a,o);else if(c&32){let l=ou(t,i),d;for(;d=l();)_i(e,n,r,d,o);_i(e,n,r,a,o)}else c&16?AC(n,e,i,t,r,o):_i(e,n,r,a,o);t=s?t.projectionNext:t.next}}function Rs(n,e,t,i,r,o){cu(t,i,n.firstChild,e,r,o,!1)}function AC(n,e,t,i,r,o){let s=t[Ut],c=s[kt].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];_i(e,n,r,d,o)}else{let l=c,d=s[Be];Dp(i)&&(l.flags|=128),cu(n,e,l,d,r,o,!0)}}function kC(n,e,t,i,r){let o=t[$n],s=$t(t);o!==s&&_i(e,n,i,o,r);for(let a=ut;a<t.length;a++){let c=t[a];Rs(c[ee],c,n,e,i,o)}}function NC(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:rn.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=rn.Important),n.setStyle(t,i,r,o))}}function RC(n,e,t){n.setAttribute(e,"style",t)}function Hp(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Bp(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&Uc(n,e,i),r!==null&&Hp(n,e,r),o!==null&&RC(n,e,o)}var ft={};function h(n=1){Up(Ve(),de(),ln()+n,!1)}function Up(n,e,t,i){if(!i)if((e[W]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Qo(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Zo(e,o,0,t)}Wn(t)}function T(n,e=oe.Default){let t=de();if(t===null)return M(n,e);let i=it();return pp(i,t,Ye(n),e)}function $p(n,e,t,i,r,o){let s=ue(null);try{let a=null;r&_n.SignalBased&&(a=e[i][Kt]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&_n.HasDecoratorInputTransform&&(o=n.inputTransforms[i].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,i):Vh(e,a,i,o)}finally{ue(s)}}function FC(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Wn(~r);else{let o=r,s=t[++i],a=t[++i];Ey(s,o);let c=e[o];a(2,c)}}}finally{Wn(-1)}}function Fs(n,e,t,i,r,o,s,a,c,l,d){let p=e.blueprint.slice();return p[an]=r,p[W]=i|4|128|8|64,(l!==null||n&&n[W]&2048)&&(p[W]|=2048),Wh(p),p[Be]=p[Fi]=n,p[Pt]=t,p[Bt]=s||n&&n[Bt],p[Me]=a||n&&n[Me],p[Ti]=c||n&&n[Ti]||null,p[kt]=o,p[Ts]=oC(),p[rs]=d,p[Rh]=l,p[Ut]=e.type==2?n[Ut]:p,p}function Ls(n,e,t,i,r){let o=n.data[e];if(o===null)o=LC(n,e,t,i,r),Iy()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=by();o.injectorIndex=s===null?-1:s.injectorIndex}return Or(o,!0),o}function LC(n,e,t,i,r){let o=Zh(),s=Kh(),a=s?o:o&&o.parent,c=n.data[e]=$C(n,a,t,e,i,r);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function zp(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Wp(n,e,t,i,r){let o=ln(),s=i&2;try{Wn(-1),s&&e.length>At&&Up(n,e,At,!1),Vt(s?2:0,r),t(i,r)}finally{Wn(o),Vt(s?3:1,r)}}function Gp(n,e,t){if(Lh(e)){let i=ue(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{ue(i)}}}function qp(n,e,t){Qh()&&(QC(n,e,t,Ct(t,e)),(t.flags&64)===64&&Xp(n,e,t))}function Yp(n,e,t=Ct){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function Qp(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=lu(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function lu(n,e,t,i,r,o,s,a,c,l,d){let p=At+i,C=p+r,v=VC(p,C),E=typeof l=="function"?l():l;return v[ee]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:C,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:d}}function VC(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:ft);return t}function jC(n,e,t,i){let o=i.get(fC,xp)||t===Ht.ShadowDom,s=n.selectRootElement(e,o);return HC(s),s}function HC(n){BC(n)}var BC=()=>null;function UC(n,e,t,i){let r=nm(e);r.push(t),n.firstCreatePass&&im(n).push(i,r.length-1)}function $C(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return vy()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function qf(n,e,t,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;i??={};let a,c=_n.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(r!==null){if(!r.hasOwnProperty(o))continue;l=r[o]}n===0?Yf(i,t,l,a,c):Yf(i,t,l,a)}return i}function Yf(n,e,t,i,r){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,i):o=n[t]=[e,i],r!==void 0&&o.push(r)}function zC(n,e,t){let i=e.directiveStart,r=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let d=i;d<r;d++){let p=o[d],C=t?t.get(p):null,v=C?C.inputs:null,E=C?C.outputs:null;c=qf(0,p.inputs,d,c,v),l=qf(1,p.outputs,d,l,E);let L=c!==null&&s!==null&&!Hl(e)?sb(c,d,s):null;a.push(L)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function WC(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Zp(n,e,t,i,r,o,s,a){let c=Ct(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[i])?(uu(n,t,d,i,r),Os(e)&&GC(t,e.index)):e.type&3?(i=WC(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(c,i,r)):e.type&12}function GC(n,e){let t=Mn(e,n);t[W]&16||(t[W]|=64)}function Kp(n,e,t,i){if(Qh()){let r=i===null?null:{"":-1},o=KC(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Jp(n,e,t,s,r,a),r&&JC(t,i,r)}t.mergedAttrs=_r(t.mergedAttrs,t.attrs)}function Jp(n,e,t,i,r,o){for(let l=0;l<i.length;l++)Jc(fs(t,e),n,i[l].type);eb(t,n.data.length,i.length);for(let l=0;l<i.length;l++){let d=i[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=zp(n,e,i.length,null);for(let l=0;l<i.length;l++){let d=i[l];t.mergedAttrs=_r(t.mergedAttrs,d.hostAttrs),tb(n,t,e,c,d),XC(c,d,r),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let p=d.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}zC(n,t,o)}function qC(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;YC(s)!=a&&s.push(a),s.push(t,i,o)}}function YC(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function QC(n,e,t,i){let r=t.directiveStart,o=t.directiveEnd;Os(t)&&nb(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||fs(t,e),Yn(i,e);let s=t.initialInputs;for(let a=r;a<o;a++){let c=n.data[a],l=qn(e,n,a,t);if(Yn(l,e),s!==null&&ob(e,a-r,l,c,t,s),In(c)){let d=Mn(t.index,e);d[Pt]=qn(e,n,a,t)}}}function Xp(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=My();try{Wn(o);for(let a=i;a<r;a++){let c=n.data[a],l=e[a];Qc(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&ZC(c,l)}}finally{Wn(-1),Qc(s)}}function ZC(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function KC(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(L0(e,s.selectors,!1))if(i||(i=[]),In(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let c=a.length;ll(n,e,c)}else i.unshift(s),ll(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function ll(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function JC(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new V(-301,!1);i.push(e[r],o)}}}function XC(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;In(e)&&(t[""]=n)}}function eb(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function tb(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=Bn(r.type,!0)),s=new Gn(o,In(r),T);n.blueprint[i]=s,t[i]=s,qC(n,e,i,zp(n,t,r.hostVars,ft),r)}function nb(n,e,t){let i=Ct(e,n),r=Qp(t),o=n[Bt].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Vs(n,Fs(n,r,null,s,i,e,null,o.createRenderer(i,t),null,null,null));n[e.index]=a}function ib(n,e,t,i,r,o){let s=Ct(n,e);rb(e[Me],s,o,n.value,t,i,r)}function rb(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?en(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function ob(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],d=s[a++],p=s[a++];$p(i,t,c,l,d,p)}}function sb(n,e,t){let i=null,r=0;for(;r<t.length;){let o=t[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){i===null&&(i=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){i.push(o,s[a+1],s[a+2],t[r+1]);break}}r+=2}return i}function em(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function tm(n,e){let t=n.contentQueries;if(t!==null){let i=ue(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];zl(o),a.contentQueries(2,e[s],s)}}}finally{ue(i)}}}function Vs(n,e){return n[Ir]?n[Nf][Ot]=e:n[Ir]=e,n[Nf]=e,e}function ul(n,e,t){zl(0);let i=ue(null);try{e(n,t)}finally{ue(i)}}function nm(n){return n[os]??=[]}function im(n){return n.cleanup??=[]}function rm(n,e){let t=n[Ti],i=t?t.get(nn,null):null;i&&i.handleError(e)}function uu(n,e,t,i,r){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],d=n.data[s];$p(d,l,i,a,c,r)}}function du(n,e,t){let i=Uh(e,n);yC(n[Me],i,t)}function ab(n,e){let t=Mn(e,n),i=t[ee];cb(i,t);let r=t[an];r!==null&&t[rs]===null&&(t[rs]=iu(r,t[Ti])),fu(i,t,t[Pt])}function cb(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function fu(n,e,t){Wl(e);try{let i=n.viewQuery;i!==null&&ul(1,i,t);let r=n.template;r!==null&&Wp(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[tn]?.finishViewCreation(n),n.staticContentQueries&&tm(n,e),n.staticViewQueries&&ul(2,n.viewQuery,t);let o=n.components;o!==null&&lb(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[W]&=-5,Gl()}}function lb(n,e){for(let t=0;t<e.length;t++)ab(n,e[t])}function ub(n,e,t,i){let r=ue(null);try{let o=e.tView,a=n[W]&4096?4096:16,c=Fs(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=n[e.index];c[Un]=l;let d=n[tn];return d!==null&&(c[tn]=d.createEmbeddedView(o)),fu(o,c,t),c}finally{ue(r)}}function Qf(n,e){return!e||e.firstChild===null||Dp(n)}function db(n,e,t,i=!0){let r=e[ee];if(DC(r,e,n,t),i){let s=cl(t,n),a=e[Me],c=Vp(a,n[$n]);c!==null&&bC(r,n[kt],a,e,c,s)}let o=e[rs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function vs(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push($t(o)),cn(o)&&fb(o,i);let s=t.type;if(s&8)vs(n,e,t.child,i);else if(s&32){let a=ou(t,e),c;for(;c=a();)i.push(c)}else if(s&16){let a=jp(e,t);if(Array.isArray(a))i.push(...a);else{let c=zn(e[Ut]);vs(c[ee],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function fb(n,e){for(let t=ut;t<n.length;t++){let i=n[t],r=i[ee].firstChild;r!==null&&vs(i[ee],i,r,e)}n[$n]!==n[an]&&e.push(n[$n])}var om=[];function hb(n){return n[gt]??pb(n)}function pb(n){let e=om.pop()??Object.create(gb);return e.lView=n,e}function mb(n){n.lView[gt]!==n&&(n.lView=null,om.push(n))}var gb=_(g({},pr),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{As(n.lView)},consumerOnSignalRead(){this.lView[gt]=this}});function vb(n){let e=n[gt]??Object.create(yb);return e.lView=n,e}var yb=_(g({},pr),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=zn(n.lView);for(;e&&!sm(e[ee]);)e=zn(e);e&&Gh(e)},consumerOnSignalRead(){this.lView[gt]=this}});function sm(n){return n.type!==2}var Cb=100;function am(n,e=!0,t=0){let i=n[Bt],r=i.rendererFactory,o=!1;o||r.begin?.();try{bb(n,t)}catch(s){throw e&&rm(n,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function bb(n,e){let t=Jh();try{Ff(!0),dl(n,e);let i=0;for(;Ps(n);){if(i===Cb)throw new V(103,!1);i++,dl(n,1)}}finally{Ff(t)}}function Sb(n,e,t,i){let r=e[W];if((r&256)===256)return;let o=!1,s=!1;!o&&e[Bt].inlineEffectRunner?.flush(),Wl(e);let a=!0,c=null,l=null;o||(sm(n)?(l=hb(e),c=vo(l)):Hd()===null?(a=!1,l=vb(e),c=vo(l)):e[gt]&&(sc(e[gt]),e[gt]=null));try{Wh(e),wy(n.bindingStartIndex),t!==null&&Wp(n,e,t,2,i);let d=(r&3)===3;if(!o)if(d){let v=n.preOrderCheckHooks;v!==null&&Qo(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Zo(e,v,0,null),Mc(e,0)}if(s||Db(e),cm(e,0),n.contentQueries!==null&&tm(n,e),!o)if(d){let v=n.contentCheckHooks;v!==null&&Qo(e,v)}else{let v=n.contentHooks;v!==null&&Zo(e,v,1),Mc(e,1)}FC(n,e);let p=n.components;p!==null&&um(e,p,0);let C=n.viewQuery;if(C!==null&&ul(2,C,i),!o)if(d){let v=n.viewCheckHooks;v!==null&&Qo(e,v)}else{let v=n.viewHooks;v!==null&&Zo(e,v,2),Mc(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ec]){for(let v of e[Ec])v();e[Ec]=null}o||(e[W]&=-73)}catch(d){throw o||As(e),d}finally{l!==null&&(rc(l,c),a&&mb(l)),Gl()}}function cm(n,e){for(let t=wp(n);t!==null;t=Ip(t))for(let i=ut;i<t.length;i++){let r=t[i];lm(r,e)}}function Db(n){for(let e=wp(n);e!==null;e=Ip(e)){if(!(e[W]&as.HasTransplantedViews))continue;let t=e[Oi];for(let i=0;i<t.length;i++){let r=t[i];Gh(r)}}}function _b(n,e,t){let i=Mn(e,n);lm(i,t)}function lm(n,e){$l(n)&&dl(n,e)}function dl(n,e){let i=n[ee],r=n[W],o=n[gt],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&oc(o)),s||=!1,o&&(o.dirty=!1),n[W]&=-9217,s)Sb(i,n,i.template,n[Pt]);else if(r&8192){cm(n,1);let a=i.components;a!==null&&um(n,a,1)}}function um(n,e,t){for(let i=0;i<e.length;i++)_b(n,e[i],t)}function hu(n,e){let t=Jh()?64:1088;for(n[Bt].changeDetectionScheduler?.notify(e);n;){n[W]|=t;let i=zn(n);if(Gc(n)&&!i)return n;n=i}return null}var Qn=class{get rootNodes(){let e=this._lView,t=e[ee];return vs(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pt]}set context(e){this._lView[Pt]=e}get destroyed(){return(this._lView[W]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Be];if(cn(e)){let t=e[ss],i=t?t.indexOf(this):-1;i>-1&&(al(e,i),ns(t,i))}this._attachedToViewContainer=!1}Fp(this._lView[ee],this._lView)}onDestroy(e){qh(this._lView,e)}markForCheck(){hu(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[W]&=-129}reattach(){Yc(this._lView),this._lView[W]|=128}detectChanges(){this._lView[W]|=1024,am(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Gc(this._lView),t=this._lView[Un];t!==null&&!e&&su(t,this._lView),Np(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e;let t=Gc(this._lView),i=this._lView[Un];i!==null&&!t&&Rp(i,this._lView),Yc(this._lView)}},Zn=(()=>{class n{static{this.__NG_ELEMENT_ID__=Eb}}return n})(),wb=Zn,Ib=class extends wb{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=ub(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Qn(r)}};function Eb(){return js(it(),de())}function js(n,e){return n.type&4?new Ib(e,n,Vi(n,e)):null}var yA=new RegExp(`^(\\d+)*(${uC}|${lC})*(.*)`);var Mb=()=>null;function Zf(n,e){return Mb(n,e)}var Pi=class{},Hs=new z("",{providedIn:"root",factory:()=>!1});var dm=new z(""),fm=new z(""),fl=class{},ys=class{};function xb(n){let e=Error(`No component factory found for ${Qe(n)}.`);return e[Tb]=n,e}var Tb="ngComponent";var hl=class{resolveComponentFactory(e){throw xb(e)}},Ai=class{static{this.NULL=new hl}},ki=class{},un=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Ob()}}return n})();function Ob(){let n=de(),e=it(),t=Mn(e.index,n);return(Dn(t)?t:n)[Me]}var Pb=(()=>{class n{static{this.\u0275prov=O({token:n,providedIn:"root",factory:()=>null})}}return n})();function pl(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=Vc(r,a);else if(o==2){let c=a,l=e[++s];i=Vc(i,c+": "+l+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var Cs=class extends Ai{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=wn(e);return new Ni(t,this.ngModule)}};function Kf(n,e){let t=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let o=Array.isArray(r),s=o?r[0]:r,a=o?r[1]:_n.None;e?t.push({propName:s,templateName:i,isSignal:(a&_n.SignalBased)!==0}):t.push({propName:s,templateName:i})}return t}function Ab(n){let e=n.toLowerCase();return e==="svg"?cy:e==="math"?ly:null}var Ni=class extends ys{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=Kf(e.inputs,!0);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return Kf(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=B0(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=ue(null);try{r=r||this.ngModule;let s=r instanceof nt?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Zc(e,s):e,c=a.get(ki,null);if(c===null)throw new V(407,!1);let l=a.get(Pb,null),d=a.get(Pi,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},C=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",E=i?jC(C,i,this.componentDef.encapsulation,a):kp(C,v,Ab(v)),L=512;this.componentDef.signals?L|=4096:this.componentDef.onPush||(L|=16);let X=null;E!==null&&(X=iu(E,a,!0));let ie=lu(0,null,null,1,0,null,null,null,null,null,null),De=Fs(null,ie,null,L,null,null,p,C,a,null,X);Wl(De);let Fe,qe,Zt=null;try{let at=this.componentDef,li,ec=null;at.findHostDirectiveDefs?(li=[],ec=new Map,at.findHostDirectiveDefs(at,li,ec),li.push(at)):li=[at];let Mv=kb(De,E);Zt=Nb(Mv,E,at,li,De,p,C),qe=$h(ie,At),E&&Lb(C,at,E,i),t!==void 0&&Vb(qe,this.ngContentSelectors,t),Fe=Fb(Zt,at,li,ec,De,[jb]),fu(ie,De,null)}catch(at){throw Zt!==null&&ol(Zt),ol(De),at}finally{Gl()}return new ml(this.componentType,Fe,Vi(qe,De),De,qe)}finally{ue(o)}}},ml=class extends fl{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Qn(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;uu(o[ee],o,r,e,t),this.previousInputValues.set(e,t);let s=Mn(this._tNode.index,o);hu(s,1)}}get injector(){return new Hn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function kb(n,e){let t=n[ee],i=At;return n[i]=e,Ls(t,i,2,"#host",null)}function Nb(n,e,t,i,r,o,s){let a=r[ee];Rb(i,n,e,s);let c=null;e!==null&&(c=iu(e,r[Ti]));let l=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let p=Fs(r,Qp(t),null,d,r[n.index],n,o,l,null,null,c);return a.firstCreatePass&&ll(a,n,i.length-1),Vs(r,p),r[n.index]=p}function Rb(n,e,t,i){for(let r of n)e.mergedAttrs=_r(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(pl(e,e.mergedAttrs,!0),t!==null&&Bp(i,t,e))}function Fb(n,e,t,i,r,o){let s=it(),a=r[ee],c=Ct(s,r);Jp(a,r,s,t,null,i);for(let d=0;d<t.length;d++){let p=s.directiveStart+d,C=qn(r,a,p,s);Yn(C,r)}Xp(a,r,s),c&&Yn(c,r);let l=qn(r,a,s.directiveStart+s.componentOffset,s);if(n[Pt]=r[Pt]=l,o!==null)for(let d of o)d(l,e);return Gp(a,s,r),l}function Lb(n,e,t,i){if(i)Uc(n,t,["ng-version","18.2.14"]);else{let{attrs:r,classes:o}=U0(e.selectors[0]);r&&Uc(n,t,r),o&&o.length>0&&Hp(n,t,o.join(" "))}}function Vb(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null?Array.from(o):null)}}function jb(){let n=it();Zl(de()[ee],n)}var xn=(()=>{class n{static{this.__NG_ELEMENT_ID__=Hb}}return n})();function Hb(){let n=it();return pm(n,de())}var Bb=xn,hm=class extends Bb{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Vi(this._hostTNode,this._hostLView)}get injector(){return new Hn(this._hostTNode,this._hostLView)}get parentInjector(){let e=Kl(this._hostTNode,this._hostLView);if(cp(e)){let t=us(e,this._hostLView),i=ls(e),r=t[ee].data[i+8];return new Hn(r,t)}else return new Hn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Jf(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-ut}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Zf(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,Qf(this._hostTNode,s)),a}createComponent(e,t,i,r,o){let s=e&&!ry(e),a;if(s)a=t;else{let E=t||{};a=E.index,i=E.injector,r=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef}let c=s?e:new Ni(wn(e)),l=i||this.parentInjector;if(!o&&c.ngModule==null){let L=(s?l:this.parentInjector).get(nt,null);L&&(o=L)}let d=wn(c.componentType??{}),p=Zf(this._lContainer,d?.id??null),C=p?.firstChild??null,v=c.create(l,r,C,o);return this.insertImpl(v.hostView,a,Qf(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(dy(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[Be],l=new hm(c,c[kt],c[Be]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return db(s,r,o,i),e.attachToViewContainerRef(),Ch(Ac(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Jf(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=al(this._lContainer,t);i&&(ns(Ac(this._lContainer),t),Fp(i[ee],i))}detach(e){let t=this._adjustIndex(e,-1),i=al(this._lContainer,t);return i&&ns(Ac(this._lContainer),t)!=null?new Qn(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function Jf(n){return n[ss]}function Ac(n){return n[ss]||(n[ss]=[])}function pm(n,e){let t,i=e[n.index];return cn(i)?t=i:(t=em(i,e,null,n),e[n.index]=t,Vs(e,t)),$b(t,e,n,i),new hm(t,n,e)}function Ub(n,e){let t=n[Me],i=t.createComment(""),r=Ct(e,n),o=Vp(t,r);return gs(t,o,i,MC(t,r),!1),i}var $b=Gb,zb=()=>!1;function Wb(n,e,t){return zb(n,e,t)}function Gb(n,e,t,i){if(n[$n])return;let r;t.type&8?r=$t(i):r=Ub(e,t),n[$n]=r}var gl=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},vl=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)pu(e,t).matches!==null&&this.queries[t].setDirty()}},yl=class{constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=eS(e):this.predicate=e}},Cl=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},bl=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,qb(t,o)),this.matchTNodeWithReadOption(e,t,Ko(t,e,o,!1,!1))}else i===Zn?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ko(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===dt||r===xn||r===Zn&&t.type&4)this.addMatch(t.index,-2);else{let o=Ko(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function qb(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function Yb(n,e){return n.type&11?Vi(n,e):n.type&4?js(n,e):null}function Qb(n,e,t,i){return t===-1?Yb(e,n):t===-2?Zb(n,e,i):qn(n,n[ee],t,e)}function Zb(n,e,t){if(t===dt)return Vi(e,n);if(t===Zn)return js(e,n);if(t===xn)return pm(e,n)}function mm(n,e,t,i){let r=e[tn].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=o[l];a.push(Qb(e,d,s[c+1],t.metadata.read))}}r.matches=a}return r.matches}function Sl(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=mm(n,e,r,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)i.push(s[a/2]);else{let l=o[a+1],d=e[-c];for(let p=ut;p<d.length;p++){let C=d[p];C[Un]===C[Be]&&Sl(C[ee],C,l,i)}if(d[Oi]!==null){let p=d[Oi];for(let C=0;C<p.length;C++){let v=p[C];Sl(v[ee],v,l,i)}}}}}return i}function Kb(n,e){return n[tn].queries[e].queryList}function Jb(n,e,t){let i=new rl((t&4)===4);return UC(n,e,i,i.destroy),(e[tn]??=new vl).queries.push(new gl(i))-1}function Xb(n,e,t){let i=Ve();return i.firstCreatePass&&(tS(i,new yl(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),Jb(i,de(),e)}function eS(n){return n.split(",").map(e=>e.trim())}function tS(n,e,t){n.queries===null&&(n.queries=new Cl),n.queries.track(new bl(e,t))}function pu(n,e){return n.queries.getByIndex(e)}function nS(n,e){let t=n[ee],i=pu(t,e);return i.crossesNgTemplate?Sl(t,n,e,[]):mm(t,n,i,e)}var Xf=new Set;function Ar(n){Xf.has(n)||(Xf.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function iS(n){return typeof n=="function"&&n[Kt]!==void 0}function Bs(n,e){Ar("NgSignals");let t=Kd(n),i=t[Kt];return e?.equal&&(i.equal=e.equal),t.set=r=>ac(i,r),t.update=r=>Jd(i,r),t.asReadonly=rS.bind(t),t}function rS(){let n=this[Kt];if(n.readonlyFn===void 0){let e=()=>this();e[Kt]=n,n.readonlyFn=e}return n.readonlyFn}function gm(n){return iS(n)&&typeof n.set=="function"}function oS(n){return Object.getPrototypeOf(n.prototype).constructor}function ht(n){let e=oS(n.type),t=!0,i=[n];for(;e;){let r;if(In(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=Wo(n.inputs),s.inputTransforms=Wo(n.inputTransforms),s.declaredInputs=Wo(n.declaredInputs),s.outputs=Wo(n.outputs);let a=r.hostBindings;a&&uS(n,a);let c=r.viewQuery,l=r.contentQueries;if(c&&cS(n,c),l&&lS(n,l),sS(n,r),a0(n.outputs,r.outputs),In(r)&&r.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ht&&(t=!1)}}e=Object.getPrototypeOf(e)}aS(i)}function sS(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];if(i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function aS(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=_r(r.hostAttrs,t=_r(t,r.hostAttrs))}}function Wo(n){return n===Ei?{}:n===tt?[]:n}function cS(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function lS(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function uS(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}var En=class{},Er=class{};var Dl=class extends En{constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cs(this);let o=xh(e);this._bootstrapComponents=Ap(o.bootstrap),this._r3Injector=vp(e,t,[{provide:En,useValue:this},{provide:Ai,useValue:this.componentFactoryResolver},...i],Qe(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},_l=class extends Er{constructor(e){super(),this.moduleType=e}create(e){return new Dl(this.moduleType,e,[])}};var bs=class extends En{constructor(e){super(),this.componentFactoryResolver=new Cs(this),this.instance=null;let t=new wr([...e.providers,{provide:En,useValue:this},{provide:Ai,useValue:this.componentFactoryResolver}],e.parent||xs(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function mu(n,e,t=null){return new bs({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function vm(n){return fS(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function dS(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function fS(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function hS(n,e,t){return n[e]=t}function on(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function gu(n,e,t,i){let r=on(n,e,t);return on(n,e+1,i)||r}function pS(n,e,t,i,r){let o=gu(n,e,t,i);return on(n,e+2,r)||o}function mS(n){return(n.flags&32)===32}function gS(n,e,t,i,r,o,s,a,c){let l=e.consts,d=Ls(e,n,4,s||null,a||null);Kp(e,t,d,cs(l,c)),Zl(e,d);let p=d.tView=lu(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),p.queries=e.queries.embeddedTView(d)),d}function vS(n,e,t,i,r,o,s,a,c,l){let d=t+At,p=e.firstCreatePass?gS(d,e,n,i,r,o,s,a,c):e.data[d];Or(p,!1);let C=yS(e,n,p,t);Yl()&&au(e,n,C,p),Yn(C,n);let v=em(C,n,C,p);return n[d]=v,Vs(n,v),Wb(v,p,n),Ul(p)&&qp(e,n,p),c!=null&&Yp(n,p,l),p}function N(n,e,t,i,r,o,s,a){let c=de(),l=Ve(),d=cs(l.consts,o);return vS(c,l,n,e,t,i,r,d,s,a),N}var yS=CS;function CS(n,e,t,i){return Ql(!0),e[Me].createComment("")}var br=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(br||{}),bS=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=O({token:n,providedIn:"root",factory:()=>new n})}}return n})(),eh=class n{constructor(){this.ngZone=k(Ee),this.scheduler=k(Pi),this.errorHandler=k(nn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[br.EarlyRead,br.Write,br.MixedReadWrite,br.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(i){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=O({token:n,providedIn:"root",factory:()=>new n})}};function Hi(n,e,t,i){let r=de(),o=ks();if(on(r,o,e)){let s=Ve(),a=ql();ib(a,r,n,e,t,i)}return Hi}function SS(n,e,t,i){return on(n,ks(),t)?e+en(t)+i:ft}function DS(n,e,t,i,r,o){let s=Xh(),a=gu(n,s,t,r);return Ns(2),a?e+en(t)+i+en(r)+o:ft}function _S(n,e,t,i,r,o,s,a){let c=Xh(),l=pS(n,c,t,r,s);return Ns(3),l?e+en(t)+i+en(r)+o+en(s)+a:ft}function Go(n,e){return n<<17|e<<2}function Kn(n){return n>>17&32767}function wS(n){return(n&2)==2}function IS(n,e){return n&131071|e<<17}function wl(n){return n|2}function Ri(n){return(n&131068)>>2}function kc(n,e){return n&-131069|e<<2}function ES(n){return(n&1)===1}function Il(n){return n|1}function MS(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Kn(s),c=Ri(s);n[i]=t;let l=!1,d;if(Array.isArray(t)){let p=t;d=p[1],(d===null||Tr(p,d)>0)&&(l=!0)}else d=t;if(r)if(c!==0){let C=Kn(n[a+1]);n[i+1]=Go(C,a),C!==0&&(n[C+1]=kc(n[C+1],i)),n[a+1]=IS(n[a+1],i)}else n[i+1]=Go(a,0),a!==0&&(n[a+1]=kc(n[a+1],i)),a=i;else n[i+1]=Go(c,0),a===0?a=i:n[c+1]=kc(n[c+1],i),c=i;l&&(n[i+1]=wl(n[i+1])),th(n,d,i,!0),th(n,d,i,!1),xS(e,d,n,i,o),s=Go(a,c),o?e.classBindings=s:e.styleBindings=s}function xS(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Tr(o,e)>=0&&(t[i+1]=Il(t[i+1]))}function th(n,e,t,i){let r=n[t+1],o=e===null,s=i?Kn(r):Ri(r),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];TS(c,e)&&(a=!0,n[s+1]=i?Il(l):wl(l)),s=i?Kn(l):Ri(l)}a&&(n[t+1]=i?wl(r):Il(r))}function TS(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Tr(n,e)>=0:!1}var Tt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function OS(n){return n.substring(Tt.key,Tt.keyEnd)}function PS(n){return AS(n),ym(n,Cm(n,0,Tt.textEnd))}function ym(n,e){let t=Tt.textEnd;return t===e?-1:(e=Tt.keyEnd=kS(n,Tt.key=e,t),Cm(n,e,t))}function AS(n){Tt.key=0,Tt.keyEnd=0,Tt.value=0,Tt.valueEnd=0,Tt.textEnd=n.length}function Cm(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function kS(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function y(n,e,t){let i=de(),r=ks();if(on(i,r,e)){let o=Ve(),s=ql();Zp(o,s,i,n,e,i[Me],t,!1)}return y}function El(n,e,t,i,r){let o=e.inputs,s=r?"class":"style";uu(n,t,o[s],s,i)}function je(n,e,t){return bm(n,e,t,!1),je}function F(n,e){return bm(n,e,null,!0),F}function Us(n){RS(BS,NS,n,!0)}function NS(n,e){for(let t=PS(e);t>=0;t=ym(e,t))jl(n,OS(e),!0)}function bm(n,e,t,i){let r=de(),o=Ve(),s=Ns(2);if(o.firstUpdatePass&&Dm(o,n,s,i),e!==ft&&on(r,s,e)){let a=o.data[ln()];_m(o,a,r,r[Me],n,r[s+1]=$S(e,t),i,s)}}function RS(n,e,t,i){let r=Ve(),o=Ns(2);r.firstUpdatePass&&Dm(r,null,o,i);let s=de();if(t!==ft&&on(s,o,t)){let a=r.data[ln()];if(wm(a,i)&&!Sm(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Vc(c,t||"")),El(r,a,s,t,i)}else US(r,a,s,s[Me],s[o+1],s[o+1]=HS(n,e,t),i,o)}}function Sm(n,e){return e>=n.expandoStartIndex}function Dm(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[ln()],s=Sm(n,t);wm(o,i)&&e===null&&!s&&(e=!1),e=FS(r,o,e,i),MS(r,o,e,t,s,i)}}function FS(n,e,t,i){let r=xy(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=Nc(null,n,e,t,i),t=Mr(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=Nc(r,n,e,t,i),o===null){let c=LS(n,e,i);c!==void 0&&Array.isArray(c)&&(c=Nc(null,n,e,c[1],i),c=Mr(c,e.attrs,i),VS(n,e,i,c))}else o=jS(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function LS(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Ri(i)!==0)return n[Kn(i)]}function VS(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Kn(r)]=i}function jS(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=Mr(i,s,t)}return Mr(i,e.attrs,t)}function Nc(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=Mr(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function Mr(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),jl(n,s,t?!0:e[++o]))}return n===void 0?null:n}function HS(n,e,t){if(t==null||t==="")return tt;let i=[],r=Pr(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function BS(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&jl(n,i,t)}function US(n,e,t,i,r,o,s,a){r===ft&&(r=tt);let c=0,l=0,d=0<r.length?r[0]:null,p=0<o.length?o[0]:null;for(;d!==null||p!==null;){let C=c<r.length?r[c+1]:void 0,v=l<o.length?o[l+1]:void 0,E=null,L;d===p?(c+=2,l+=2,C!==v&&(E=p,L=v)):p===null||d!==null&&d<p?(c+=2,E=d):(l+=2,E=p,L=v),E!==null&&_m(n,e,t,i,E,L,s,a),d=c<r.length?r[c]:null,p=l<o.length?o[l]:null}}function _m(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=ES(l)?nh(c,e,t,r,Ri(l),s):void 0;if(!Ss(d)){Ss(o)||wS(l)&&(o=nh(c,null,t,r,a,s));let p=Uh(ln(),t);NC(i,s,p,r,o)}}function nh(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),d=l?c[1]:c,p=d===null,C=t[r+1];C===ft&&(C=p?tt:void 0);let v=p?wc(C,i):d===i?C:void 0;if(l&&!Ss(v)&&(v=wc(c,i)),Ss(v)&&(a=v,s))return a;let E=n[r+1];r=s?Kn(E):Ri(E)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=wc(c,i))}return a}function Ss(n){return n!==void 0}function $S(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Qe(Pr(n)))),n}function wm(n,e){return(n.flags&(e?8:16))!==0}function zS(n,e,t,i,r,o){let s=e.consts,a=cs(s,r),c=Ls(e,n,2,i,a);return Kp(e,t,c,cs(s,o)),c.attrs!==null&&pl(c,c.attrs,!1),c.mergedAttrs!==null&&pl(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function u(n,e,t,i){let r=de(),o=Ve(),s=At+n,a=r[Me],c=o.firstCreatePass?zS(s,o,r,e,t,i):o.data[s],l=WS(o,r,c,a,e,n);r[s]=l;let d=Ul(c);return Or(c,!0),Bp(a,l,c),!mS(c)&&Yl()&&au(o,r,l,c),py()===0&&Yn(l,r),my(),d&&(qp(o,r,c),Gp(o,c,r)),i!==null&&Yp(r,c),u}function f(){let n=it();Kh()?Sy():(n=n.parent,Or(n,!1));let e=n;yy(e)&&Cy(),gy();let t=Ve();return t.firstCreatePass&&(Zl(t,n),Lh(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Ry(e)&&El(t,e,de(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Fy(e)&&El(t,e,de(),e.stylesWithoutHost,!1),f}function A(n,e,t,i){return u(n,e,t,i),f(),A}var WS=(n,e,t,i,r,o)=>(Ql(!0),kp(i,r,Py()));function te(){return de()}var jn=void 0;function GS(n){let e=n,t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&i===0?1:5}var qS=["en",[["a","p"],["AM","PM"],jn],[["AM","PM"],jn,jn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jn,"{1} 'at' {0}",jn],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",GS],Rc={};function vu(n){let e=YS(n),t=ih(e);if(t)return t;let i=e.split("-")[0];if(t=ih(i),t)return t;if(i==="en")return qS;throw new V(701,!1)}function ih(n){return n in Rc||(Rc[n]=yr.ng&&yr.ng.common&&yr.ng.common.locales&&yr.ng.common.locales[n]),Rc[n]}var Bi=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Bi||{});function YS(n){return n.toLowerCase().replace(/_/g,"-")}var Ds="en-US";var QS=Ds;function ZS(n){typeof n=="string"&&(QS=n.toLowerCase().replace(/_/g,"-"))}var KS=(n,e,t)=>{};function b(n,e,t,i){let r=de(),o=Ve(),s=it();return Im(o,r,r[Me],s,n,e,i),b}function JS(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[os],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Im(n,e,t,i,r,o,s){let a=Ul(i),l=n.firstCreatePass&&im(n),d=e[Pt],p=nm(e),C=!0;if(i.type&3||s){let L=Ct(i,e),X=s?s(L):L,ie=p.length,De=s?qe=>s($t(qe[i.index])):i.index,Fe=null;if(!s&&a&&(Fe=JS(n,e,r,i.index)),Fe!==null){let qe=Fe.__ngLastListenerFn__||Fe;qe.__ngNextListenerFn__=o,Fe.__ngLastListenerFn__=o,C=!1}else{o=oh(i,e,d,o),KS(L,r,o);let qe=t.listen(X,r,o);p.push(o,qe),l&&l.push(r,De,ie,ie+1)}}else o=oh(i,e,d,o);let v=i.outputs,E;if(C&&v!==null&&(E=v[r])){let L=E.length;if(L)for(let X=0;X<L;X+=2){let ie=E[X],De=E[X+1],Zt=e[ie][De].subscribe(o),at=p.length;p.push(o,Zt),l&&l.push(r,i.index,at,-(at+1))}}}function rh(n,e,t,i){let r=ue(null);try{return Vt(6,e,t),t(i)!==!1}catch(o){return rm(n,o),!1}finally{Vt(7,e,t),ue(r)}}function oh(n,e,t,i){return function r(o){if(o===Function)return i;let s=n.componentOffset>-1?Mn(n.index,e):e;hu(s,5);let a=rh(e,t,i,o),c=r.__ngNextListenerFn__;for(;c;)a=rh(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function S(n=1){return Oy(n)}function ke(n,e,t){Xb(n,e,t)}function Oe(n){let e=de(),t=Ve(),i=ep();zl(i+1);let r=pu(t,i);if(n.dirty&&uy(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=nS(e,i);n.reset(o,nC),n.notifyOnChanges()}return!0}return!1}function Pe(){return Kb(de(),ep())}function XS(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function yu(n){let e=Dy();return zh(e,At+n)}function m(n,e=""){let t=de(),i=Ve(),r=n+At,o=i.firstCreatePass?Ls(i,r,1,e,null):i.data[r],s=eD(i,t,o,e,n);t[r]=s,Yl()&&au(i,t,s,o),Or(o,!1)}var eD=(n,e,t,i,r)=>(Ql(!0),vC(e[Me],i));function q(n){return Y("",n,""),q}function Y(n,e,t){let i=de(),r=SS(i,n,e,t);return r!==ft&&du(i,ln(),r),Y}function Tn(n,e,t,i,r){let o=de(),s=DS(o,n,e,t,i,r);return s!==ft&&du(o,ln(),s),Tn}function Cu(n,e,t,i,r,o,s){let a=de(),c=_S(a,n,e,t,i,r,o,s);return c!==ft&&du(a,ln(),c),Cu}function Ue(n,e,t){gm(e)&&(e=e());let i=de(),r=ks();if(on(i,r,e)){let o=Ve(),s=ql();Zp(o,s,i,n,e,i[Me],t,!1)}return Ue}function Ze(n,e){let t=gm(n);return t&&n.set(e),t}function $e(n,e){let t=de(),i=Ve(),r=it();return Im(i,t,t[Me],r,n,e),$e}function tD(n,e,t){let i=Ve();if(i.firstCreatePass){let r=In(n);Ml(t,i.data,i.blueprint,r,!0),Ml(e,i.data,i.blueprint,r,!1)}}function Ml(n,e,t,i,r){if(n=Ye(n),Array.isArray(n))for(let o=0;o<n.length;o++)Ml(n[o],e,t,i,r);else{let o=Ve(),s=de(),a=it(),c=xi(n)?n:Ye(n.provide),l=Nh(n),d=a.providerIndexes&1048575,p=a.directiveStart,C=a.providerIndexes>>20;if(xi(n)||!n.multi){let v=new Gn(l,r,T),E=Lc(c,e,r?d:d+C,p);E===-1?(Jc(fs(a,s),o,c),Fc(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[E]=v,s[E]=v)}else{let v=Lc(c,e,d+C,p),E=Lc(c,e,d,d+C),L=v>=0&&t[v],X=E>=0&&t[E];if(r&&!X||!r&&!L){Jc(fs(a,s),o,c);let ie=rD(r?iD:nD,t.length,r,i,l);!r&&X&&(t[E].providerFactory=ie),Fc(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(ie),s.push(ie)}else{let ie=Em(t[r?E:v],l,!r&&i);Fc(o,n,v>-1?v:E,ie)}!r&&i&&X&&t[E].componentProviders++}}}function Fc(n,e,t,i){let r=xi(e),o=Z0(e);if(r||o){let c=(o?Ye(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[i,c]):l[d+1].push(i,c)}else l.push(t,c)}}}function Em(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Lc(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function nD(n,e,t,i){return xl(this.multi,[])}function iD(n,e,t,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=qn(t,t[ee],this.providerFactory.index,i);o=a.slice(0,s),xl(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],xl(r,o);return o}function xl(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function rD(n,e,t,i,r){let o=new Gn(n,t,T);return o.multi=[],o.index=e,o.componentProviders=0,Em(o,r,i&&!t),o}function zt(n,e=[]){return t=>{t.providersResolver=(i,r)=>tD(i,r?r(n):n,e)}}var oD=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=Ph(!1,t.type),r=i.length>0?mu([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=O({token:n,providedIn:"environment",factory:()=>new n(M(nt))})}}return n})();function H(n){Ar("NgStandalone"),n.getStandaloneInjector=e=>e.get(oD).getOrCreateStandaloneInjector(n)}function sD(n,e){let t=n[e];return t===ft?void 0:t}function aD(n,e,t,i,r,o,s){let a=e+t;return gu(n,a,r,o)?hS(n,a+2,s?i.call(s,r,o):i(r,o)):sD(n,a+2)}function Mm(n,e){let t=Ve(),i,r=n+At;t.firstCreatePass?(i=cD(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=Bn(i.type,!0)),s,a=et(T);try{let c=ds(!1),l=o();return ds(c),XS(t,de(),r,l),l}finally{et(a)}}function cD(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function xm(n,e,t,i){let r=n+At,o=de(),s=zh(o,r);return lD(o,r)?aD(o,_y(),e,s.transform,t,i,s):s.transform(t,i)}function lD(n,e){return n[ee].data[e].pure}function bu(n,e){return js(n,e)}var $s=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Tm=new z("");function ti(n){return!!n&&typeof n.then=="function"}function Om(n){return!!n&&typeof n.subscribe=="function"}var Pm=new z(""),Am=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=k(Pm,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=r();if(ti(o))t.push(o);else if(Om(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Su=new z("");function uD(){Zd(()=>{throw new V(600,!1)})}function dD(n){return n.isBoundToModule}var fD=10;function hD(n,e,t){try{let i=t();return ti(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var dn=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(eC),this.afterRenderManager=k(bS),this.zonelessEnabled=k(Hs),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new _e,this.afterTick=new _e,this.componentTypes=[],this.components=[],this.isStable=k(Li).hasPendingTasks.pipe(ae(t=>!t)),this._injector=k(nt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,i){let r=t instanceof ys;if(!this._injector.get(Am).done){let C=!r&&Mh(t),v=!1;throw new V(405,v)}let s;r?s=t:s=this._injector.get(Ai).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=dD(s)?void 0:this._injector.get(En),c=i||s.selector,l=s.create(vt.NULL,[],c,a),d=l.location.nativeElement,p=l.injector.get(Tm,null);return p?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Jo(this.components,l),p?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new V(101,!1);let t=ue(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,ue(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ki,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<fD;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:o}of this._views)pD(r,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ps(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Jo(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let i=this._injector.get(Su,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Jo(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new V(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Jo(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function pD(n,e,t,i){if(!t&&!Ps(n))return;am(n,e,t&&!i?0:1)}var Tl=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Du=(()=>{class n{compileModuleSync(t){return new _l(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=xh(t),o=Ap(r.declarations).reduce((s,a)=>{let c=wn(a);return c&&s.push(new Ni(c)),s},[]);return new Tl(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var mD=(()=>{class n{constructor(){this.zone=k(Ee),this.changeDetectionScheduler=k(Pi),this.applicationRef=k(dn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gD=new z("",{factory:()=>!1});function km({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ee(_(g({},Rm()),{scheduleInRootZone:t})),[{provide:Ee,useFactory:n},{provide:Mi,multi:!0,useFactory:()=>{let i=k(mD,{optional:!0});return()=>i.initialize()}},{provide:Mi,multi:!0,useFactory:()=>{let i=k(vD);return()=>{i.initialize()}}},e===!0?{provide:dm,useValue:!0}:[],{provide:fm,useValue:t??yp}]}function Nm(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,i=km({ngZoneFactory:()=>{let r=Rm(n);return r.scheduleInRootZone=t,r.shouldCoalesceEventChangeDetection&&Ar("NgZone_CoalesceEvent"),new Ee(r)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Es([{provide:gD,useValue:!0},{provide:Hs,useValue:!1},i])}function Rm(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var vD=(()=>{class n{constructor(){this.subscription=new ge,this.initialized=!1,this.zone=k(Ee),this.pendingTasks=k(Li)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ee.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var yD=(()=>{class n{constructor(){this.appRef=k(dn),this.taskService=k(Li),this.ngZone=k(Ee),this.zonelessEnabled=k(Hs),this.disableScheduling=k(dm,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ge,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ps):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(fm,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof il||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?Bf:bp;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ps+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Bf(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function CD(){return typeof $localize<"u"&&$localize.locale||Ds}var zs=new z("",{providedIn:"root",factory:()=>k(zs,oe.Optional|oe.SkipSelf)||CD()});var Ol=new z("");function qo(n){return!n.moduleRef}function bD(n){let e=qo(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ee);return t.run(()=>{qo(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(nn,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{i.handleError(o)}})}),qo(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Ol);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Ol);s.add(o),n.moduleRef.onDestroy(()=>{Jo(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return hD(i,t,()=>{let o=e.get(Am);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(zs,Ds);if(ZS(s||Ds),qo(n)){let a=e.get(dn);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return SD(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function SD(n,e){let t=n.injector.get(dn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new V(-403,!1);e.push(n)}var Xo=null,Fm=new z("");function DD(n=[],e){return vt.create({name:e,providers:[{provide:Ms,useValue:"platform"},{provide:Ol,useValue:new Set([()=>Xo=null])},...n]})}function _D(n=[]){if(Xo)return Xo;let e=DD(n);return e.get(Fm,!1)||(Xo=e),uD(),wD(e),e}function wD(n){n.get(tu,null)?.forEach(t=>t())}var ni=(()=>{class n{static{this.__NG_ELEMENT_ID__=ID}}return n})();function ID(n){return ED(it(),de(),(n&16)===16)}function ED(n,e,t){if(Os(n)&&!t){let i=Mn(n.index,e);return new Qn(i,i)}else if(n.type&175){let i=e[Ut];return new Qn(i,e)}return null}var Pl=class{constructor(){}supports(e){return vm(e)}create(e){return new Al(e)}},MD=(n,e)=>e,Al=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||MD}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let s=!i||t&&t.currentIndex<sh(i,r,o)?t:i,a=sh(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,s.previousIndex==null)r++;else{o||(o=[]);let l=a-r,d=c-r;if(l!=d){for(let C=0;C<l;C++){let v=C<o.length?o[C]:o[C]=0,E=v+C;d<=E&&E<l&&(o[C]=v+1)}let p=s.previousIndex;o[p]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!vm(e))throw new V(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),i=!0):(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,dS(e,a=>{s=this._trackByFn(r,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new kl(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new _s),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new _s),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},kl=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Nl=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},_s=class{constructor(){this.map=new Map}put(e){let t=e.trackById,i=this.map.get(t);i||(i=new Nl,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function sh(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function ah(){return new _u([new Pl])}var _u=(()=>{class n{static{this.\u0275prov=O({token:n,providedIn:"root",factory:ah})}constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||ah()),deps:[[n,new yh,new Ll]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new V(901,!1)}}return n})();function Lm(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;try{let o=r?.injector??_D(i);if(o.get(Fm,!1)===!0&&!n.platformRef)throw new V(401,!1);let s=[km({}),{provide:Pi,useExisting:yD},...t||[]],a=new bs({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return bD({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}}function Ws(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Gs(n,e){Ar("NgSignals");let t=qd(n);return e?.equal&&(t[Kt].equal=e.equal),t}function On(n){let e=ue(null);try{return n()}finally{ue(e)}}function Vm(n,e){let t=wn(n),i=e.elementInjector||xs();return new Ni(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}var Wm=null;function hn(){return Wm}function Gm(n){Wm??=n}var qs=class{};var St=new z(""),qm=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:()=>k(OD),providedIn:"platform"})}}return n})();var OD=(()=>{class n extends qm{constructor(){super(),this._doc=k(St),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return hn().getBaseHref(this._doc)}onPopState(t){let i=hn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=hn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Ym(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function jm(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function ii(n){return n&&n[0]!=="?"?"?"+n:n}var Zs=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:()=>k(Qm),providedIn:"root"})}}return n})(),PD=new z(""),Qm=(()=>{class n extends Zs{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??k(St).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ym(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+ii(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+ii(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+ii(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(M(qm),M(PD,8))}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Rr=(()=>{class n{constructor(t){this._subject=new G,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=ND(jm(Hm(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ii(i))}normalize(t){return n.stripTrailingSlash(kD(this._basePath,Hm(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ii(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ii(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static{this.normalizeQueryParams=ii}static{this.joinWithSlash=Ym}static{this.stripTrailingSlash=jm}static{this.\u0275fac=function(i){return new(i||n)(M(Zs))}}static{this.\u0275prov=O({token:n,factory:()=>AD(),providedIn:"root"})}}return n})();function AD(){return new Rr(M(Zs))}function kD(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Hm(n){return n.replace(/\/index.html$/,"")}function ND(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Zm=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Zm||{});var fn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function kr(n,e){let t=vu(n),i=t[Bi.NumberSymbols][e];if(typeof i>"u"){if(e===fn.CurrencyDecimal)return t[Bi.NumberSymbols][fn.Decimal];if(e===fn.CurrencyGroup)return t[Bi.NumberSymbols][fn.Group]}return i}function RD(n,e){return vu(n)[Bi.NumberFormats][e]}var FD=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Bm=22,Ys=".",Nr="0",LD=";",VD=",",wu="#";function jD(n,e,t,i,r,o,s=!1){let a="",c=!1;if(!isFinite(n))a=kr(t,fn.Infinity);else{let l=$D(n);s&&(l=UD(l));let d=e.minInt,p=e.minFrac,C=e.maxFrac;if(o){let De=o.match(FD);if(De===null)throw new Error(`${o} is not a valid digit info`);let Fe=De[1],qe=De[3],Zt=De[5];Fe!=null&&(d=Iu(Fe)),qe!=null&&(p=Iu(qe)),Zt!=null?C=Iu(Zt):qe!=null&&p>C&&(C=p)}zD(l,p,C);let v=l.digits,E=l.integerLen,L=l.exponent,X=[];for(c=v.every(De=>!De);E<d;E++)v.unshift(0);for(;E<0;E++)v.unshift(0);E>0?X=v.splice(E,v.length):(X=v,v=[0]);let ie=[];for(v.length>=e.lgSize&&ie.unshift(v.splice(-e.lgSize,v.length).join(""));v.length>e.gSize;)ie.unshift(v.splice(-e.gSize,v.length).join(""));v.length&&ie.unshift(v.join("")),a=ie.join(kr(t,i)),X.length&&(a+=kr(t,r)+X.join("")),L&&(a+=kr(t,fn.Exponential)+"+"+L)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function HD(n,e,t){let i=RD(e,Zm.Decimal),r=BD(i,kr(e,fn.MinusSign));return jD(n,r,e,fn.Group,fn.Decimal,t)}function BD(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(LD),r=i[0],o=i[1],s=r.indexOf(Ys)!==-1?r.split(Ys):[r.substring(0,r.lastIndexOf(Nr)+1),r.substring(r.lastIndexOf(Nr)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(wu));for(let d=0;d<c.length;d++){let p=c.charAt(d);p===Nr?t.minFrac=t.maxFrac=d+1:p===wu?t.maxFrac=d+1:t.posSuf+=p}let l=a.split(VD);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let d=r.length-t.posPre.length-t.posSuf.length,p=o.indexOf(wu);t.negPre=o.substring(0,p).replace(/'/g,""),t.negSuf=o.slice(p+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function UD(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function $D(n){let e=Math.abs(n)+"",t=0,i,r,o,s,a;for((r=e.indexOf(Ys))>-1&&(e=e.replace(Ys,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===Nr;o++);if(o===(a=e.length))i=[0],r=1;else{for(a--;e.charAt(a)===Nr;)a--;for(r-=o,i=[],s=0;o<=a;o++,s++)i[s]=Number(e.charAt(o))}return r>Bm&&(i=i.splice(0,Bm-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function zD(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(e,r),t),s=o+n.integerLen,a=i[s];if(s>0){i.splice(Math.max(n.integerLen,s));for(let p=s;p<i.length;p++)i[p]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let p=1;p<s;p++)i[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let c=o!==0,l=e+n.integerLen,d=i.reduceRight(function(p,C,v,E){return C=C+p,E[v]=C<10?C:C-10,c&&(E[v]===0&&v>=l?E.pop():c=!1),C>=10?1:0},0);d&&(i.unshift(d),n.integerLen++)}function Iu(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Km(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var Eu=/\s+/,Um=[],Jm=(()=>{class n{constructor(t,i){this._ngEl=t,this._renderer=i,this.initialClasses=Um,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Eu):Um}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Eu):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(Eu).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)(T(dt),T(un))}}static{this.\u0275dir=Se({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Mu=class{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ne=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new Mu(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),$m(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);$m(o,r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(T(xn),T(Zn),T(_u))}}static{this.\u0275dir=Se({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function $m(n,e){n.context.$implicit=e.item}var ye=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new xu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zm("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zm("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(T(xn),T(Zn))}}static{this.\u0275dir=Se({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),xu=class{constructor(){this.$implicit=null,this.ngIf=null}};function zm(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Qe(e)}'.`)}function WD(n,e){return new V(2100,!1)}var Xm=(()=>{class n{constructor(t){this._locale=t}transform(t,i,r){if(!GD(t))return null;r||=this._locale;try{let o=qD(t);return HD(o,r,i)}catch(o){throw WD(n,o.message)}}static{this.\u0275fac=function(i){return new(i||n)(T(zs,16))}}static{this.\u0275pipe=wh({name:"number",type:n,pure:!0,standalone:!0})}}return n})();function GD(n){return!(n==null||n===""||n!==n)}function qD(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var U=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Xn({type:n})}static{this.\u0275inj=Jn({})}}return n})(),eg="browser",YD="server";function Ou(n){return n===YD}var Qs=class{};var ku=class extends qs{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Nu=class n extends ku{static makeCurrent(){Gm(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=QD();return t==null?null:ZD(t)}resetBaseElement(){Fr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Km(document.cookie,e)}},Fr=null;function QD(){return Fr=Fr||document.querySelector("base"),Fr?Fr.getAttribute("href"):null}function ZD(n){return new URL(n,document.baseURI).pathname}var KD=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac})}}return n})(),Ru=new z(""),rg=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new V(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(M(Ru),M(Ee))}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac})}}return n})(),Ks=class{constructor(e){this._doc=e}},Pu="ng-app-id",og=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ou(o),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Pu}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(Pu),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(Pu,this.appId),t.appendChild(s),s}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(M(St),M(eu),M(nu,8),M(ji))}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac})}}return n})(),Au={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Lu=/%COMP%/g,sg="%COMP%",JD=`_nghost-${sg}`,XD=`_ngcontent-${sg}`,e_=!0,t_=new z("",{providedIn:"root",factory:()=>e_});function n_(n){return XD.replace(Lu,n)}function i_(n){return JD.replace(Lu,n)}function ag(n,e){return e.map(t=>t.replace(Lu,n))}var tg=(()=>{class n{constructor(t,i,r,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ou(a),this.defaultRenderer=new Lr(t,s,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ht.ShadowDom&&(i=_(g({},i),{encapsulation:Ht.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof Js?r.applyToHost(t):r instanceof Vr&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Ht.Emulated:o=new Js(c,l,i,this.appId,d,s,a,p);break;case Ht.ShadowDom:return new Fu(c,l,t,i,s,a,this.nonce,p);default:o=new Vr(c,l,i,d,s,a,p);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(M(rg),M(og),M(eu),M(t_),M(St),M(ji),M(Ee),M(nu))}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac})}}return n})(),Lr=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Au[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ng(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(ng(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new V(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=Au[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Au[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(rn.DashCase|rn.Important)?e.style.setProperty(t,i,r&rn.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&rn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=hn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function ng(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Fu=class extends Lr{constructor(e,t,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=ag(r.id,r.styles);for(let d of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=d,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Vr=class extends Lr{constructor(e,t,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?ag(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Js=class extends Vr{constructor(e,t,i,r,o,s,a,c){let l=r+"-"+i.id;super(e,t,i,o,s,a,c,l),this.contentAttr=n_(l),this.hostAttr=i_(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},r_=(()=>{class n extends Ks{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(M(St))}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac})}}return n})(),ig=["alt","control","meta","shift"],o_={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},s_={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},a_=(()=>{class n extends Ks{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>hn().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),ig.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),s+=l+".")}),s+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let r=o_[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),ig.forEach(s=>{if(s!==r){let a=s_[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(M(St))}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac})}}return n})();function cg(n,e,t){return Lm(g({rootComponent:n,platformRef:t?.platformRef},c_(e)))}function c_(n){return{appProviders:[...h_,...n?.providers??[]],platformProviders:f_}}function l_(){Nu.makeCurrent()}function u_(){return new nn}function d_(){return Mp(document),document}var f_=[{provide:ji,useValue:eg},{provide:tu,useValue:l_,multi:!0},{provide:St,useFactory:d_,deps:[]}];var h_=[{provide:Ms,useValue:"root"},{provide:nn,useFactory:u_,deps:[]},{provide:Ru,useClass:r_,multi:!0,deps:[St,Ee,ji]},{provide:Ru,useClass:a_,multi:!0,deps:[St]},tg,og,rg,{provide:ki,useExisting:tg},{provide:Qs,useClass:KD,deps:[]},[]];var lg=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(M(St))}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ne="primary",to=Symbol("RouteTitle"),Uu=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function qi(n){return new Uu(n)}function m_(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function g_(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wt(n[t],e[t]))return!1;return!0}function Wt(n,e){let t=n?$u(n):void 0,i=e?$u(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!vg(n[r],e[r]))return!1;return!0}function $u(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function vg(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function yg(n){return n.length>0?n[n.length-1]:null}function Pn(n){return vc(n)?n:ti(n)?we(Promise.resolve(n)):J(n)}var v_={exact:bg,subset:Sg},Cg={exact:y_,subset:C_,ignored:()=>!0};function ug(n,e,t){return v_[t.paths](n.root,e.root,t.matrixParams)&&Cg[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function y_(n,e){return Wt(n,e)}function bg(n,e,t){if(!oi(n.segments,e.segments)||!ta(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!bg(n.children[i],e.children[i],t))return!1;return!0}function C_(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vg(n[t],e[t]))}function Sg(n,e,t){return Dg(n,e,e.segments,t)}function Dg(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!oi(r,t)||e.hasChildren()||!ta(r,t,i))}else if(n.segments.length===t.length){if(!oi(n.segments,t)||!ta(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!Sg(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!oi(n.segments,r)||!ta(n.segments,r,i)||!n.children[ne]?!1:Dg(n.children[ne],e,o,i)}}function ta(n,e,t){return e.every((i,r)=>Cg[t](n[r].parameters,i.parameters))}var mn=class{constructor(e=new pe([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=qi(this.queryParams),this._queryParamMap}toString(){return D_.serialize(this)}},pe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return na(this)}},ri=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=qi(this.parameters),this._parameterMap}toString(){return wg(this)}};function b_(n,e){return oi(n,e)&&n.every((t,i)=>Wt(t.parameters,e[i].parameters))}function oi(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function S_(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ne&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ne&&(t=t.concat(e(r,i)))}),t}var md=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:()=>new Wr,providedIn:"root"})}}return n})(),Wr=class{parse(e){let t=new Wu(e);return new mn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${jr(e.root,!0)}`,i=I_(e.queryParams),r=typeof e.fragment=="string"?`#${__(e.fragment)}`:"";return`${t}${i}${r}`}},D_=new Wr;function na(n){return n.segments.map(e=>wg(e)).join("/")}function jr(n,e){if(!n.hasChildren())return na(n);if(e){let t=n.children[ne]?jr(n.children[ne],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==ne&&i.push(`${r}:${jr(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=S_(n,(i,r)=>r===ne?[jr(n.children[ne],!1)]:[`${r}:${jr(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[ne]!=null?`${na(n)}/${t[0]}`:`${na(n)}/(${t.join("//")})`}}function _g(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xs(n){return _g(n).replace(/%3B/gi,";")}function __(n){return encodeURI(n)}function zu(n){return _g(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ia(n){return decodeURIComponent(n)}function dg(n){return ia(n.replace(/\+/g,"%20"))}function wg(n){return`${zu(n.path)}${w_(n.parameters)}`}function w_(n){return Object.entries(n).map(([e,t])=>`;${zu(e)}=${zu(t)}`).join("")}function I_(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Xs(t)}=${Xs(r)}`).join("&"):`${Xs(t)}=${Xs(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var E_=/^[^\/()?;#]+/;function Vu(n){let e=n.match(E_);return e?e[0]:""}var M_=/^[^\/()?;=#]+/;function x_(n){let e=n.match(M_);return e?e[0]:""}var T_=/^[^=?&#]+/;function O_(n){let e=n.match(T_);return e?e[0]:""}var P_=/^[^&#]+/;function A_(n){let e=n.match(P_);return e?e[0]:""}var Wu=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ne]=new pe(e,t)),i}parseSegment(){let e=Vu(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new ri(ia(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=x_(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Vu(this.remaining);r&&(i=r,this.capture(i))}e[ia(t)]=ia(i)}parseQueryParam(e){let t=O_(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=A_(this.remaining);s&&(i=s,this.capture(i))}let r=dg(t),o=dg(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Vu(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new V(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ne);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ne]:new pe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function Ig(n){return n.segments.length>0?new pe([],{[ne]:n}):n}function Eg(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=Eg(r);if(i===ne&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new pe(n.segments,e);return k_(t)}function k_(n){if(n.numberOfChildren===1&&n.children[ne]){let e=n.children[ne];return new pe(n.segments.concat(e.segments),e.children)}return n}function Gr(n){return n instanceof mn}function N_(n,e,t=null,i=null){let r=Mg(n);return xg(r,e,t,i)}function Mg(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new pe(o.url,s);return o===n&&(e=a),a}let i=t(n.root),r=Ig(i);return e??r}function xg(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return ju(r,r,r,t,i);let o=R_(e);if(o.toRoot())return ju(r,r,new pe([],{}),t,i);let s=F_(o,r,n),a=s.processChildren?Ur(s.segmentGroup,s.index,o.commands):Og(s.segmentGroup,s.index,o.commands);return ju(r,s.segmentGroup,a,t,i)}function ra(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function qr(n){return typeof n=="object"&&n!=null&&n.outlets}function ju(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=Tg(n,e,t);let a=Ig(Eg(s));return new mn(a,o,r)}function Tg(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=Tg(o,e,t)}),new pe(n.segments,i)}var oa=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&ra(i[0]))throw new V(4003,!1);let r=i.find(qr);if(r&&r!==yg(i))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function R_(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new oa(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new oa(t,e,i)}var zi=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function F_(n,e,t){if(n.isAbsolute)return new zi(e,!0,0);if(!t)return new zi(e,!1,NaN);if(t.parent===null)return new zi(t,!0,0);let i=ra(n.commands[0])?0:1,r=t.segments.length-1+i;return L_(t,r,n.numberOfDoubleDots)}function L_(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new V(4005,!1);r=i.segments.length}return new zi(i,!1,r-o)}function V_(n){return qr(n[0])?n[0].outlets:{[ne]:n}}function Og(n,e,t){if(n??=new pe([],{}),n.segments.length===0&&n.hasChildren())return Ur(n,e,t);let i=j_(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new pe(n.segments.slice(0,i.pathIndex),{});return o.children[ne]=new pe(n.segments.slice(i.pathIndex),n.children),Ur(o,0,r)}else return i.match&&r.length===0?new pe(n.segments,{}):i.match&&!n.hasChildren()?Gu(n,e,t):i.match?Ur(n,0,r):Gu(n,e,t)}function Ur(n,e,t){if(t.length===0)return new pe(n.segments,{});{let i=V_(t),r={};if(Object.keys(i).some(o=>o!==ne)&&n.children[ne]&&n.numberOfChildren===1&&n.children[ne].segments.length===0){let o=Ur(n.children[ne],e,t);return new pe(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=Og(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new pe(n.segments,r)}}function j_(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],a=t[i];if(qr(a))break;let c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!hg(c,l,s))return o;i+=2}else{if(!hg(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Gu(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(qr(o)){let c=H_(o.outlets);return new pe(i,c)}if(r===0&&ra(t[0])){let c=n.segments[e];i.push(new ri(c.path,fg(t[0]))),r++;continue}let s=qr(o)?o.outlets[ne]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&ra(a)?(i.push(new ri(s,fg(a))),r+=2):(i.push(new ri(s,{})),r++)}return new pe(i,{})}function H_(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Gu(new pe([],{}),0,i))}),e}function fg(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function hg(n,e,t){return n==t.path&&Wt(e,t.parameters)}var $r="imperative",He=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(He||{}),Dt=class{constructor(e,t){this.id=e,this.url=t}},Yr=class extends Dt{constructor(e,t,i="imperative",r=null){super(e,t),this.type=He.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},si=class extends Dt{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=He.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},mt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(mt||{}),qu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(qu||{}),pn=class extends Dt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=He.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ai=class extends Dt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=He.NavigationSkipped}},Qr=class extends Dt{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=He.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},sa=class extends Dt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=He.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yu=class extends Dt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=He.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qu=class extends Dt{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=He.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zu=class extends Dt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=He.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ku=class extends Dt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=He.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ju=class{constructor(e){this.route=e,this.type=He.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xu=class{constructor(e){this.route=e,this.type=He.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ed=class{constructor(e){this.snapshot=e,this.type=He.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},td=class{constructor(e){this.snapshot=e,this.type=He.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nd=class{constructor(e){this.snapshot=e,this.type=He.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},id=class{constructor(e){this.snapshot=e,this.type=He.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Zr=class{},Yi=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function B_(n,e){return n.providers&&!n._injector&&(n._injector=mu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Nt(n){return n.outlet||ne}function U_(n,e){let t=n.filter(i=>Nt(i)===e);return t.push(...n.filter(i=>Nt(i)!==e)),t}function no(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var rd=class{get injector(){return no(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ha(this.rootInjector),this.attachRef=null}},ha=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new rd(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(M(nt))}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),aa=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=od(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=od(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=sd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return sd(e,this._root).map(t=>t.value)}};function od(n,e){if(n===e.value)return e;for(let t of e.children){let i=od(n,t);if(i)return i}return null}function sd(n,e){if(n===e.value)return[e];for(let t of e.children){let i=sd(n,t);if(i.length)return i.unshift(e),i}return[]}var pt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function $i(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ca=class extends aa{constructor(e,t){super(e),this.snapshot=t,gd(this,e)}toString(){return this.snapshot.toString()}};function Pg(n){let e=$_(n),t=new se([new ri("",{})]),i=new se({}),r=new se({}),o=new se({}),s=new se(""),a=new Qi(t,i,o,s,r,ne,n,e.root);return a.snapshot=e.root,new ca(new pt(a,[]),e)}function $_(n){let e={},t={},i={},r="",o=new Wi([],e,i,r,t,ne,n,null,{});return new ua("",new pt(o,[]))}var Qi=class{constructor(e,t,i,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ae(l=>l[to]))??J(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>qi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>qi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function la(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:g(g({},e.params),n.params),data:g(g({},e.data),n.data),resolve:g(g(g(g({},n.data),e.data),r?.data),n._resolvedData)}:i={params:g({},n.params),data:g({},n.data),resolve:g(g({},n.data),n._resolvedData??{})},r&&kg(r)&&(i.resolve[to]=r.title),i}var Wi=class{get title(){return this.data?.[to]}constructor(e,t,i,r,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ua=class extends aa{constructor(e,t){super(t),this.url=e,gd(this,t)}toString(){return Ag(this._root)}};function gd(n,e){e.value._routerState=n,e.children.forEach(t=>gd(n,t))}function Ag(n){let e=n.children.length>0?` { ${n.children.map(Ag).join(", ")} } `:"";return`${n.value}${e}`}function Hu(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Wt(e.params,t.params)||n.paramsSubject.next(t.params),g_(e.url,t.url)||n.urlSubject.next(t.url),Wt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ad(n,e){let t=Wt(n.params,e.params)&&b_(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||ad(n.parent,e.parent))}function kg(n){return typeof n.title=="string"||n.title===null}var z_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ne,this.activateEvents=new G,this.deactivateEvents=new G,this.attachEvents=new G,this.detachEvents=new G,this.parentContexts=k(ha),this.location=k(xn),this.changeDetector=k(ni),this.inputBinder=k(vd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new cd(t,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Se({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ei]})}}return n})(),cd=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Qi?this.route:e===ha?this.childContexts:this.parent.get(e,t)}},vd=new z("");function W_(n,e,t){let i=Kr(n,e._root,t?t._root:void 0);return new ca(i,e)}function Kr(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=G_(n,e,t);return new pt(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Kr(n,a)),s}}let i=q_(e.value),r=e.children.map(o=>Kr(n,o));return new pt(i,r)}}function G_(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Kr(n,i,r);return Kr(n,i)})}function q_(n){return new Qi(new se(n.url),new se(n.params),new se(n.queryParams),new se(n.fragment),new se(n.data),n.outlet,n.component,n)}var Jr=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Ng="ngNavigationCancelingError";function da(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Gr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Rg(!1,mt.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Rg(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Ng]=!0,t.cancellationCode=e,t}function Y_(n){return Fg(n)&&Gr(n.url)}function Fg(n){return!!n&&n[Ng]}var Q_=(n,e,t,i)=>ae(r=>(new ld(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),ld=class{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Hu(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=$i(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=$i(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=$i(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=$i(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new id(o.value.snapshot))}),e.children.length&&this.forwardEvent(new td(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(Hu(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Hu(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},fa=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Gi=class{constructor(e,t){this.component=e,this.route=t}};function Z_(n,e,t){let i=n._root,r=e?e._root:null;return Hr(i,r,t,[i.value])}function K_(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ki(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!dh(n)?n:e.get(n):i}function Hr(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=$i(e);return n.children.forEach(s=>{J_(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>zr(a,t.getContext(s),r)),r}function J_(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=X_(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new fa(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Hr(n,e,a?a.children:null,i,r):Hr(n,e,t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Gi(a.outlet.component,s))}else s&&zr(e,a,r),r.canActivateChecks.push(new fa(i)),o.component?Hr(n,null,a?a.children:null,i,r):Hr(n,null,t,i,r);return r}function X_(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!oi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!oi(n.url,e.url)||!Wt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ad(n,e)||!Wt(n.queryParams,e.queryParams);case"paramsChange":default:return!ad(n,e)}}function zr(n,e,t){let i=$i(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?zr(s,e.children.getContext(o),t):zr(s,null,t):zr(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Gi(e.outlet.component,r)):t.canDeactivateChecks.push(new Gi(null,r)):t.canDeactivateChecks.push(new Gi(null,r))}function io(n){return typeof n=="function"}function ew(n){return typeof n=="boolean"}function tw(n){return n&&io(n.canLoad)}function nw(n){return n&&io(n.canActivate)}function iw(n){return n&&io(n.canActivateChild)}function rw(n){return n&&io(n.canDeactivate)}function ow(n){return n&&io(n.canMatch)}function Lg(n){return n instanceof Jt||n?.name==="EmptyError"}var ea=Symbol("INITIAL_VALUE");function Zi(){return Mt(n=>Bo(n.map(e=>e.pipe(Xt(1),_c(ea)))).pipe(ae(e=>{for(let t of e)if(t!==!0){if(t===ea)return ea;if(t===!1||sw(t))return t}return!0}),Et(e=>e!==ea),Xt(1)))}function sw(n){return Gr(n)||n instanceof Jr}function aw(n,e){return Te(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?J(_(g({},t),{guardsResult:!0})):cw(s,i,r,n).pipe(Te(a=>a&&ew(a)?lw(i,o,n,e):J(a)),ae(a=>_(g({},t),{guardsResult:a})))})}function cw(n,e,t,i){return we(n).pipe(Te(r=>pw(r.component,r.route,t,e,i)),Lt(r=>r!==!0,!0))}function lw(n,e,t,i){return we(e).pipe(Ci(r=>yi(dw(r.route.parent,i),uw(r.route,i),hw(n,r.path,t),fw(n,r.route,t))),Lt(r=>r!==!0,!0))}function uw(n,e){return n!==null&&e&&e(new nd(n)),J(!0)}function dw(n,e){return n!==null&&e&&e(new ed(n)),J(!0)}function fw(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return J(!0);let r=i.map(o=>Uo(()=>{let s=no(e)??t,a=Ki(o,s),c=nw(a)?a.canActivate(e,n):sn(s,()=>a(e,n));return Pn(c).pipe(Lt())}));return J(r).pipe(Zi())}function hw(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>K_(s)).filter(s=>s!==null).map(s=>Uo(()=>{let a=s.guards.map(c=>{let l=no(s.node)??t,d=Ki(c,l),p=iw(d)?d.canActivateChild(i,n):sn(l,()=>d(i,n));return Pn(p).pipe(Lt())});return J(a).pipe(Zi())}));return J(o).pipe(Zi())}function pw(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let c=no(e)??r,l=Ki(a,c),d=rw(l)?l.canDeactivate(n,e,t,i):sn(c,()=>l(n,e,t,i));return Pn(d).pipe(Lt())});return J(s).pipe(Zi())}function mw(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return J(!0);let o=r.map(s=>{let a=Ki(s,n),c=tw(a)?a.canLoad(e,t):sn(n,()=>a(e,t));return Pn(c)});return J(o).pipe(Zi(),Vg(i))}function Vg(n){return hc(Le(e=>{if(typeof e!="boolean")throw da(n,e)}),ae(e=>e===!0))}function gw(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return J(!0);let o=r.map(s=>{let a=Ki(s,n),c=ow(a)?a.canMatch(e,t):sn(n,()=>a(e,t));return Pn(c)});return J(o).pipe(Zi(),Vg(i))}var Xr=class{constructor(e){this.segmentGroup=e||null}},eo=class extends Error{constructor(e){super(),this.urlTree=e}};function Ui(n){return vi(new Xr(n))}function vw(n){return vi(new V(4e3,!1))}function yw(n){return vi(Rg(!1,mt.GuardRejected))}var ud=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return J(i);if(r.numberOfChildren>1||!r.children[ne])return vw(`${e.redirectTo}`);r=r.children[ne]}}applyRedirectCommands(e,t,i,r,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:p,outlet:C,params:v,data:E,title:L}=r,X=sn(o,()=>a({params:v,data:E,queryParams:c,fragment:l,routeConfig:d,url:p,outlet:C,title:L}));if(X instanceof mn)throw new eo(X);t=X}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new eo(s);return s}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new mn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,i,r)}),new pe(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new V(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},dd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Cw(n,e,t,i,r){let o=jg(n,e,t);return o.matched?(i=B_(e,i),gw(i,e,t,r).pipe(ae(s=>s===!0?o:g({},dd)))):J(o)}function jg(n,e,t){if(e.path==="**")return bw(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?g({},dd):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||m_)(t,n,e);if(!r)return g({},dd);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?g(g({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function bw(n){return{matched:!0,parameters:n.length>0?yg(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function pg(n,e,t,i){return t.length>0&&_w(n,t,i)?{segmentGroup:new pe(e,Dw(i,new pe(t,n.children))),slicedSegments:[]}:t.length===0&&ww(n,t,i)?{segmentGroup:new pe(n.segments,Sw(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new pe(n.segments,n.children),slicedSegments:t}}function Sw(n,e,t,i){let r={};for(let o of t)if(pa(n,e,o)&&!i[Nt(o)]){let s=new pe([],{});r[Nt(o)]=s}return g(g({},i),r)}function Dw(n,e){let t={};t[ne]=e;for(let i of n)if(i.path===""&&Nt(i)!==ne){let r=new pe([],{});t[Nt(i)]=r}return t}function _w(n,e,t){return t.some(i=>pa(n,e,i)&&Nt(i)!==ne)}function ww(n,e,t){return t.some(i=>pa(n,e,i))}function pa(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Iw(n,e,t){return e.length===0&&!n.children[t]}var fd=class{};function Ew(n,e,t,i,r,o,s="emptyOnly"){return new hd(n,e,t,i,r,s,o).recognize()}var Mw=31,hd=class{constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ud(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}recognize(){let e=pg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:t,rootSnapshot:i})=>{let r=new pt(i,t),o=new ua("",r),s=N_(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Wi([],Object.freeze({}),Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ne,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ne,t).pipe(ae(i=>({children:i,rootSnapshot:t})),yn(i=>{if(i instanceof eo)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Xr?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(ae(s=>s instanceof pt?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return we(o).pipe(Ci(s=>{let a=i.children[s],c=U_(t,s);return this.processSegmentGroup(e,c,a,s,r)}),Dc((s,a)=>(s.push(...a),s)),Cn(null),Sc(),Te(s=>{if(s===null)return Ui(i);let a=Hg(s);return xw(a),J(a)}))}processSegment(e,t,i,r,o,s,a){return we(t).pipe(Ci(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,o,s,a).pipe(yn(l=>{if(l instanceof Xr)return J(null);throw l}))),Lt(c=>!!c),yn(c=>{if(Lg(c))return Iw(i,r,o)?J(new fd):Ui(i);throw c}))}processSegmentAgainstRoute(e,t,i,r,o,s,a,c){return Nt(i)!==s&&(s===ne||!pa(r,o,i))?Ui(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,c):Ui(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:p,remainingSegments:C}=jg(t,r,o);if(!c)return Ui(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Mw&&(this.allowRedirects=!1));let v=new Wi(o,l,Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,mg(r),Nt(r),r.component??r._loadedComponent??null,r,gg(r)),E=la(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(E.params),v.data=Object.freeze(E.data);let L=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(r,L).pipe(Te(X=>this.processSegment(e,i,t,X.concat(C),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a=Cw(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(Mt(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Mt(({routes:l})=>{let d=i._loadedInjector??e,{parameters:p,consumedSegments:C,remainingSegments:v}=c,E=new Wi(C,p,Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,mg(i),Nt(i),i.component??i._loadedComponent??null,i,gg(i)),L=la(E,s,this.paramsInheritanceStrategy);E.params=Object.freeze(L.params),E.data=Object.freeze(L.data);let{segmentGroup:X,slicedSegments:ie}=pg(t,C,v,l);if(ie.length===0&&X.hasChildren())return this.processChildren(d,l,X,E).pipe(ae(Fe=>new pt(E,Fe)));if(l.length===0&&ie.length===0)return J(new pt(E,[]));let De=Nt(i)===o;return this.processSegment(d,l,X,ie,De?ne:o,!0,E).pipe(ae(Fe=>new pt(E,Fe instanceof pt?[Fe]:[])))}))):Ui(t)))}getChildConfig(e,t,i){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):mw(e,t,i,this.urlSerializer).pipe(Te(r=>r?this.configLoader.loadChildren(e,t).pipe(Le(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):yw(t))):J({routes:[],injector:e})}};function xw(n){n.sort((e,t)=>e.value.outlet===ne?-1:t.value.outlet===ne?1:e.value.outlet.localeCompare(t.value.outlet))}function Tw(n){let e=n.value.routeConfig;return e&&e.path===""}function Hg(n){let e=[],t=new Set;for(let i of n){if(!Tw(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=Hg(i.children);e.push(new pt(i.value,r))}return e.filter(i=>!t.has(i))}function mg(n){return n.data||{}}function gg(n){return n.resolve||{}}function Ow(n,e,t,i,r,o){return Te(s=>Ew(n,e,t,i,s.extractedUrl,r,o).pipe(ae(({state:a,tree:c})=>_(g({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Pw(n,e){return Te(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return J(t);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of Bg(c))s.add(l);let a=0;return we(s).pipe(Ci(c=>o.has(c)?Aw(c,i,n,e):(c.data=la(c,c.parent,n).resolve,J(void 0))),Le(()=>a++),bi(1),Te(c=>a===s.size?J(t):lt))})}function Bg(n){let e=n.children.map(t=>Bg(t)).flat();return[n,...e]}function Aw(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!kg(r)&&(o[to]=r.title),kw(o,n,e,i).pipe(ae(s=>(n._resolvedData=s,n.data=la(n,n.parent,t).resolve,null)))}function kw(n,e,t,i){let r=$u(n);if(r.length===0)return J({});let o={};return we(r).pipe(Te(s=>Nw(n[s],e,t,i).pipe(Lt(),Le(a=>{if(a instanceof Jr)throw da(new Wr,a);o[s]=a}))),bi(1),bc(o),yn(s=>Lg(s)?lt:vi(s)))}function Nw(n,e,t,i){let r=no(e)??i,o=Ki(n,r),s=o.resolve?o.resolve(e,t):sn(r,()=>o(e,t));return Pn(s)}function Bu(n){return Mt(e=>{let t=n(e);return t?we(t).pipe(ae(()=>e)):J(e)})}var Ug=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===ne);return i}getResolvedTitleForRoute(t){return t.data[to]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:()=>k(Rw),providedIn:"root"})}}return n})(),Rw=(()=>{class n extends Ug{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(M(lg))}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yd=new z("",{providedIn:"root",factory:()=>({})}),Fw=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["ng-component"]],standalone:!0,features:[H],decls:1,vars:0,template:function(i,r){i&1&&A(0,"router-outlet")},dependencies:[z_],encapsulation:2})}}return n})();function Cd(n){let e=n.children&&n.children.map(Cd),t=e?_(g({},n),{children:e}):g({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ne&&(t.component=Fw),t}var bd=new z(""),Lw=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(Du)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Pn(t.loadComponent()).pipe(ae($g),Le(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),vr(()=>{this.componentLoaders.delete(t)})),r=new gi(i,()=>new _e).pipe(mi());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return J({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Vw(i,this.compiler,t,this.onLoadEndListener).pipe(vr(()=>{this.childrenLoaders.delete(i)})),s=new gi(o,()=>new _e).pipe(mi());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Vw(n,e,t,i){return Pn(n.loadChildren()).pipe(ae($g),Te(r=>r instanceof Er||Array.isArray(r)?J(r):we(e.compileModuleAsync(r))),ae(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(bd,[],{optional:!0,self:!0}).flat()),{routes:s.map(Cd),injector:o}}))}function jw(n){return n&&typeof n=="object"&&"default"in n}function $g(n){return jw(n)?n.default:n}var Sd=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:()=>k(Hw),providedIn:"root"})}}return n})(),Hw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Bw=new z("");var Uw=new z(""),$w=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new _e,this.transitionAbortSubject=new _e,this.configLoader=k(Lw),this.environmentInjector=k(nt),this.urlSerializer=k(md),this.rootContexts=k(ha),this.location=k(Rr),this.inputBindingEnabled=k(vd,{optional:!0})!==null,this.titleStrategy=k(Ug),this.options=k(yd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(Sd),this.createViewTransition=k(Bw,{optional:!0}),this.navigationErrorHandler=k(Uw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let t=r=>this.events.next(new Ju(r)),i=r=>this.events.next(new Xu(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(_(g(g({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new se({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:$r,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Et(o=>o.id!==0),ae(o=>_(g({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Mt(o=>{let s=!1,a=!1;return J(o).pipe(Mt(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",mt.SupersededByNewNavigation),lt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?_(g({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let p="";return this.events.next(new ai(c.id,this.urlSerializer.serialize(c.rawUrl),p,qu.IgnoredSameUrlNavigation)),c.resolve(!1),lt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return J(c).pipe(Mt(p=>{let C=this.transitions?.getValue();return this.events.next(new Yr(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),C!==this.transitions?.getValue()?lt:Promise.resolve(p)}),Ow(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Le(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=_(g({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let C=new sa(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(C)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:C,source:v,restoredState:E,extras:L}=c,X=new Yr(p,this.urlSerializer.serialize(C),v,E);this.events.next(X);let ie=Pg(this.rootComponentType).snapshot;return this.currentTransition=o=_(g({},c),{targetSnapshot:ie,urlAfterRedirects:C,extras:_(g({},L),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=C,J(o)}else{let p="";return this.events.next(new ai(c.id,this.urlSerializer.serialize(c.extractedUrl),p,qu.IgnoredByUrlHandlingStrategy)),c.resolve(!1),lt}}),Le(c=>{let l=new Yu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),ae(c=>(this.currentTransition=o=_(g({},c),{guards:Z_(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),aw(this.environmentInjector,c=>this.events.next(c)),Le(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw da(this.urlSerializer,c.guardsResult);let l=new Qu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Et(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",mt.GuardRejected),!1)),Bu(c=>{if(c.guards.canActivateChecks.length)return J(c).pipe(Le(l=>{let d=new Zu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Mt(l=>{let d=!1;return J(l).pipe(Pw(this.paramsInheritanceStrategy,this.environmentInjector),Le({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",mt.NoDataFromResolver)}}))}),Le(l=>{let d=new Ku(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Bu(c=>{let l=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(Le(C=>{d.component=C}),ae(()=>{})));for(let C of d.children)p.push(...l(C));return p};return Bo(l(c.targetSnapshot.root)).pipe(Cn(null),Xt(1))}),Bu(()=>this.afterPreactivation()),Mt(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?we(d).pipe(ae(()=>o)):J(o)}),ae(c=>{let l=W_(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=_(g({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Le(()=>{this.events.next(new Zr)}),Q_(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Xt(1),Le({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new si(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Vn(this.transitionAbortSubject.pipe(Le(c=>{throw c}))),vr(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",mt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),yn(c=>{if(a=!0,Fg(c))this.events.next(new pn(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Y_(c)?this.events.next(new Yi(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Qr(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=sn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Jr){let{message:p,cancellationCode:C}=da(this.urlSerializer,d);this.events.next(new pn(o.id,this.urlSerializer.serialize(o.extractedUrl),p,C)),this.events.next(new Yi(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return lt}))}))}cancelNavigationTransition(t,i,r){let o=new pn(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zw(n){return n!==$r}var Ww=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:()=>k(Gw),providedIn:"root"})}}return n})(),pd=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Gw=(()=>{class n extends pd{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=bt(n)))(r||n)}})()}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zg=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:()=>k(qw),providedIn:"root"})}}return n})(),qw=(()=>{class n extends zg{constructor(){super(...arguments),this.location=k(Rr),this.urlSerializer=k(md),this.options=k(yd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(Sd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new mn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Pg(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Yr)this.stateMemento=this.createStateMemento();else if(t instanceof ai)this.rawUrlTree=i.initialUrl;else if(t instanceof sa){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof Zr?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof pn&&(t.code===mt.GuardRejected||t.code===mt.NoDataFromResolver)?this.restoreHistory(i):t instanceof Qr?this.restoreHistory(i,!0):t instanceof si&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof mn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=g(g({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=g(g({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=bt(n)))(r||n)}})()}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Br=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Br||{});function Yw(n,e){n.events.pipe(Et(t=>t instanceof si||t instanceof pn||t instanceof Qr||t instanceof ai),ae(t=>t instanceof si||t instanceof ai?Br.COMPLETE:(t instanceof pn?t.code===mt.Redirect||t.code===mt.SupersededByNewNavigation:!1)?Br.REDIRECTING:Br.FAILED),Et(t=>t!==Br.REDIRECTING),Xt(1)).subscribe(()=>{e()})}function Qw(n){throw n}var Zw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Kw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Wg=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=k($s),this.stateManager=k(zg),this.options=k(yd,{optional:!0})||{},this.pendingTasks=k(Li),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k($w),this.urlSerializer=k(md),this.location=k(Rr),this.urlHandlingStrategy=k(Sd),this._events=new _e,this.errorHandler=this.options.errorHandler||Qw,this.navigated=!1,this.routeReuseStrategy=k(Ww),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(bd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(vd,{optional:!0}),this.eventsSubscription=new ge,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof pn&&i.code!==mt.Redirect&&i.code!==mt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof si)this.navigated=!0;else if(i instanceof Yi){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=g({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||zw(r.source)},s);this.scheduleNavigation(a,$r,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Xw(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$r,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let c=g({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Cd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=g(g({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let C=r?r.snapshot:this.routerState.snapshot.root;p=Mg(C)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return xg(p,t,d,l??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Gr(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,$r,null,i)}navigate(t,i={skipLocationChange:!1}){return Jw(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=g({},Zw):i===!1?r=g({},Kw):r=i,Gr(t))return ug(this.currentUrlTree,t,r);let o=this.parseUrl(t);return ug(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,C)=>{a=p,c=C});let d=this.pendingTasks.add();return Yw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Jw(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new V(4008,!1)}function Xw(n){return!(n instanceof Zr)&&!(n instanceof Yi)}var eI=new z("");function Gg(n,...e){return Es([{provide:bd,multi:!0,useValue:n},[],{provide:Qi,useFactory:tI,deps:[Wg]},{provide:Su,multi:!0,useFactory:nI},e.map(t=>t.\u0275providers)])}function tI(n){return n.routerState.root}function nI(){let n=k(vt);return e=>{let t=n.get(dn);if(e!==t.components[0])return;let i=n.get(Wg),r=n.get(iI);n.get(rI)===1&&i.initialNavigation(),n.get(oI,null,oe.Optional)?.setUpPreloading(),n.get(eI,null,oe.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var iI=new z("",{factory:()=>new _e}),rI=new z("",{providedIn:"root",factory:()=>1});var oI=new z("");var qg=[];var Yg={providers:[Nm({eventCoalescing:!0}),Gg(qg)]};var x={logo:{logoHorizonDark:"assets/images/logo/logo-horizon-dark-mode.png",logoHorizonLight:"assets/images/logo/logo-horizon-light-mode.png",logoSquareDark:"assets/images/logo/logo-square-dark-mode.png",logoSquareLight:"assets/images/logo/logo-square-light-mode.png",logoSmallDark:"assets/images/logo/logo-small-dark-mode.png",logoSmallLight:"assets/images/logo/logo-small-light-mode.png"},character:{egg:{bad:"assets/images/character/egg-bad.png",normal:"assets/images/character/egg-normal.png",special:"assets/images/character/egg-special.png",superSpecial:"assets/images/character/egg-super-special.png"},child:{child:"assets/images/character/child-normal.png",childAngry:"assets/images/character/child-angry.png",childHappy:"assets/images/character/child-happy.png"},evolution:{mud:"assets/images/character/evolution-mud.png",poison:"assets/images/character/evolution-poison.png",burned:"assets/images/character/evolution-burned.png",limbs:"assets/images/character/evolution-limbs.png",strong:"assets/images/character/evolution-strong.png",smooth:"assets/images/character/evolution-smooth.png",carrot:"assets/images/character/evolution-carrot.png",rainbow:"assets/images/character/evolution-rainbow.png",glass:"assets/images/character/evolution-glass.png",cute:"assets/images/character/evolution-cute.png",monster:"assets/images/character/evolution-monster.png",cat:"assets/images/character/evolution-cat.png",fox:"assets/images/character/evolution-fox.png",goose:"assets/images/character/evolution-goose.png"},cooked:{mud:"assets/images/character/cooked-mud.png",poison:"assets/images/character/cooked-poison.png",burned:"assets/images/character/cooked-burned.png",limbs:"assets/images/character/cooked-limbs.png",strong:"assets/images/character/cooked-strong.png",smooth:"assets/images/character/cooked-smooth.png",carrot:"assets/images/character/cooked-carrot.png",rainbow:"assets/images/character/cooked-rainbow.png",glass:"assets/images/character/cooked-glass.png",cute:"assets/images/character/cooked-cute.png",monster:"assets/images/character/cooked-monster.png",cat:"assets/images/character/cooked-cat.png",fox:"assets/images/character/cooked-fox.png",goose:"assets/images/character/cooked-goose.png"},dead:{dead:"assets/images/character/dead.png"},others:{isFreezing:"assets/images/character/is-freezing.png",unlocked:"assets/images/character/unlocked.png"}},store:{food:{worm:"assets/images/store/worm.png",rice:"assets/images/store/rice.png",chicken:"assets/images/store/chicken.png",candy:"assets/images/store/candy.png",fish:"assets/images/store/fish.png",dogFood:"assets/images/store/dog-food.png",icecream:"assets/images/store/icecream.png"},health:{pill:"assets/images/store/pill.png",ginseng:"assets/images/store/ginseng.png",chineseMedicine:"assets/images/store/chinese-medicine.png",pillForHeadache:"assets/images/store/pill-for-headache.png",pillForDiarrhea:"assets/images/store/pill-for-diarrhea.png",pillForGastricUlcer:"assets/images/store/pill-for-gastric-ulcer.png",pillForFlu:"assets/images/store/pill-for-flu.png",rebornPill:"assets/images/store/reborn-pill.png",freezePill:"assets/images/store/freeze-pill.png"},gifts:{doll:"assets/images/store/doll.png",cellphone:"assets/images/store/cellphone.png"},decorations:{star:"assets/images/store/star.png"}},scene:{roomDayLightOn:"assets/images/scene/room-day-light-on.jpg",roomDayLightOff:"assets/images/scene/room-day-light-off.jpg",roomNightLightOn:"assets/images/scene/room-night-light-on.jpg",roomNightLightOff:"assets/images/scene/room-night-light-off.jpg"},bed:{bedEmptyLight:"assets/images/bed/bed-empty-light.png",bedIsSleepingLight:"assets/images/bed/bed-is-sleeping-light.png",bedEmptyDark:"assets/images/bed/bed-empty-dark.png",bedIsSleepingDark:"assets/images/bed/bed-is-sleeping-dark.png"},otherIcons:{coin:"assets/images/other-icons/coin.png",store:"assets/images/other-icons/store.png",lamp:"assets/images/other-icons/lamp.png",dirty01:"assets/images/other-icons/dirty01.png",dirty02:"assets/images/other-icons/dirty02.png",dirty03:"assets/images/other-icons/dirty03.png",collection:"assets/images/other-icons/collection.png",feed:"assets/images/other-icons/feed.png",sleep:"assets/images/other-icons/sleep.png",cooked:"assets/images/other-icons/cooked.png"},moodStatus:{isSleeping:"assets/images/mood-status/is-sleeping.png",loving:"assets/images/mood-status/loving.png",angry:"assets/images/mood-status/loving.png",sad:"assets/images/mood-status/loving.png"}};var rt=class n{fadeInSubject=new se(!1);fadeOutSubject=new se(!1);sceneReadyCallback=null;tempCallback=null;fadeIn$=this.fadeInSubject.asObservable();fadeOut$=this.fadeOutSubject.asObservable();fadeIn(){this.fadeInSubject.next(!0)}fadeOut(){this.fadeOutSubject.next(!0)}reset(){this.fadeInSubject.next(!1),this.fadeOutSubject.next(!1),this.tempCallback=null}onWhiteReady(e){this.sceneReadyCallback=e}setOneTimeCallback(e){this.tempCallback=e}triggerScenePreparation(){this.tempCallback?(this.tempCallback(),this.tempCallback=null):this.sceneReadyCallback&&this.sceneReadyCallback()}onSceneReady(){this.fadeOut()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var ma=class n{constructor(e){this.whiteTransitionService=e}logoSrc="";fadeOut=!1;backgroundImage="url('assets/images/scene/welcome-bg.png')";ngOnInit(){this.setLogoBasedOnBackground()}ngOnDestroy(){}setLogoBasedOnBackground(){this.logoSrc=x.logo.logoSquareDark}static \u0275fac=function(t){return new(t||n)(T(rt))};static \u0275cmp=j({type:n,selectors:[["app-welcome"]],standalone:!0,features:[H],decls:7,vars:7,consts:[[1,"welcome-overlay"],[1,"background-animation"],[1,"content-container"],[1,"logo-container"],["alt","Achick Logo",1,"logo",3,"src"],[1,"start-button",3,"click"]],template:function(t,i){t&1&&(u(0,"div",0),A(1,"div",1),u(2,"div",2)(3,"div",3),A(4,"img",4),f(),u(5,"button",5),b("click",function(){return i.whiteTransitionService.fadeIn()}),m(6,"START!"),f()()()),t&2&&(F("fade-out",i.fadeOut),h(),je("background-image",i.backgroundImage),h(),F("fade-content",i.fadeOut),h(2),y("src",i.logoSrc,$))},dependencies:[U],styles:[".welcome-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;z-index:9999;cursor:pointer;overflow:hidden;transition:opacity .5s ease}.welcome-overlay.fade-out[_ngcontent-%COMP%]{opacity:0;pointer-events:none}.background-animation[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100vw;height:100vh;background-size:1920px 100dvh;background-repeat:repeat-x;animation:_ngcontent-%COMP%_scrollRight 15s linear infinite;z-index:1}@keyframes _ngcontent-%COMP%_scrollRight{0%{background-position:-1920px 0}to{background-position:0 0}}.content-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:2;gap:40px;transition:opacity .3s ease}.content-container.fade-content[_ngcontent-%COMP%]{opacity:0}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.logo[_ngcontent-%COMP%]{width:200px;height:200px;object-fit:contain;filter:drop-shadow(0 10px 20px rgba(0,0,0,.3))}.start-button[_ngcontent-%COMP%]{background:#ffffff1a;border:2px solid rgba(255,255,255,.2);border-radius:50px;padding:15px 40px;color:#fff;font-size:24px;font-weight:700;cursor:pointer;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite;text-shadow:0 2px 4px rgba(0,0,0,.5);letter-spacing:2px}.start-button[_ngcontent-%COMP%]:hover{animation-play-state:paused;box-shadow:0 15px 30px #0006;transform:translateY(-5px);background:#fff3}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-15px)}}"]})};var rv=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(T(un),T(dt))}}static{this.\u0275dir=Se({type:n})}}return n})(),lo=(()=>{class n extends rv{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=bt(n)))(r||n)}})()}static{this.\u0275dir=Se({type:n,features:[ht]})}}return n})(),nr=new z(""),sI={provide:nr,useExisting:yt(()=>Ed),multi:!0},Ed=(()=>{class n extends lo{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=bt(n)))(r||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&b("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[zt([sI]),ht]})}}return n})(),aI={provide:nr,useExisting:yt(()=>An),multi:!0};function cI(){let n=hn()?hn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var lI=new z(""),An=(()=>{class n extends rv{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!cI())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(T(un),T(dt),T(lI,8))}}static{this.\u0275dir=Se({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&b("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[zt([aI]),ht]})}}return n})();function va(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function uI(n){return n!=null&&typeof n.length=="number"}var Sa=new z(""),dI=new z("");function fI(n){return e=>{if(va(e.value)||va(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function hI(n){return e=>{if(va(e.value)||va(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function pI(n){return e=>uI(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function Qg(n){return null}function ov(n){return n!=null}function sv(n){return ti(n)?we(n):n}function av(n){let e={};return n.forEach(t=>{e=t!=null?g(g({},e),t):e}),Object.keys(e).length===0?null:e}function cv(n,e){return e.map(t=>t(n))}function mI(n){return!n.validate}function lv(n){return n.map(e=>mI(e)?e:t=>e.validate(t))}function gI(n){if(!n)return null;let e=n.filter(ov);return e.length==0?null:function(t){return av(cv(t,e))}}function uv(n){return n!=null?gI(lv(n)):null}function vI(n){if(!n)return null;let e=n.filter(ov);return e.length==0?null:function(t){let i=cv(t,e).map(sv);return Cc(i).pipe(ae(av))}}function dv(n){return n!=null?vI(lv(n)):null}function Zg(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yI(n){return n._rawValidators}function CI(n){return n._rawAsyncValidators}function Dd(n){return n?Array.isArray(n)?n:[n]:[]}function ya(n,e){return Array.isArray(n)?n.includes(e):n===e}function Kg(n,e){let t=Dd(e);return Dd(n).forEach(r=>{ya(t,r)||t.push(r)}),t}function Jg(n,e){return Dd(e).filter(t=>!ya(n,t))}var Ca=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},_d=class extends Ca{get formDirective(){return null}get path(){return null}},co=class extends Ca{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},wd=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},bI={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},dN=_(g({},bI),{"[class.ng-submitted]":"isSubmitted"}),ir=(()=>{class n extends wd{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(T(co,2))}}static{this.\u0275dir=Se({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&F("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ht]})}}return n})();var ro="VALID",ga="INVALID",Xi="PENDING",oo="DISABLED",tr=class{},ba=class extends tr{constructor(e,t){super(),this.value=e,this.source=t}},so=class extends tr{constructor(e,t){super(),this.pristine=e,this.source=t}},ao=class extends tr{constructor(e,t){super(),this.touched=e,this.source=t}},er=class extends tr{constructor(e,t){super(),this.status=e,this.source=t}};function SI(n){return(Da(n)?n.validators:n)||null}function DI(n){return Array.isArray(n)?uv(n):n||null}function _I(n,e){return(Da(e)?e.asyncValidators:n)||null}function wI(n){return Array.isArray(n)?dv(n):n||null}function Da(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var Id=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Gs(()=>this.statusReactive()),this.statusReactive=Bs(void 0),this._pristine=Gs(()=>this.pristineReactive()),this.pristineReactive=Bs(!0),this._touched=Gs(()=>this.touchedReactive()),this.touchedReactive=Bs(!1),this._events=new _e,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return On(this.statusReactive)}set status(e){On(()=>this.statusReactive.set(e))}get valid(){return this.status===ro}get invalid(){return this.status===ga}get pending(){return this.status==Xi}get disabled(){return this.status===oo}get enabled(){return this.status!==oo}get pristine(){return On(this.pristineReactive)}set pristine(e){On(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return On(this.touchedReactive)}set touched(e){On(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Kg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Kg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Jg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Jg(e,this._rawAsyncValidators))}hasValidator(e){return ya(this._rawValidators,e)}hasAsyncValidator(e){return ya(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(_(g({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new ao(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new ao(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(_(g({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new so(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new so(!0,i))}markAsPending(e={}){this.status=Xi;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new er(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(_(g({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=oo,this.errors=null,this._forEachChild(r=>{r.disable(_(g({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ba(this.value,i)),this._events.next(new er(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(_(g({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ro,this._forEachChild(i=>{i.enable(_(g({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(_(g({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ro||this.status===Xi)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ba(this.value,t)),this._events.next(new er(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(_(g({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?oo:ro}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Xi,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=sv(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new er(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new G,this.statusChanges=new G}_calculateStatus(){return this._allControlsDisabled()?oo:this.errors?ga:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xi)?Xi:this._anyControlsHaveStatus(ga)?ga:ro}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new so(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ao(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Da(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=DI(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=wI(this._rawAsyncValidators)}};var fv=new z("CallSetDisabledState",{providedIn:"root",factory:()=>Md}),Md="always";function II(n,e){return[...e.path,n]}function EI(n,e,t=Md){xI(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),TI(n,e),PI(n,e),OI(n,e),MI(n,e)}function Xg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MI(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function xI(n,e){let t=yI(n);e.validator!==null?n.setValidators(Zg(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=CI(n);e.asyncValidator!==null?n.setAsyncValidators(Zg(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Xg(e._rawValidators,r),Xg(e._rawAsyncValidators,r)}function TI(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&hv(n,e)})}function OI(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&hv(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function hv(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function PI(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function AI(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function kI(n){return Object.getPrototypeOf(n.constructor)===lo}function NI(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===An?t=o:kI(o)?i=o:r=o}),r||i||t||null}function ev(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function tv(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var RI=class extends Id{constructor(e=null,t,i){super(SI(t),_I(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Da(t)&&(t.nonNullable||t.initialValueIsDefault)&&(tv(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ev(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ev(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){tv(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var FI={provide:co,useExisting:yt(()=>ci)},nv=Promise.resolve(),ci=(()=>{class n extends co{constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new RI,this._registered=!1,this.name="",this.update=new G,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=NI(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),AI(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){EI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){nv.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Ws(i);nv.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?II(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(T(_d,9),T(Sa,10),T(dI,10),T(nr,10),T(ni,8),T(fv,8))}}static{this.\u0275dir=Se({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[zt([FI]),ht,ei]})}}return n})();var LI={provide:nr,useExisting:yt(()=>uo),multi:!0},uo=(()=>{class n extends lo{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=bt(n)))(r||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&b("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[zt([LI]),ht]})}}return n})();var VI={provide:nr,useExisting:yt(()=>_a),multi:!0};function pv(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function jI(n){return n.split(":")[0]}var _a=(()=>{class n extends lo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let i=this._getOptionId(t),r=pv(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=jI(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=bt(n)))(r||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&b("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[zt([VI]),ht]})}}return n})(),mv=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(pv(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(T(dt),T(un),T(_a,9))}}static{this.\u0275dir=Se({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),HI={provide:nr,useExisting:yt(()=>gv),multi:!0};function iv(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function BI(n){return n.split(":")[0]}var gv=(()=>{class n extends lo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);r.push(l)}}else{let s=i.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);r.push(l)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=BI(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=bt(n)))(r||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&b("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[zt([HI]),ht]})}}return n})(),vv=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(iv(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(iv(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(T(dt),T(un),T(gv,9))}}static{this.\u0275dir=Se({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function UI(n){return typeof n=="number"?n:parseInt(n,10)}function yv(n){return typeof n=="number"?n:parseFloat(n)}var xd=(()=>{class n{constructor(){this._validator=Qg}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Qg,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Se({type:n,features:[ei]})}}return n})(),$I={provide:Sa,useExisting:yt(()=>fo),multi:!0},fo=(()=>{class n extends xd{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>yv(t),this.createValidator=t=>hI(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=bt(n)))(r||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Hi("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[zt([$I]),ht]})}}return n})(),zI={provide:Sa,useExisting:yt(()=>ho),multi:!0},ho=(()=>{class n extends xd{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>yv(t),this.createValidator=t=>fI(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=bt(n)))(r||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Hi("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[zt([zI]),ht]})}}return n})();var WI={provide:Sa,useExisting:yt(()=>Td),multi:!0},Td=(()=>{class n extends xd{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>UI(t),this.createValidator=t=>pI(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=bt(n)))(r||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Hi("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[zt([WI]),ht]})}}return n})();var GI=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Xn({type:n})}static{this.\u0275inj=Jn({})}}return n})();var rr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fv,useValue:t.callSetDisabledState??Md}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Xn({type:n})}static{this.\u0275inj=Jn({imports:[GI]})}}return n})();var or={rare:null,lifeCycle:null,breedName:null,name:"Achick",currentHealth:80,currentHunger:60,maxHunger:100,maxHealth:100,hungerSpeed:1,currentFriendship:75,maxFriendship:100,currentWellness:90,maxWellness:100,timeStopping:!1,isLeaving:!1,isFreezing:!1,isDead:!1,isCooked:!1},D=class n{static STORAGE_KEY="achick_pet_stats";static petStatsSubject=new se(n.loadPetStatsFromStorage());static loadPetStatsFromStorage(){let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{let t=JSON.parse(e),i=g({},or);return Object.keys(t).forEach(r=>{r in i&&(i[r]=t[r])}),i}catch(t){console.error("Failed to parse pet stats:",t)}return g({},or)}static loadPetStats(){return this.petStatsSubject.value}static getPetStats$(){return this.petStatsSubject.asObservable()}static savePetStats(e){try{let t=this.validateStatsLimits(e);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),this.petStatsSubject.next(t)}catch(t){console.error("Failed to save pet stats:",t)}}static updatePetStats(e,t){let i=t||this.petStatsSubject.value,r=g(g({},i),e);return this.savePetStats(r),r}static resetPetStats(){let e=g({},or);return this.savePetStats(e),e}static initializeNewPet(e,t,i,r){let o=_(g({},or),{name:e,rare:t,lifeCycle:i,breedName:r||null,currentHealth:100,maxHealth:100,currentHunger:80,hungerSpeed:1,currentFriendship:50,currentWellness:100});return this.savePetStats(o),o}static isPetAlive(e){return!e.isDead&&e.currentHealth>0}static isPetHungry(e){return e.currentHunger<30}static isPetSick(e){return e.currentWellness<50}static getOverallCondition(e){if(!this.isPetAlive(e))return"critical";let t=(e.currentHealth+e.currentHunger+e.currentWellness+e.currentFriendship)/4;return t>=80?"excellent":t>=60?"good":t>=40?"fair":t>=20?"poor":"critical"}static validateStatsLimits(e){let t=g({},e);return t.currentFriendship=Math.max(0,Math.min(100,e.currentFriendship)),t.currentHealth=Math.max(0,Math.min(e.maxHealth,e.currentHealth)),t.currentHunger=Math.max(0,Math.min(100,e.currentHunger)),t.currentWellness=Math.max(0,Math.min(100,e.currentWellness)),t}};var wa=[{breed:"mud",breedName:"\u721B\u6CE5\u5C0F\u96DE",rare:"BAD",cookedEarned:5},{breed:"poison",breedName:"\u597D\u6BD2\u5C0F\u96DE",rare:"BAD",cookedEarned:30},{breed:"burned",breedName:"\u904E\u719F\u5C0F\u96DE",rare:"BAD",cookedEarned:15},{breed:"limbs",breedName:"\u7A81\u8B8A\u5C0F\u96DE",rare:"BAD",cookedEarned:30},{breed:"strong",breedName:"\u5065\u7F8E\u5C0F\u96DE",rare:"NORMAL",cookedEarned:40},{breed:"smooth",breedName:"\u597D\u808C\u5C0F\u96DE",rare:"NORMAL",cookedEarned:40},{breed:"carrot",breedName:"\u863F\u8514\u5C0F\u96DE",rare:"NORMAL",cookedEarned:50},{breed:"rainbow",breedName:"\u4E03\u5F69\u5C0F\u96DE",rare:"NORMAL",cookedEarned:70},{breed:"glass",breedName:"\u7409\u7483\u5C0F\u96DE",rare:"SPECIAL",cookedEarned:90},{breed:"cute",breedName:"\u7D68\u6BDB\u5C0F\u96DE",rare:"SPECIAL",cookedEarned:110},{breed:"monster",breedName:"\u7570\u5F62\u5C0F\u96DE",rare:"SPECIAL",cookedEarned:100},{breed:"cat",breedName:"\u8C93\u8C93\u5C0F\u96DE",rare:"SUPER_SPECIAL",cookedEarned:270},{breed:"fox",breedName:"\u72D0\u72F8\u5C0F\u96DE",rare:"SUPER_SPECIAL",cookedEarned:280},{breed:"goose",breedName:"\u767D\u9D5D\u5C0F\u96DE",rare:"SUPER_SPECIAL",cookedEarned:250}];function gn(n){return wa.find(e=>e.breed===n)}function Cv(n){return wa.filter(e=>e.rare===n)}var Pd={coins:0,totalPetsRaised:0,petHistory:[]},Z=class{static STORAGE_KEY="achick_user_data";static loadUserData(){let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{return g(g({},Pd),JSON.parse(e))}catch(t){console.error("Failed to parse user data:",t)}return g({},Pd)}static saveUserData(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Failed to save user data:",t)}}static updateUserData(e,t){let i=g(g({},t),e);return this.saveUserData(i),i}static addCoins(e,t){let i=_(g({},t),{coins:Math.max(0,t.coins+e)});return this.saveUserData(i),i}static spendCoins(e,t){if(t.coins>=e){let i=_(g({},t),{coins:t.coins-e});return this.saveUserData(i),{success:!0,data:i}}return{success:!1,data:t}}static addPetRecord(e,t){let i=_(g({},t),{totalPetsRaised:t.totalPetsRaised+1,petHistory:[...t.petHistory,e]});return this.saveUserData(i),i}static updatePetRecord(e,t,i){if(e>=0&&e<i.petHistory.length){let r=[...i.petHistory];r[e]=g(g({},r[e]),t);let o=_(g({},i),{petHistory:r});return this.saveUserData(o),o}return i}static getCurrentPetRecord(e){if(e.petHistory.length===0)return null;let t=e.petHistory[e.petHistory.length-1];return t.deathTime===null?t:null}static resetUserData(){let e=g({},Pd);return this.saveUserData(e),e}static formatDateTime(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return`${t}/${i}/${r} ${o}:${s}:${a}`}static createNewPetRecord(e){return{petName:e,birthTime:this.formatDateTime(new Date),evolutionTime:null,deathTime:null,ending:void 0}}static addPetEnding(e,t,i){if(!this.getCurrentPetRecord(i))return console.warn("No current pet found to add ending"),i;let o=this.formatDateTime(new Date),s={endingType:e,endingTime:o,coinsEarned:t},a=[...i.petHistory],c=a.length-1;a[c]=_(g({},a[c]),{deathTime:o,ending:s});let l=_(g({},i),{coins:i.coins+t,petHistory:a});return this.saveUserData(l),l}};function qI(n,e){if(n&1&&(u(0,"div",2),m(1),f()),n&2){let t=e.$implicit;Us("toast-"+t.type),F("removing",t.removing),h(),Y(" ",t.message," ")}}var Ia=class n{messages=[];isStatusExpanded=!1;destroy$=new _e;ngOnInit(){R.getStatusExpanded$().pipe(Vn(this.destroy$)).subscribe(e=>{this.isStatusExpanded=e}),R.getMessages$().pipe(Vn(this.destroy$)).subscribe(e=>{this.messages=e})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=j({type:n,selectors:[["app-toastr"]],standalone:!0,features:[H],decls:2,vars:3,consts:[[1,"toastr-container"],["class","toast",3,"class","removing",4,"ngFor","ngForOf"],[1,"toast"]],template:function(t,i){t&1&&(u(0,"div",0),N(1,qI,2,5,"div",1),f()),t&2&&(F("status-expanded",i.isStatusExpanded),h(),y("ngForOf",i.messages))},dependencies:[U,Ne],styles:[".toastr-container[_ngcontent-%COMP%]{position:fixed;bottom:120px;right:35px;z-index:2000;pointer-events:none;transition:bottom .3s ease,right .3s ease}.toastr-container.status-expanded[_ngcontent-%COMP%]{bottom:420px;right:15px}.toast[_ngcontent-%COMP%]{background:#201e1ebf;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);border-radius:12px;box-shadow:0 4px 12px #0000004d;color:#fff;padding:12px 16px;margin-bottom:8px;font-size:14px;min-width:200px;max-width:300px;pointer-events:auto;animation:_ngcontent-%COMP%_slideInRight .8s cubic-bezier(.25,.46,.45,.94);transition:all .8s cubic-bezier(.25,.46,.45,.94)}.toast.removing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideOutRight .8s cubic-bezier(.55,.06,.68,.19) forwards}.toast[_ngcontent-%COMP%]:last-child{margin-bottom:0}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(120%);opacity:0;scale:.8}to{transform:translate(0);opacity:1;scale:1}}@keyframes _ngcontent-%COMP%_slideOutRight{0%{transform:translate(0);opacity:1;scale:1}to{transform:translate(120%);opacity:0;scale:.8}}"]})},R=class{static messagesSubject=new se([]);static statusExpandedSubject=new se(!1);static messageCounter=0;static logService;static getMessages$(){return this.messagesSubject.asObservable()}static getStatusExpanded$(){return this.statusExpandedSubject.asObservable()}static setStatusExpanded(e){this.statusExpandedSubject.next(e)}static setLogService(e){this.logService=e}static show(e,t="info",i=5e3){let r={id:`toast-${++this.messageCounter}`,message:e,type:t,duration:i},o=this.messagesSubject.value;this.messagesSubject.next([...o,r]),this.logService&&this.logService.addToastrLog(e,t),setTimeout(()=>{this.remove(r.id)},i)}static success(e,t=3e3){this.show(e,"success",t)}static error(e,t=4e3){this.show(e,"error",t)}static warning(e,t=3e3){this.show(e,"warning",t)}static info(e,t=3e3){this.show(e,"info",t)}static remove(e){let i=this.messagesSubject.value.map(r=>r.id===e?_(g({},r),{removing:!0}):r);this.messagesSubject.next(i),setTimeout(()=>{let r=this.messagesSubject.value;this.messagesSubject.next(r.filter(o=>o.id!==e))},800)}};var fe=class n{static STORAGE_KEY="achick_custom_time_settings";isCustomTimeEnabledSubject=new se(!1);customTimeSubject=new se(new Date);customTimeOffset=0;customTimeBaseTime=Date.now();constructor(){this.loadSettings()}loadSettings(){try{let e=localStorage.getItem(n.STORAGE_KEY);if(e){let t=JSON.parse(e);if(this.isCustomTimeEnabledSubject.next(t.isEnabled||!1),t.customTime){let i=new Date(t.customTime);this.setCustomTime(i,!1)}}}catch(e){console.error("Failed to load custom time settings:",e)}}saveSettings(){try{let e={isEnabled:this.isCustomTimeEnabledSubject.value,customTime:this.customTimeSubject.value.toISOString(),customTimeOffset:this.customTimeOffset,customTimeBaseTime:this.customTimeBaseTime};localStorage.setItem(n.STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("Failed to save custom time settings:",e)}}getCurrentTime(){if(this.isCustomTimeEnabledSubject.value){let e=Date.now()-this.customTimeBaseTime;return new Date(this.customTimeSubject.value.getTime()+e)}return new Date}getCurrentTimestamp(){return this.getCurrentTime().getTime()}setCustomTime(e,t=!0){this.customTimeSubject.next(new Date(e)),this.customTimeBaseTime=Date.now(),this.customTimeOffset=e.getTime()-this.customTimeBaseTime,t&&this.saveSettings()}setCustomTimeEnabled(e){this.isCustomTimeEnabledSubject.next(e),e||this.resetToRealTime(),this.saveSettings()}resetToRealTime(){let e=new Date;this.customTimeSubject.next(e),this.customTimeBaseTime=Date.now(),this.customTimeOffset=0,this.saveSettings()}isCustomTimeEnabled(){return this.isCustomTimeEnabledSubject.value}getCustomTimeEnabled$(){return this.isCustomTimeEnabledSubject.asObservable()}getCustomTime$(){return this.customTimeSubject.asObservable()}formatTime(e="yyyy/mm/dd HH:mm:ss"){let t=this.getCurrentTime(),i=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");switch(e){case"yyyy/mm/dd":return`${i}/${r}/${o}`;case"HH:mm:ss":return`${s}:${a}:${c}`;default:return`${i}/${r}/${o} ${s}:${a}:${c}`}}forceResetToRealTime(){this.setCustomTimeEnabled(!1),this.resetToRealTime()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var ot=class n{constructor(e){this.customTimeService=e}static STORAGE_KEY="achick_logs";static MAX_ENTRIES=100;logDataSubject=new se(this.loadLogData());getLogData$(){return this.logDataSubject.asObservable()}getCurrentLogData(){return this.logDataSubject.value}addToastrLog(e,t){let i={id:this.generateId(),timestamp:this.getWriteTimeString(),type:"toastr",category:t,message:e};this.addLogEntry(i)}addModalLog(e,t,i="info"){let r={id:this.generateId(),timestamp:this.getWriteTimeString(),type:"modal",category:i,message:e,title:t};this.addLogEntry(r)}addLogEntry(e){let t=this.logDataSubject.value,i=[e,...t.entries];i.length>n.MAX_ENTRIES&&(i=i.slice(0,n.MAX_ENTRIES));let r=_(g({},t),{entries:i});this.saveLogData(r),this.logDataSubject.next(r)}clearLogs(){let e={entries:[],lastCleared:this.getWriteTimeString()};this.saveLogData(e),this.logDataSubject.next(e)}clearOldLogs(e=50){let t=this.logDataSubject.value;if(t.entries.length<=e)return;let i=_(g({},t),{entries:t.entries.slice(0,e)});this.saveLogData(i),this.logDataSubject.next(i)}loadLogData(){try{let e=localStorage.getItem(n.STORAGE_KEY);if(e){let t=JSON.parse(e);return{entries:t.entries||[],lastCleared:t.lastCleared}}}catch(e){console.error("Failed to load log data:",e)}return{entries:[],lastCleared:void 0}}saveLogData(e){try{localStorage.setItem(n.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Failed to save log data:",t)}}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2,9)}getLogCount(){return this.logDataSubject.value.entries.length}getLogsByType(e){return this.logDataSubject.value.entries.filter(t=>t.type===e)}getLogsByCategory(e){return this.logDataSubject.value.entries.filter(t=>t.category===e)}getWriteTimeString(){return this.customTimeService.formatTime()}static \u0275fac=function(t){return new(t||n)(M(fe))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var st=class n{constructor(e){this.logService=e;this.initializeCoins()}coinsSubject=new se(0);coins$=this.coinsSubject.asObservable();initializeCoins(){let e=Z.loadUserData();this.coinsSubject.next(e.coins)}getCoins(){return this.coinsSubject.value}setCoins(e){let t=Z.loadUserData(),i=Z.updateUserData({coins:Math.max(0,e)},t);this.coinsSubject.next(i.coins)}addCoins(e,t=!0,i){if(e<=0)return;let r=Z.loadUserData(),o=r.coins,a=Z.addCoins(e,r).coins;if(this.coinsSubject.next(a),t){let l=i?`\uFF08${i}\uFF09`:"";R.success(`\u7372\u5F97 ${e} \u91D1\u5E63${l}\uFF01`,2e3)}let c=i?` (${i})`:"";this.logService.addToastrLog(`\u91D1\u5E63\u589E\u52A0: +${e}${c} (${o} \u2192 ${a})`,"success")}spendCoins(e,t){if(e<=0)return!1;let i=Z.loadUserData(),r=i.coins,o=Z.spendCoins(e,i);if(o.success){let s=o.data.coins;this.coinsSubject.next(s);let a=t?` (${t})`:"";return this.logService.addToastrLog(`\u91D1\u5E63\u6E1B\u5C11: -${e}${a} (${r} \u2192 ${s})`,"info"),!0}return!1}hasEnoughCoins(e){return this.getCoins()>=e}refreshCoins(){this.initializeCoins()}static \u0275fac=function(t){return new(t||n)(M(ot))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var ze=class n{constructor(e){this.customTimeService=e;this.loadDirtyData()}maxDirtyCounts=3;lastAddDirtyTime=null;dirtyObjects=[];addDirtyInterval;dirtyPunishingInterval;static DIRTY_STORAGE_KEY="achick_dirty_data";startTimers(){this.addDirtyInterval=window.setInterval(()=>{this.addDirtyObject()},3e4),this.dirtyPunishingInterval=window.setInterval(()=>{this.dirtyPunishing()},3e4)}addDirtyObject(){let e=D.loadPetStats();if(e.rare===null){this.lastAddDirtyTime=null;return}if(e.timeStopping===!0||this.dirtyObjects.length>=this.maxDirtyCounts||e.lifeCycle!=="CHILD"&&e.lifeCycle!=="EVOLUTION")return;let t=this.getCurrentTimeString();if(this.lastAddDirtyTime===null){this.lastAddDirtyTime=t;return}let i=this.parseTimeString(this.lastAddDirtyTime),o=this.parseTimeString(t).getTime()-i.getTime(),s=60*60*1e3;if(o>=s){let a=Math.floor(o/s),c=this.maxDirtyCounts-this.dirtyObjects.length,l=Math.min(a,c);for(let d=0;d<l;d++){let C={dirtyNo:this.getNextDirtyNo(),dirtyTime:t,lastPunishTime:t};this.dirtyObjects.push(C)}this.lastAddDirtyTime=t,l>0&&this.saveDirtyData()}}getNextDirtyNo(){let e=[];for(let t=1;t<=this.maxDirtyCounts;t++)e.push(t);for(let t of e)if(!this.dirtyObjects.some(r=>r.dirtyNo===t))return t;return 1}dirtyPunishing(){let e=D.loadPetStats(),t=this.getCurrentTimeString();if(e.rare===null||e.timeStopping===!0||this.dirtyObjects.length===0||e.lifeCycle!=="CHILD"&&e.lifeCycle!=="EVOLUTION")return;let i=this.parseTimeString(t),r=0,o=!1;if(this.dirtyObjects.forEach((s,a)=>{let c=this.parseTimeString(s.dirtyTime),l=i.getTime()-c.getTime(),d=20*60*1e3;if(l>=d){let p=Math.floor(l/d),C=0;if(s.lastPunishTime){let L=this.parseTimeString(s.lastPunishTime).getTime()-c.getTime();C=Math.floor(L/d)}let v=p-C;v>0&&(r+=v,this.dirtyObjects[a].lastPunishTime=t,o=!0)}}),r>0){D.updatePetStats({currentWellness:Math.max(0,e.currentWellness-r),currentFriendship:Math.max(0,e.currentFriendship-r)});let s=e.name||"\u96FB\u5B50\u96DE";R.show(`${s}\u56E0\u74B0\u5883\u9AAF\u9AD2\u800C\u8EAB\u5FC3\u9748\u53D7\u5275\uFF0C\u5065\u5EB7\u5EA6-${r}\uFF0C\u597D\u611F\u5EA6-${r}`,"warning")}o&&this.saveDirtyData()}getCurrentTimeString(){return this.customTimeService.formatTime()}parseTimeString(e){let[t,i]=e.split(" "),[r,o,s]=t.split("/").map(Number),[a,c,l]=i.split(":").map(Number);return new Date(r,o-1,s,a,c,l)}stopTimers(){this.addDirtyInterval&&(clearInterval(this.addDirtyInterval),this.addDirtyInterval=void 0),this.dirtyPunishingInterval&&(clearInterval(this.dirtyPunishingInterval),this.dirtyPunishingInterval=void 0)}resetDirtyState(){this.dirtyObjects=[],this.lastAddDirtyTime=this.getCurrentTimeString(),this.saveDirtyData()}clearAllDirtyObjects(){this.dirtyObjects=[],this.lastAddDirtyTime=this.getCurrentTimeString(),this.saveDirtyData()}removeDirtyObject(e){this.dirtyObjects=this.dirtyObjects.filter(t=>t.dirtyNo!==e),this.dirtyObjects.length===0&&(this.lastAddDirtyTime=this.getCurrentTimeString()),this.saveDirtyData()}getDirtyCount(){return this.dirtyObjects.length}isMaxDirty(){return this.dirtyObjects.length>=this.maxDirtyCounts}loadDirtyData(){try{let e=localStorage.getItem(n.DIRTY_STORAGE_KEY);if(e){let t=JSON.parse(e);this.dirtyObjects=t.dirtyObjects||[],this.lastAddDirtyTime=t.lastAddDirtyTime||null}}catch(e){console.error("Failed to load dirty data:",e),this.dirtyObjects=[],this.lastAddDirtyTime=null}}saveDirtyData(){try{let e={dirtyObjects:this.dirtyObjects,lastAddDirtyTime:this.lastAddDirtyTime};localStorage.setItem(n.DIRTY_STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("Failed to save dirty data:",e)}}loadDirtyDataFromObject(e){e&&typeof e=="object"&&(this.dirtyObjects=e.dirtyObjects||[],this.lastAddDirtyTime=e.lastAddDirtyTime||null,this.saveDirtyData())}exportDirtyData(){return{dirtyObjects:this.dirtyObjects,lastAddDirtyTime:this.lastAddDirtyTime}}static \u0275fac=function(t){return new(t||n)(M(fe))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ad={angry:{stateText:"\u61A4\u6012",isActive:0},hungry:{stateText:"\u98E2\u9913",isActive:0},lowLikability:{stateText:"\u7121\u4F9D\u7121\u9760",isActive:0},sleepy:{stateText:"\u7761\u7720\u4E0D\u8DB3",isActive:0},needLight:{stateText:"\u9700\u8981\u5149\u7DDA",isActive:0},needSleep:{stateText:"\u9700\u8981\u7761\u7720",isActive:0},weak:{stateText:"\u865B\u5F31",isActive:0},headache:{stateText:"\u504F\u982D\u75DB",isActive:0},diarrhea:{stateText:"\u62C9\u809A\u5B50",isActive:0},gastricUlcer:{stateText:"\u80C3\u6F70\u760D",isActive:0},flu:{stateText:"\u6D41\u611F",isActive:0},isSleeping:{stateText:"\u7761\u7720\u4E2D",isActive:0},characterPosition:{left:"40%",top:"35dvh"},bedPosition:{left:"19%",top:"53dvh"}},P=class n{static STORAGE_KEY="achick_state_data";static stateDataSubject=new se(n.loadStateDataFromStorage());static loadStateDataFromStorage(){let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{return g(g({},Ad),JSON.parse(e))}catch(t){console.error("Failed to parse state data:",t)}return g({},Ad)}static loadStateData(){return this.stateDataSubject.value}static getStateData$(){return this.stateDataSubject.asObservable()}static saveStateData(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),this.stateDataSubject.next(e)}catch(t){console.error("Failed to save state data:",t)}}static updateStateData(e,t){let i=g(g({},t),e);return this.saveStateData(i),i}static activateState(e,t){let i=_(g({},t),{[e]:_(g({},t[e]),{isActive:1})});return this.saveStateData(i),i}static deactivateState(e,t){let i=_(g({},t),{[e]:_(g({},t[e]),{isActive:0})});return this.saveStateData(i),i}static getActiveStates(e){return Object.entries(e).filter(([t,i])=>t!=="characterPosition"&&t!=="bedPosition"&&"isActive"in i&&i.isActive===1).map(([t,i])=>i)}static getActiveStateNames(e){return Object.entries(e).filter(([t,i])=>t!=="characterPosition"&&t!=="bedPosition"&&"isActive"in i&&i.isActive===1).map(([t,i])=>t)}static resetAllStates(){let e=g({},Ad);return this.saveStateData(e),e}static isStateActive(e,t){return t[e].isActive===1}static updateCharacterPosition(e){let t=this.loadStateData(),i=_(g({},t),{characterPosition:e});return this.saveStateData(i),i}static updateBedPosition(e){let t=this.loadStateData(),i=_(g({},t),{bedPosition:e});return this.saveStateData(i),i}static resetCharacterPositionToDefault(){let e=this.loadStateData(),t=_(g({},e),{characterPosition:{left:"40%",top:"35dvh"}});return this.saveStateData(t),t}static resetPositionsToDefault(){let e=this.loadStateData(),t=_(g({},e),{characterPosition:{left:"40%",top:"35dvh"},bedPosition:{left:"19%",top:"53dvh"}});return this.saveStateData(t),t}};var _t=class n{constructor(e){this.customTimeService=e;this.loadHungerTimes()}lastHungerTime=null;hungerStateStartTime=null;lastHungerPenaltyTime=null;hungerDecreaseInterval;hungerCheckInterval;static HUNGER_STORAGE_KEY="achick_hunger_times";startHungerSystem(){this.hungerDecreaseInterval=setInterval(()=>{this.decreaseHunger()},3e4),this.hungerCheckInterval=setInterval(()=>{this.checkHungerState()},3e4)}getCurrentTimeString(){return this.customTimeService.formatTime()}parseTimeString(e){let[t,i]=e.split(" "),[r,o,s]=t.split("/").map(Number),[a,c,l]=i.split(":").map(Number);return new Date(r,o-1,s,a,c,l)}getTimeDifferenceInMinutes(e,t){let i=this.parseTimeString(e),r=this.parseTimeString(t);return Math.abs(r.getTime()-i.getTime())/(1e3*60)}decreaseHunger(e=!1){let t=D.loadPetStats();if(t.rare===null){this.lastHungerTime=null,this.saveHungerTimes();return}if(!e&&(t.timeStopping||t.currentHunger===0||t.lifeCycle!=="CHILD"&&t.lifeCycle!=="EVOLUTION"))return;let i=this.getCurrentTimeString();if(this.lastHungerTime===null){if(this.lastHungerTime=i,this.saveHungerTimes(),e&&t.currentHunger>0){let s=Math.max(0,t.currentHunger-t.hungerSpeed);D.updatePetStats({currentHunger:s})}return}let r=this.getTimeDifferenceInMinutes(this.lastHungerTime,i);if((e||r>=60)&&t.currentHunger>0){let s=1;r>=60&&(s=Math.floor(r/60));let a=s*t.hungerSpeed,c=Math.max(0,t.currentHunger-a);if(D.updatePetStats({currentHunger:c}),r>=60){let d=this.parseTimeString(this.lastHungerTime),p=new Date(d.getTime()+s*60*60*1e3);this.lastHungerTime=this.formatTimeFromDate(p)}else this.lastHungerTime=i;this.saveHungerTimes();let l=e&&r<60?"\u5F37\u5236\u57F7\u884C":"\u7D2F\u7A4D\u6E1B\u5C11"}}checkHungerState(e=!1){let t=D.loadPetStats();if(t.rare===null){this.hungerStateStartTime=null,this.lastHungerPenaltyTime=null,this.saveHungerTimes();return}let i=P.loadStateData();if(!e&&(t.timeStopping||t.currentHunger>35||t.lifeCycle!=="CHILD"&&t.lifeCycle!=="EVOLUTION")){i.hungry.isActive===1&&P.deactivateState("hungry",i),this.hungerStateStartTime=null,this.saveHungerTimes();return}let r=this.getCurrentTimeString();this.hungerStateStartTime===null&&(P.activateState("hungry",i),this.hungerStateStartTime=r,this.saveHungerTimes()),this.checkHungerPenalty(e,t,r)}checkHungerPenalty(e,t,i){if(t.currentHunger>35)return;if(this.lastHungerPenaltyTime===null){this.lastHungerPenaltyTime=i,this.saveHungerTimes(),e&&this.executeHungerPenalty(t,1);return}let r=this.getTimeDifferenceInMinutes(this.lastHungerPenaltyTime,i);if(e||r>=60){let s=1;if(r>=60&&(s=Math.floor(r/60)),this.executeHungerPenalty(t,s),r>=60){let a=this.parseTimeString(this.lastHungerPenaltyTime),c=new Date(a.getTime()+s*60*60*1e3);this.lastHungerPenaltyTime=this.formatTimeFromDate(c)}else this.lastHungerPenaltyTime=i;this.saveHungerTimes()}}stopHungerSystem(){this.hungerDecreaseInterval&&clearInterval(this.hungerDecreaseInterval),this.hungerCheckInterval&&clearInterval(this.hungerCheckInterval)}restartHungerSystem(){this.stopHungerSystem(),this.startHungerSystem()}resetHungerTimes(){this.lastHungerTime=null,this.hungerStateStartTime=null,this.lastHungerPenaltyTime=null,this.saveHungerTimes()}executeHungerPenalty(e,t){let i=0,r=0;if(e.currentHunger>=16&&e.currentHunger<=35?(i=5,r=1):e.currentHunger>=0&&e.currentHunger<=15&&(i=15,r=2),i>0||r>0){let o=t*i,s=t*r,a=Math.max(0,e.currentFriendship-o),c=Math.max(0,e.currentWellness-s);D.updatePetStats({currentFriendship:a,currentWellness:c});let d=`${e.name||"Achick"}\u56E0\u98E2\u9913\u5C0D\u4F60\u4E0D\u6EFF\uFF0C\u5065\u5EB7\u5EA6-${s}\uFF0C\u597D\u611F\u5EA6-${o}\uFF08${t}\u6B21\u61F2\u7F70\uFF09`;R.show(d,"warning",6e3)}}manualTriggerHungerDecrease(){let e=D.loadPetStats(),t=this.getCurrentTimeString();if(e.rare===null){R.show("\u96FB\u5B50\u96DE\u5C1A\u672A\u8A2D\u5B9A\u7A00\u6709\u5EA6\uFF0C\u7121\u6CD5\u57F7\u884C\u98FD\u8DB3\u611F\u6E1B\u5C11","info",3e3);return}if(e.timeStopping){R.show("\u96FB\u5B50\u96DE\u6642\u9593\u5DF2\u505C\u6B62\uFF0C\u7121\u6CD5\u57F7\u884C\u98FD\u8DB3\u611F\u6E1B\u5C11","info",3e3);return}if(e.currentHunger===0){R.show("\u98FD\u8DB3\u611F\u5DF2\u70BA0\uFF0C\u7121\u9700\u518D\u6E1B\u5C11","info",3e3);return}if(e.lifeCycle!=="CHILD"&&e.lifeCycle!=="EVOLUTION"){R.show(`\u96FB\u5B50\u96DE\u751F\u547D\u9031\u671F\u70BA${e.lifeCycle}\uFF0C\u4E0D\u6703\u6E1B\u5C11\u98FD\u8DB3\u611F`,"info",3e3);return}if(this.lastHungerTime!==null){let i=this.getTimeDifferenceInMinutes(this.lastHungerTime,t);if(i<60){let r=Math.ceil(60-i);R.show(`\u8DDD\u96E2\u4E0A\u6B21\u98FD\u8DB3\u611F\u6E1B\u5C11\u50C5\u904E\u4E86${Math.floor(i)}\u5206\u9418\uFF0C\u9084\u9700\u7B49\u5F85${r}\u5206\u9418`,"info",4e3);return}}this.decreaseHunger(!1)}manualTriggerHungerPenalty(){let e=D.loadPetStats(),t=this.getCurrentTimeString();if(e.rare===null){R.show("\u96FB\u5B50\u96DE\u5C1A\u672A\u8A2D\u5B9A\u7A00\u6709\u5EA6\uFF0C\u7121\u6CD5\u57F7\u884C\u98E2\u9913\u61F2\u7F70","info",3e3);return}if(e.timeStopping){R.show("\u96FB\u5B50\u96DE\u6642\u9593\u5DF2\u505C\u6B62\uFF0C\u7121\u6CD5\u57F7\u884C\u98E2\u9913\u61F2\u7F70","info",3e3);return}if(e.lifeCycle!=="CHILD"&&e.lifeCycle!=="EVOLUTION"){R.show(`\u96FB\u5B50\u96DE\u751F\u547D\u9031\u671F\u70BA${e.lifeCycle}\uFF0C\u4E0D\u6703\u57F7\u884C\u98E2\u9913\u61F2\u7F70`,"info",3e3);return}if(e.currentHunger>35){let i=e.name||"Achick";R.show(`${i}\u7684\u98FD\u8DB3\u611F\u70BA${e.currentHunger}\uFF0C\u9AD8\u65BC35\uFF0C\u7121\u9700\u98E2\u9913\u61F2\u7F70`,"info",3e3);return}if(this.lastHungerPenaltyTime!==null){let i=this.getTimeDifferenceInMinutes(this.lastHungerPenaltyTime,t);if(i<60){let r=Math.ceil(60-i);R.show(`\u8DDD\u96E2\u4E0A\u6B21\u98E2\u9913\u61F2\u7F70\u50C5\u904E\u4E86${Math.floor(i)}\u5206\u9418\uFF0C\u9084\u9700\u7B49\u5F85${r}\u5206\u9418\u624D\u80FD\u518D\u6B21\u57F7\u884C\u61F2\u7F70`,"info",4e3);return}}this.checkHungerState(!1)}formatTimeFromDate(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return`${t}/${i}/${r} ${o}:${s}:${a}`}loadHungerTimes(){try{let e=localStorage.getItem(n.HUNGER_STORAGE_KEY);if(e){let t=JSON.parse(e);this.lastHungerTime=t.lastHungerTime||null,this.hungerStateStartTime=t.hungerStateStartTime||null,this.lastHungerPenaltyTime=t.lastHungerPenaltyTime||null}}catch(e){console.error("Failed to load hunger times:",e),this.lastHungerTime=null,this.hungerStateStartTime=null,this.lastHungerPenaltyTime=null}}saveHungerTimes(){try{let e={lastHungerTime:this.lastHungerTime,hungerStateStartTime:this.hungerStateStartTime,lastHungerPenaltyTime:this.lastHungerPenaltyTime};localStorage.setItem(n.HUNGER_STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("Failed to save hunger times:",e)}}static \u0275fac=function(t){return new(t||n)(M(fe))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var YI=["confirmButton"];function QI(n,e){if(n&1&&(u(0,"h4",13),m(1),f()),n&2){let t=S(2);h(),q(t.config.title)}}function ZI(n,e){if(n&1){let t=te();u(0,"button",14),b("click",function(){w(t);let r=S(2);return I(r.onCancel())}),m(1,"\xD7"),f()}}function KI(n,e){if(n&1){let t=te();u(0,"button",15),b("click",function(){w(t);let r=S(2);return I(r.onCancel())}),m(1),f()}if(n&2){let t=S(2);h(),Y(" ",t.config.cancelText||"\u53D6\u6D88"," ")}}function JI(n,e){if(n&1){let t=te();u(0,"div",2),b("click",function(r){w(t);let o=S();return I(o.onOverlayClick(r))}),u(1,"div",3),b("click",function(r){return w(t),I(r.stopPropagation())}),u(2,"div",4)(3,"div",5),N(4,QI,2,1,"h4",6)(5,ZI,2,0,"button",7),f(),u(6,"div",8)(7,"p",9),m(8),f()(),u(9,"div",10),N(10,KI,2,1,"button",11),u(11,"button",12,0),b("click",function(){w(t);let r=S();return I(r.onConfirm())}),m(13),f()()()()()}if(n&2){let t=S();F("show",t.isShowing&&!t.isClosing),h(),F("show",t.isShowing&&!t.isClosing)("closing",t.isClosing),h(),F("content-show",t.isContentVisible)("content-closing",t.isContentClosing),h(2),y("ngIf",t.config.title),h(),y("ngIf",t.config.type==="info"),h(3),q(t.config.message),h(2),y("ngIf",t.config.type==="confirm"),h(3),Y(" ",t.config.confirmText||(t.config.type==="confirm"?"\u78BA\u8A8D":"\u78BA\u5B9A")," ")}}var Ma=class n{confirmButton;isVisible=!1;isShowing=!1;isClosing=!1;isContentVisible=!1;isContentClosing=!1;config={message:"",type:"alert"};confirmed=new G;cancelled=new G;closed=new G;show(e){return this.config=e,this.isVisible=!0,this.isContentVisible=!1,this.isContentClosing=!1,setTimeout(()=>{this.isShowing=!0},10),setTimeout(()=>{this.isContentVisible=!0},420),setTimeout(()=>{this.confirmButton?.nativeElement?.focus()},570),new Promise(t=>{let i=s=>{this.isContentVisible=!1,this.isContentClosing=!0,setTimeout(()=>{this.isShowing=!1,this.isClosing=!0,this.isContentClosing=!1,setTimeout(()=>{this.isVisible=!1,this.isClosing=!1,this.closed.emit(),t(s)},300)},150)},r=this.confirmed.subscribe(()=>{r.unsubscribe(),o.unsubscribe(),i(!0)}),o=this.cancelled.subscribe(()=>{r.unsubscribe(),o.unsubscribe(),i(!1)})})}onConfirm(){this.confirmed.emit()}onCancel(){this.cancelled.emit()}onOverlayClick(e){e.target===e.currentTarget&&this.onCancel()}hide(){this.isContentVisible=!1,this.isContentClosing=!0,setTimeout(()=>{this.isShowing=!1,this.isClosing=!0,this.isContentClosing=!1,setTimeout(()=>{this.isVisible=!1,this.isClosing=!1,this.closed.emit()},300)},150)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=j({type:n,selectors:[["app-modal"]],viewQuery:function(t,i){if(t&1&&ke(YI,5),t&2){let r;Oe(r=Pe())&&(i.confirmButton=r.first)}},outputs:{confirmed:"confirmed",cancelled:"cancelled",closed:"closed"},standalone:!0,features:[H],decls:1,vars:1,consts:[["confirmButton",""],["class","modal-overlay",3,"show","click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],["class","modal-title",4,"ngIf"],["type","button","class","close-btn",3,"click",4,"ngIf"],[1,"modal-body"],[1,"modal-message"],[1,"modal-footer"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,i){t&1&&N(0,JI,14,15,"div",1),t&2&&y("ngIf",i.isVisible)},dependencies:[U,ye],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0000004d;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;transition:opacity .2s ease-out}.modal-overlay.show[_ngcontent-%COMP%]{opacity:1}.modal-dialog[_ngcontent-%COMP%]{background:#fffc;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.2);border-radius:16px;box-shadow:0 8px 32px #0003;max-width:400px;width:90%;min-width:30dvw;min-height:100px;transform:scaleY(0);transform-origin:center center;opacity:0;transition:all .4s cubic-bezier(.25,.46,.45,.94);overflow:hidden}.modal-dialog.show[_ngcontent-%COMP%]{transform:scaleY(1);opacity:1}.modal-dialog.closing[_ngcontent-%COMP%]{transform:scaleY(0);opacity:0;transition:all .3s cubic-bezier(.55,.085,.68,.53)}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;opacity:0;transition:opacity .15s ease}.modal-content.content-show[_ngcontent-%COMP%]{opacity:1}.modal-content.content-closing[_ngcontent-%COMP%]{opacity:0;transition:opacity .15s ease}.modal-header[_ngcontent-%COMP%]{padding:16px 20px 8px;border-bottom:1px solid rgba(125,113,102,.5);display:flex;justify-content:space-between;align-items:center}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}.close-btn[_ngcontent-%COMP%]:hover{color:#666;background-color:#f8f9fa}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px;flex:1}.modal-message[_ngcontent-%COMP%]{margin:0;line-height:1.5;color:#555;white-space:pre-line}.modal-footer[_ngcontent-%COMP%]{padding:12px 20px 20px;display:flex;justify-content:flex-end;gap:12px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]{background-color:#7d7166;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#6a5f54}.btn-secondary[_ngcontent-%COMP%]{background-color:#7d71664d;color:#7d7166;border:1px solid rgba(125,113,102,.5)}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#7d716680;color:#fff}.btn[_ngcontent-%COMP%]:focus{outline:2px solid #7d7166;outline-offset:2px}@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0;-webkit-backdrop-filter:blur(0px);backdrop-filter:blur(0px)}to{opacity:1;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}}@keyframes _ngcontent-%COMP%_modalExpandVertical{0%{max-height:0;transform:scaleY(0);opacity:0}50%{opacity:.8}to{max-height:90vh;transform:scaleY(1);opacity:1}}@keyframes _ngcontent-%COMP%_modalCollapseVertical{0%{max-height:90vh;transform:scaleY(1);opacity:1}50%{opacity:.8}to{max-height:0;transform:scaleY(0);opacity:0}}"]})};var ve=class n{constructor(e,t){this.appRef=e;this.injector=t}modalRef=null;static logService;static setLogService(e){this.logService=e}alert(e,t){return Q(this,null,function*(){let i={type:"alert",message:e,title:t,confirmText:"\u78BA\u5B9A"};n.logService&&n.logService.addModalLog(e,t,"warning"),yield this.showModal(i)})}confirm(e,t,i,r){return Q(this,null,function*(){let o={type:"confirm",message:e,title:t,confirmText:i||"\u78BA\u8A8D",cancelText:r||"\u53D6\u6D88"};return n.logService&&n.logService.addModalLog(e,t,"info"),yield this.showModal(o)})}info(e,t,i){return Q(this,null,function*(){let r={type:"info",message:e,title:t,confirmText:i||"\u78BA\u5B9A"};n.logService&&n.logService.addModalLog(e,t,"info"),yield this.showModal(r)})}showModal(e){return Q(this,null,function*(){this.modalRef&&this.closeModal(),this.modalRef=Vm(Ma,{environmentInjector:this.injector}),document.body.appendChild(this.modalRef.location.nativeElement),this.appRef.attachView(this.modalRef.hostView);let t=yield this.modalRef.instance.show(e);return this.closeModal(),t})}closeModal(){this.modalRef&&(this.appRef.detachView(this.modalRef.hostView),this.modalRef.destroy(),this.modalRef=null)}closeCurrentModal(){this.modalRef&&(this.modalRef.instance.hide(),this.closeModal())}static \u0275fac=function(t){return new(t||n)(M(dn),M(nt))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var lr=class n{showWelcomeSubject=new se(!0);showRoomSubject=new se(!1);showWelcome$=this.showWelcomeSubject.asObservable();showRoom$=this.showRoomSubject.asObservable();constructor(){}showWelcomePage(){this.showWelcomeSubject.next(!0),this.showRoomSubject.next(!1)}showRoomPage(){this.showWelcomeSubject.next(!1),this.showRoomSubject.next(!0)}getCurrentState(){return{showWelcome:this.showWelcomeSubject.value,showRoom:this.showRoomSubject.value}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var Gt=class n{constructor(e,t,i,r,o){this.dirtyTriggerService=e;this.whiteTransitionService=t;this.modalService=i;this.appStateService=r;this.logService=o}doKill(e){return Q(this,null,function*(){let t=D.loadPetStats(),i=t.name||"\u96FB\u5B50\u96DE",r=_(g({},t),{timeStopping:!0,isDead:!0});D.savePetStats(r);let o=P.loadStateData();o.isSleeping.isActive===1&&P.deactivateState("isSleeping",o);let s=e||`${i}\u56E0\u758F\u65BC\u7167\u9867\u800C\u6B7B\u4EA1...`;yield this.modalService.info(`${s}

\u6C38\u5225\u4E86${i}\uFF0C\u5E0C\u671B\u4F60\u53BB\u4E86\u66F4\u7F8E\u597D\u7684\u4E16\u754C\uFF0CRIP\u{1F54A}\uFE0F`,"\u5BF5\u7269\u5DF2\u6B7B\u4EA1")})}clearCurrentChickenState(e=!1){let t=D.loadPetStats(),i=Z.loadUserData(),r=P.loadStateData(),o=Z.formatDateTime(new Date);if(Z.getCurrentPetRecord(i)){let l=[...i.petHistory],d=l.length-1;if(d>=0){l[d]=_(g({},l[d]),{deathTime:o});let p=_(g({},i),{petHistory:l});Z.saveUserData(p)}}let a=_(g({},or),{rare:null,lifeCycle:null,breedName:null,name:null,currentHealth:0,currentHunger:0,maxHunger:100,maxHealth:0,hungerSpeed:0,currentFriendship:0,maxFriendship:100,currentWellness:0,maxWellness:100,timeStopping:!1,isLeaving:!1,isFreezing:!1,isDead:!1,isCooked:!1});D.savePetStats(a);let c=g({},r);Object.keys(c).forEach(l=>{let d=c[l];"isActive"in d&&(d.isActive=0)}),P.saveStateData(c),this.dirtyTriggerService.resetDirtyState(),e||this.showWelcomePage()}showWelcomePage(){this.whiteTransitionService.reset(),this.appStateService.showWelcomePage()}showDeathConfirmDialog(){return Q(this,null,function*(){let e=D.loadPetStats();return(e.isDead||e.isCooked)&&(yield this.modalService.confirm("\u662F\u5426\u958B\u59CB\u98FC\u990A\u65B0\u7684\u96FB\u5B50\u96DE\uFF1F","\u78BA\u8A8D\u91CD\u65B0\u958B\u59CB"))?(this.whiteTransitionService.setOneTimeCallback(()=>{this.logService.clearLogs(),this.clearCurrentChickenState(!0),this.showWelcomePage(),this.whiteTransitionService.onSceneReady()}),this.whiteTransitionService.fadeIn(),!0):!1})}static \u0275fac=function(t){return new(t||n)(M(ze),M(rt),M(ve),M(lr),M(ot))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var ur=class n{constructor(e){this.lifecycleService=e}checkInterval;startHealthCheck(){this.checkInterval=window.setInterval(()=>{this.checkLifeValue()},3e4)}checkLifeValue(){return Q(this,null,function*(){let e=D.loadPetStats();e.rare===null||e.timeStopping===!0||e.lifeCycle!=="CHILD"&&e.lifeCycle!=="EVOLUTION"||e.currentHealth<=0&&(yield this.lifecycleService.doKill())})}stopHealthCheck(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=void 0)}manualCheck(){return Q(this,null,function*(){yield this.checkLifeValue()})}static \u0275fac=function(t){return new(t||n)(M(Gt))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var qt=class n{constructor(e,t){this.customTimeService=e;this.modalService=t;this.loadWellnessTimes()}lastSickCheckTime=null;lastLifeDamageTime=null;lastDiseaseCheckTime=null;lastWellnessBoostTime=null;lastHealthBoostTime=null;wellnessCheckInterval;diseaseEffectsInterval;static WELLNESS_STORAGE_KEY="achick_wellness_times";startWellnessMonitoring(){this.wellnessCheckInterval=window.setInterval(()=>{this.healthCheck()},3e4),this.diseaseEffectsInterval=window.setInterval(()=>{this.diseaseEffects()},3e4)}healthCheck(){return Q(this,null,function*(){let e=D.loadPetStats();if(e.rare===null){this.lastSickCheckTime=null,this.lastLifeDamageTime=null,this.lastDiseaseCheckTime=null,this.lastWellnessBoostTime=null,this.lastHealthBoostTime=null,this.saveWellnessTimes();return}if(e.timeStopping===!0||e.lifeCycle!=="CHILD"&&e.lifeCycle!=="EVOLUTION")return;let t=P.loadStateData();e.currentWellness<40?P.activateState("weak",t):P.deactivateState("weak",t),this.checkLifeDamage(),this.checkWellnessBoost(),this.checkHealthBoost(),yield this.checkDiseaseCheck()})}checkWellnessBoost(){let e=this.customTimeService.formatTime(),t=D.loadPetStats();if(t.currentFriendship<=60||t.currentHunger<=60)return;if(this.lastWellnessBoostTime===null){this.lastWellnessBoostTime=e,this.saveWellnessTimes();return}let i=this.parseTimeString(this.lastWellnessBoostTime),o=this.parseTimeString(e).getTime()-i.getTime(),s=40*60*1e3;if(o>=s){let a=Math.floor(o/s),c=Math.min(t.maxWellness,t.currentWellness+a);if(c>t.currentWellness){D.updatePetStats({currentWellness:c});let l=new Date(i.getTime()+a*s);this.lastWellnessBoostTime=this.formatTimeFromDate(l),this.saveWellnessTimes();let d=c-t.currentWellness;R.success(`\u5065\u5EB7\u5EA6\u56DE\u5FA9\uFF01+${d}`)}}}checkHealthBoost(){let e=this.customTimeService.formatTime(),t=D.loadPetStats();if(t.currentWellness<=70)return;if(this.lastHealthBoostTime===null){this.lastHealthBoostTime=e,this.saveWellnessTimes();return}let i=this.parseTimeString(this.lastHealthBoostTime),o=this.parseTimeString(e).getTime()-i.getTime(),s=60*60*1e3;if(o>=s){let a=Math.floor(o/s),c=Math.min(t.maxHealth,t.currentHealth+a);if(c>t.currentHealth){D.updatePetStats({currentHealth:c});let l=new Date(i.getTime()+a*s);this.lastHealthBoostTime=this.formatTimeFromDate(l),this.saveWellnessTimes();let d=c-t.currentHealth;R.success(`\u751F\u547D\u503C\u56DE\u5FA9\uFF01+${d}`)}}}checkLifeDamage(){let e=this.customTimeService.formatTime(),t=D.loadPetStats();if(this.lastLifeDamageTime===null){this.lastLifeDamageTime=e,this.saveWellnessTimes();return}let i=t.currentWellness,r=this.parseTimeString(this.lastLifeDamageTime),s=this.parseTimeString(e).getTime()-r.getTime(),a=0,c=0,l=0;if(i===0?(a=10,c=10,l=5):i>=1&&i<=9?(a=10,c=1,l=0):i>=10&&i<=39&&(a=30,c=1,l=0),a>0){let d=a*60*1e3;if(s>=d){let p=Math.floor(s/d),C=p*c,v=p*l,E=Math.max(0,t.maxHealth-v),L=Math.max(0,t.currentHealth-C);L>E&&(L=E),D.updatePetStats({currentHealth:L,maxHealth:E});let X=new Date(r.getTime()+p*d);if(this.lastLifeDamageTime=this.formatTimeFromDate(X),this.saveWellnessTimes(),C>0||v>0){let ie="\u5065\u5EB7\u5EA6\u904E\u4F4E\u9020\u6210\u50B7\u5BB3\uFF01";C>0&&(ie+=` \u751F\u547D\u503C-${C}`),v>0&&(ie+=` \u6700\u5927\u751F\u547D\u503C-${v}`),R.error(ie)}}}}checkDiseaseCheck(){return Q(this,null,function*(){let e=this.customTimeService.formatTime(),t=D.loadPetStats();if(t.timeStopping===!0||t.lifeCycle!=="CHILD"&&t.lifeCycle!=="EVOLUTION")return;if(this.lastDiseaseCheckTime===null){this.lastDiseaseCheckTime=e,this.saveWellnessTimes(),t.currentWellness>=1&&t.currentWellness<=49&&(yield this.randomGetSick(),this.lastDiseaseCheckTime=e,this.saveWellnessTimes());return}let i=t.currentWellness,r=this.parseTimeString(this.lastDiseaseCheckTime),o=this.parseTimeString(e),s=Math.floor((o.getTime()-r.getTime())/(1e3*60)),a=!1;i>=1&&i<=9?s>=10&&(a=!0):i>=10&&i<=29?s>=20&&(a=!0):i>=30&&i<=49&&s>=30&&(a=!0),a&&(yield this.randomGetSick(),this.lastDiseaseCheckTime=e,this.saveWellnessTimes())})}randomGetSick(){return Q(this,null,function*(){let e=D.loadPetStats();if(e.timeStopping===!0||e.lifeCycle!=="CHILD"&&e.lifeCycle!=="EVOLUTION")return;let t=P.loadStateData(),r=["headache","diarrhea","gastricUlcer","flu"].filter(l=>{let d=t[l];return!("isActive"in d&&d.isActive===1)});if(r.length===0){if(Math.random()*100<60){let d=D.loadPetStats();D.updatePetStats({currentWellness:Math.max(0,d.currentWellness-5)}),R.warning("\u96FB\u5B50\u96DE\u7761\u7720\u54C1\u8CEA\u4E0D\u4F73\uFF0C\u5065\u5EB7\u5EA6\u4E0B\u964D\u4E86\uFF01")}return}let o=Math.random()*100,s="",a=60/r.length,c=0;for(let l of r)if(c+=a,o<c){switch(l){case"headache":P.activateState("headache",t),s=`\u96FB\u5B50\u96DE\u5F97\u4E86\u504F\u982D\u75DB\uFF01

\u53EF\u4EE5\u8CFC\u8CB7\u982D\u75DB\u85E5\u4F86\u6CBB\u7642\u3002`;break;case"diarrhea":P.activateState("diarrhea",t),s=`\u96FB\u5B50\u96DE\u62C9\u809A\u5B50\u4E86\uFF01

\u53EF\u4EE5\u8CFC\u8CB7\u6574\u8178\u85E5\u4F86\u6CBB\u7642\u3002`;break;case"gastricUlcer":P.activateState("gastricUlcer",t),s=`\u96FB\u5B50\u96DE\u5F97\u4E86\u80C3\u6F70\u760D\uFF01

\u53EF\u4EE5\u8CFC\u8CB7\u80C3\u85E5\u4F86\u6CBB\u7642\u3002`;break;case"flu":P.activateState("flu",t),s=`\u96FB\u5B50\u96DE\u5F97\u4E86\u6D41\u611F\uFF01

\u53EF\u4EE5\u8CFC\u8CB7\u611F\u5192\u85E5\u4F86\u6CBB\u7642\u3002`;break}yield this.modalService.info(s,"\u75BE\u75C5\u901A\u77E5");return}if(o<75){let l=D.loadPetStats();D.updatePetStats({currentWellness:Math.max(0,l.currentWellness-5)}),R.warning("\u96FB\u5B50\u96DE\u7761\u7720\u54C1\u8CEA\u4E0D\u4F73\uFF0C\u5065\u5EB7\u5EA6\u4E0B\u964D\u4E86\uFF01")}})}diseaseEffects(){let e=D.loadPetStats();if(e.rare===null||e.timeStopping===!0||e.lifeCycle!=="CHILD"&&e.lifeCycle!=="EVOLUTION")return;n.lastDiseaseEffectTime1hour||(n.lastDiseaseEffectTime1hour=null);let t=P.loadStateData(),i=["headache","diarrhea","gastricUlcer","flu"].filter(l=>{let d=t[l];return"isActive"in d&&d.isActive===1}).length;if(i===0)return;let r=this.customTimeService.formatTime();if(n.lastDiseaseEffectTime1hour===null){n.lastDiseaseEffectTime1hour=r,this.saveWellnessTimes();return}let o=this.parseTimeString(n.lastDiseaseEffectTime1hour),a=this.parseTimeString(r).getTime()-o.getTime(),c=60*60*1e3;if(a>=c){let l=Math.floor(a/c),d=Math.ceil(i/2),p=l*d,C=l*i,v=Math.max(0,e.maxHealth-p),E=Math.max(0,e.currentHealth-C);E>v&&(E=v),D.updatePetStats({currentHealth:E,maxHealth:v});let L=new Date(o.getTime()+l*c);if(n.lastDiseaseEffectTime1hour=this.formatTimeFromDate(L),this.saveWellnessTimes(),C>0||p>0){let X=`\u75BE\u75C5\u6301\u7E8C\u6548\u679C\uFF1A${i} \u500B\u75BE\u75C5\u9020\u6210\u50B7\u5BB3\uFF01`;C>0&&(X+=` \u751F\u547D\u503C-${C}`),p>0&&(X+=` \u6700\u5927\u751F\u547D\u503C-${p}`),R.error(X)}}}static lastDiseaseEffectTime1hour=null;stopMonitoring(){this.wellnessCheckInterval&&(clearInterval(this.wellnessCheckInterval),this.wellnessCheckInterval=void 0),this.diseaseEffectsInterval&&(clearInterval(this.diseaseEffectsInterval),this.diseaseEffectsInterval=void 0)}manualHealthCheck(){this.healthCheck()}manualDiseaseEffects(){this.diseaseEffects()}manualDiseaseCheck(){return Q(this,null,function*(){yield this.randomGetSick();let e=this.customTimeService.formatTime();this.lastDiseaseCheckTime=e,this.saveWellnessTimes()})}parseTimeString(e){let[t,i]=e.split(" "),[r,o,s]=t.split("/").map(Number),[a,c,l]=i.split(":").map(Number);return new Date(r,o-1,s,a,c,l)}formatTimeFromDate(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return`${t}/${i}/${r} ${o}:${s}:${a}`}loadWellnessTimes(){try{let e=localStorage.getItem(n.WELLNESS_STORAGE_KEY);if(e){let t=JSON.parse(e);this.lastSickCheckTime=t.lastSickCheckTime||null,this.lastLifeDamageTime=t.lastLifeDamageTime||null,this.lastDiseaseCheckTime=t.lastDiseaseCheckTime||null,this.lastWellnessBoostTime=t.lastWellnessBoostTime||null,this.lastHealthBoostTime=t.lastHealthBoostTime||null,n.lastDiseaseEffectTime1hour=t.lastDiseaseEffectTime1hour||null}}catch(e){console.error("Failed to load wellness times:",e),this.lastSickCheckTime=null,this.lastLifeDamageTime=null,this.lastDiseaseCheckTime=null,this.lastWellnessBoostTime=null,this.lastHealthBoostTime=null,n.lastDiseaseEffectTime1hour=null}}saveWellnessTimes(){try{let e={lastSickCheckTime:this.lastSickCheckTime,lastLifeDamageTime:this.lastLifeDamageTime,lastDiseaseCheckTime:this.lastDiseaseCheckTime,lastWellnessBoostTime:this.lastWellnessBoostTime,lastHealthBoostTime:this.lastHealthBoostTime,lastDiseaseEffectTime1hour:n.lastDiseaseEffectTime1hour};localStorage.setItem(n.WELLNESS_STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("Failed to save wellness times:",e)}}static \u0275fac=function(t){return new(t||n)(M(fe),M(ve))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var We=class n{constructor(e){this.customTimeService=e;this.loadLightTimes(),this.initializeDayNightStatus(),this.startLightMonitoring()}isLightOn=1;isDay=1;dayNightCheckInterval;lightCheckInterval;lastLightCheckTime=null;static LIGHT_STORAGE_KEY="achick_light_times";initializeDayNightStatus(){this.checkDayAndNight()}startLightMonitoring(){this.dayNightCheckInterval=window.setInterval(()=>{this.checkDayAndNight()},3e4),this.lightCheckInterval=window.setInterval(()=>{this.checkLight()},3e4)}checkDayAndNight(){let t=this.customTimeService.getCurrentTime().getHours();t>=5&&t<18?this.isDay=1:this.isDay=0}lampToggle(){this.isLightOn=this.isLightOn===1?0:1,this.saveLightTimes();let e=this.customTimeService.getCurrentTime(),t=e.getHours(),i=e.getMinutes();if(this.isSleepTime(t,i)||this.isLightOn===1){let o=P.loadStateData();o.needLight?.isActive===1&&P.deactivateState("needLight",o)}this.manualLightCheck()}checkLight(){let e=D.loadPetStats();if(e.rare===null||e.timeStopping===!0)return;let t=this.shouldExecuteLightCheck();t.shouldExecute&&(this.executeLightLogic(e,t.penaltyCount),this.updateLastLightCheckTime(t.penaltyCount))}shouldExecuteLightCheck(){let e=this.getCurrentTimeString();if(this.lastLightCheckTime===null)return this.lastLightCheckTime=e,this.saveLightTimes(),{shouldExecute:!1,penaltyCount:0};let t=this.parseTimeString(this.lastLightCheckTime),i=this.parseTimeString(e),r=Math.floor((i.getTime()-t.getTime())/(1e3*60));return r>=30?{shouldExecute:!0,penaltyCount:Math.floor(r/30)}:{shouldExecute:!1,penaltyCount:0}}executeLightLogic(e,t){let i=this.customTimeService.getCurrentTime(),r=i.getHours(),o=i.getMinutes(),s=this.isSleepTime(r,o),a=P.loadStateData();if(s)a.needLight?.isActive===1&&P.deactivateState("needLight",a);else if(this.isLightOn===0){P.activateState("needLight",a);let c=t*2,l=t*1,d=g({},e);d.currentFriendship=Math.max(0,e.currentFriendship-c),d.currentWellness=Math.max(0,e.currentWellness-l),D.savePetStats(d),this.saveLightTimes()}else a.needLight?.isActive===1&&P.deactivateState("needLight",a)}updateLastLightCheckTime(e){if(this.lastLightCheckTime!==null){let t=this.parseTimeString(this.lastLightCheckTime),i=new Date(t.getTime()+e*30*60*1e3);this.lastLightCheckTime=this.formatTimeFromDate(i),this.saveLightTimes()}}getCurrentTimeString(){return this.customTimeService.formatTime()}parseTimeString(e){let[t,i]=e.split(" "),[r,o,s]=t.split("/").map(Number),[a,c,l]=i.split(":").map(Number);return new Date(r,o-1,s,a,c,l)}formatTimeFromDate(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return`${t}/${i}/${r} ${o}:${s}:${a}`}isSleepTime(e,t){return e===22&&t>=59||e===23||e>=0&&e<7}getLightStatus(){return{isLightOn:this.isLightOn===1,isDay:this.isDay===1,hasLight:this.isDay+this.isLightOn>0}}stopMonitoring(){this.dayNightCheckInterval&&(clearInterval(this.dayNightCheckInterval),this.dayNightCheckInterval=void 0),this.lightCheckInterval&&(clearInterval(this.lightCheckInterval),this.lightCheckInterval=void 0)}manualLightCheck(){let e=D.loadPetStats();e.rare!==null&&e.timeStopping!==!0&&this.executeLightLogic(e,0)}manualDayNightCheck(){this.checkDayAndNight()}loadLightTimes(){try{let e=localStorage.getItem(n.LIGHT_STORAGE_KEY);if(e){let t=JSON.parse(e);this.lastLightCheckTime=t.lastLightCheckTime||null,this.isLightOn=typeof t.isLightOn=="number"?t.isLightOn:1}}catch{this.lastLightCheckTime=null,this.isLightOn=1}}saveLightTimes(){let e={lastLightCheckTime:this.lastLightCheckTime,isLightOn:this.isLightOn};localStorage.setItem(n.LIGHT_STORAGE_KEY,JSON.stringify(e))}static \u0275fac=function(t){return new(t||n)(M(fe))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var Dv={EGG:[{rare:"BAD",rareName:"\u5947\u602A\u7684\u86CB",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{rare:"NORMAL",rareName:"\u5E73\u51E1\u7684\u86CB",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{rare:"SPECIAL",rareName:"\u7279\u5225\u7684\u86CB",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{rare:"SUPER_SPECIAL",rareName:"\u767C\u5149\u7684\u86CB",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0}],CHILD:[{childType:"normal",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0}],EVOLUTION:[{breedName:"mud",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"poison",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"burned",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"limbs",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"strong",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"smooth",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"carrot",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"rainbow",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"glass",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"cute",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"monster",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"cat",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"fox",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"goose",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0}],COOKED:[{breedName:"mud",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"poison",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"burned",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"limbs",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"strong",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"smooth",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"carrot",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"rainbow",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"glass",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"cute",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"monster",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"cat",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"fox",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0},{breedName:"goose",imageSource:x.character.others.unlocked,collectedCount:0,isUnlocked:0}]},Re=class{static STORAGE_KEY="achick_collection_data";static loadCollectionData(){let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{return g(g({},Dv),JSON.parse(e))}catch(t){console.error("Failed to parse collection data:",t)}return g({},Dv)}static saveCollectionData(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Failed to save collection data:",t)}}static unlockBreed(e,t,i){let r=_(g({},i),{[t]:[...i[t]]}),o=r[t].findIndex(s=>s.breedName===e);if(o!==-1){let s=t==="EVOLUTION"?x.character.evolution[e]:x.character.cooked[e];r[t][o]=_(g({},r[t][o]),{isUnlocked:1,imageSource:s||x.character.others.unlocked,collectedCount:r[t][o].collectedCount+1}),this.saveCollectionData(r)}return r}static unlockEgg(e,t){let i=_(g({},t),{EGG:[...t.EGG]}),r=i.EGG.findIndex(o=>o.rare===e);if(r!==-1){let o=x.character.egg[e.toLowerCase()]||(()=>{switch(e){case"BAD":return x.character.egg.bad;case"NORMAL":return x.character.egg.normal;case"SPECIAL":return x.character.egg.special;case"SUPER_SPECIAL":return x.character.egg.superSpecial;default:return x.character.others.unlocked}})();i.EGG[r]=_(g({},i.EGG[r]),{isUnlocked:1,imageSource:o,collectedCount:i.EGG[r].collectedCount+1}),this.saveCollectionData(i)}return i}static unlockChild(e,t){let i=_(g({},t),{CHILD:[...t.CHILD]}),r=i.CHILD.findIndex(o=>o.childType===e);if(r!==-1){let o=x.character.child.child;i.CHILD[r]=_(g({},i.CHILD[r]),{isUnlocked:1,imageSource:o,collectedCount:i.CHILD[r].collectedCount+1}),this.saveCollectionData(i)}return i}static getCollectionStats(e){let t=e.EVOLUTION.length,i=e.EVOLUTION.filter(p=>p.isUnlocked===1).length,r=t>0?i/t*100:0,o=e.COOKED.length,s=e.COOKED.filter(p=>p.isUnlocked===1).length,a=o>0?s/o*100:0,c=t+o,l=i+s,d=c>0?l/c*100:0;return{totalBreeds:c,unlockedBreeds:l,completionRate:Math.round(d*100)/100,evolutionStats:{total:t,unlocked:i,rate:Math.round(r*100)/100},cookedStats:{total:o,unlocked:s,rate:Math.round(a*100)/100}}}};var wt=class n{constructor(e,t,i,r){this.whiteTransitionService=e;this.modalService=t;this.customTimeService=i;this.coinsService=r;this.loadTouchData(),this.startResetTimer(),this.customTimeService.getCustomTime$().subscribe(()=>{setTimeout(()=>{this.resetTouchTimes()},100)})}maxTouchTime=10;isCanTouch=!0;lastTimeReset=null;touchedTimes=0;resetInterval;TOUCH_DATA_KEY="achick_touch_data";static friendshipIncreaseSubject=new _e;loadTouchData(){try{let e=localStorage.getItem(this.TOUCH_DATA_KEY);if(e){let t=JSON.parse(e);this.touchedTimes=t.touchedTimes||0,this.lastTimeReset=t.lastTimeReset||null}}catch(e){console.error("\u8F09\u5165\u64AB\u6478\u8CC7\u6599\u6642\u767C\u751F\u932F\u8AA4:",e),this.touchedTimes=0,this.lastTimeReset=null}}saveTouchData(){try{let e={touchedTimes:this.touchedTimes,lastTimeReset:this.lastTimeReset};localStorage.setItem(this.TOUCH_DATA_KEY,JSON.stringify(e))}catch(e){console.error("\u4FDD\u5B58\u64AB\u6478\u8CC7\u6599\u6642\u767C\u751F\u932F\u8AA4:",e)}}startResetTimer(){this.resetInterval=window.setInterval(()=>{this.resetTouchTimes()},3e4)}touchingEvent(){let e=D.loadPetStats(),t=P.loadStateData();if(!(e.rare===null||e.timeStopping===!0)&&t.isSleeping.isActive!==1){if(this.touchedTimes>=this.maxTouchTime){R.show(`\uFF1A\u300E\u518D\u6478\u5C31\u79BF\u4E86\u300F${e.name||"\u96FB\u5B50\u96DE"}\u66AB\u6642\u4E0D\u60F3\u7D66\u4F60\u6478`,"info"),this.isCanTouch=!1;return}if(this.isCanTouch){if(this.isCanTouch=!1,e.currentFriendship<=e.maxFriendship-.05){let r=Math.min(e.currentFriendship+.05,e.maxFriendship),o=_(g({},e),{currentFriendship:r});D.savePetStats(o),R.show(`\u8207${e.name||"\u96FB\u5B50\u96DE"}\u66F4\u89AA\u8FD1\u4E86\uFF0C\u597D\u611F\u5EA6\u4E0A\u5347\uFF01`,"success"),n.friendshipIncreaseSubject.next(.05),this.getTouchingCoin(e)}else R.show(`${e.name||"\u96FB\u5B50\u96DE"}\u7684\u597D\u611F\u5EA6\u5DF2\u9054\u4E0A\u9650\uFF01`,"info"),e.lifeCycle==="CHILD"&&this.checkEvolutionConditions(e);this.touchedTimes+=1,this.saveTouchData(),setTimeout(()=>{this.isCanTouch=!0},2e3)}}}resetTouchTimes(){let e=D.loadPetStats();if(e.rare===null){this.lastTimeReset=null;return}if(e.timeStopping===!0){this.touchedTimes>0&&(this.touchedTimes=0,this.saveTouchData());return}if(this.touchedTimes<this.maxTouchTime)return;if(this.lastTimeReset===null){this.lastTimeReset=this.getCurrentTimeString(),this.saveTouchData();return}let t=this.getCurrentTimeString(),i=this.parseTimeString(t),r=this.parseTimeString(this.lastTimeReset),o=i.getTime()-r.getTime(),s=60*60*1e3;o>=s&&(this.touchedTimes=0,this.lastTimeReset=t,this.isCanTouch=!0,this.saveTouchData())}getTouchingCoin(e){let t=Math.random()<.15,i=0;switch(e.lifeCycle){case"CHILD":i=10;break;case"EVOLUTION":i=15;break;default:i=0;break}t&&i>0&&this.coinsService.addCoins(i,!0,"\u64AB\u6478\u734E\u52F5")}getCurrentTimeString(){return this.customTimeService.formatTime()}parseTimeString(e){let[t,i]=e.split(" "),[r,o,s]=t.split("/").map(Number),[a,c,l]=i.split(":").map(Number);return new Date(r,o-1,s,a,c,l)}stopResetTimer(){this.resetInterval&&(clearInterval(this.resetInterval),this.resetInterval=void 0)}checkEvolutionConditions(e){e.lifeCycle==="CHILD"&&e.currentFriendship>70&&e.currentWellness>60&&this.hasRaisedFor120Hours(e)&&this.triggerSpecialTouchEvent(e)}hasRaisedFor120Hours(e){let t=Z.loadUserData(),i=Z.getCurrentPetRecord(t);if(!i||!i.birthTime)return!1;let r=this.parseTimeString(i.birthTime),o=this.getCurrentTimeString();return(this.parseTimeString(o).getTime()-r.getTime())/(1e3*60*60)>=120}triggerSpecialTouchEvent(e){let t=Math.random()*100;t<10?R.show(`${e.name||"\u96FB\u5B50\u96DE"}\u4F3C\u4E4E\u51FA\u73FE\u4E86\u4E9B\u8B8A\u5316...`,"info"):t<88?R.show(`${e.name||"\u96FB\u5B50\u96DE"}\u770B\u8D77\u4F86\u9577\u5927\u4E0D\u5C11`,"success"):this.triggerEvolution(e)}triggerEvolution(e){return Q(this,null,function*(){let t=e.name||"\u96FB\u5B50\u96DE";(yield this.modalService.confirm(`${t}\u767C\u5149\u4E86\uFF01`,"\u9032\u5316\u78BA\u8A8D","\u9032\u5316","\u53D6\u6D88"))&&this.executeEvolution(e)})}executeEvolution(e){this.whiteTransitionService.onWhiteReady(()=>{this.performEvolutionChanges(e)}),this.whiteTransitionService.fadeIn(),setTimeout(()=>{this.whiteTransitionService.onSceneReady()},1e3)}performEvolutionChanges(e){let t=_(g({},e),{lifeCycle:"EVOLUTION"});D.savePetStats(t);let i=Z.loadUserData(),r=this.getCurrentTimeString(),o=i.petHistory.length-1;if(o>=0&&Z.updatePetRecord(o,{evolutionTime:r},i),e.breedName){let s=Re.loadCollectionData();Re.unlockBreed(e.breedName,"EVOLUTION",s)}}resetTouchState(){this.touchedTimes=0,this.isCanTouch=!0,this.lastTimeReset=null,this.saveTouchData()}resetTouchLimit(){this.touchedTimes=0,this.isCanTouch=!0,this.lastTimeReset=null,this.saveTouchData()}manualTriggerTouchReset(){this.resetTouchTimes()}static getFriendshipIncrease$(){return n.friendshipIncreaseSubject.asObservable()}static \u0275fac=function(t){return new(t||n)(M(rt),M(ve),M(fe),M(st))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var Yt=class n{constructor(e,t){this.customTimeService=e;this.modalService=t;this.loadLowLikabilityTimes()}lastPunishTime=null;punishingInterval;static LOW_LIKABILITY_STORAGE_KEY="achick_low_likability_times";startTimer(){this.punishingInterval=window.setInterval(()=>{this.likabilityPunishing()},3e4)}likabilityPunishing(){let e=D.loadPetStats();if(e.rare===null){this.lastPunishTime=null;return}if(e.timeStopping===!0||e.currentFriendship>30||e.lifeCycle!=="CHILD"&&e.lifeCycle!=="EVOLUTION"){let c=P.loadStateData();P.deactivateState("lowLikability",c);return}let t=P.loadStateData();P.activateState("lowLikability",t);let i=this.getCurrentTimeString();if(this.lastPunishTime===null){this.lastPunishTime=i,this.saveLowLikabilityTimes();return}let r=this.parseTimeString(this.lastPunishTime),s=this.parseTimeString(i).getTime()-r.getTime(),a=20*60*1e3;if(s>=a){let c=Math.floor(s/a),l=c*2;D.updatePetStats({currentWellness:Math.max(0,e.currentWellness-l)});let d=new Date(r.getTime()+c*a);this.lastPunishTime=this.formatTimeFromDate(d),this.saveLowLikabilityTimes();let p=e.name||"\u96FB\u5B50\u96DE";R.show(`${p}\u56E0\u9577\u6642\u9593\u7F3A\u4E4F\u95DC\u611B\u800C\u8EAB\u5FC3\u9748\u53D7\u5275\uFF0C\u5065\u5EB7\u5EA6-${l}\uFF08${c}\u6B21\u61F2\u7F70\uFF09`,"warning")}this.shouldLeaveHouse()}shouldLeaveHouse(){return Q(this,null,function*(){let e=D.loadPetStats();if(e.timeStopping===!0||e.lifeCycle!=="CHILD"&&e.lifeCycle!=="EVOLUTION")return!1;if(e.currentFriendship>=10)return D.updatePetStats({isLeaving:!1}),!1;{let t=e.name||"\u96FB\u5B50\u96DE";return D.updatePetStats({isLeaving:!0,timeStopping:!0}),yield this.modalService.info(`${t}\u56E0\u70BA\u7F3A\u4E4F\u95DC\u611B\u61A4\u800C\u96E2\u5BB6\uFF0C

\u8ACB\u9EDE\u64CA\u7A97\u6236\u95DC\u6CE8\u4ED6\u6709\u6C92\u6709\u56DE\u5BB6\u3002`,"\u96E2\u5BB6\u51FA\u8D70"),!0}})}getCurrentTimeString(){return this.customTimeService.formatTime()}parseTimeString(e){let[t,i]=e.split(" "),[r,o,s]=t.split("/").map(Number),[a,c,l]=i.split(":").map(Number);return new Date(r,o-1,s,a,c,l)}formatTimeFromDate(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return`${t}/${i}/${r} ${o}:${s}:${a}`}stopTimer(){this.punishingInterval&&(clearInterval(this.punishingInterval),this.punishingInterval=void 0)}resetPunishTime(){this.lastPunishTime=null,this.saveLowLikabilityTimes()}manualTriggerLikabilityCheck(){this.likabilityPunishing()}manualTriggerLeavingCheck(){this.shouldLeaveHouse()}loadLowLikabilityTimes(){try{let e=localStorage.getItem(n.LOW_LIKABILITY_STORAGE_KEY);if(e){let t=JSON.parse(e);this.lastPunishTime=t.lastPunishTime||null}}catch(e){console.error("Failed to load low likability times:",e),this.lastPunishTime=null}}saveLowLikabilityTimes(){try{let e={lastPunishTime:this.lastPunishTime};localStorage.setItem(n.LOW_LIKABILITY_STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("Failed to save low likability times:",e)}}static \u0275fac=function(t){return new(t||n)(M(fe),M(ve))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var kn=class n{constructor(e,t,i,r){this.lifecycleService=e;this.customTimeService=t;this.modalService=i;this.injector=r;this.loadLeavingTimes(),this.startResetTimer()}maxClickTime=20;isCanClick=!0;lastTimeReset=null;clickTimes=0;resetInterval;static LEAVING_STORAGE_KEY="achick_leaving_times";startResetTimer(){this.resetInterval=window.setInterval(()=>{this.resetClickTimes()},3e4)}leavingWindowEvent(){return Q(this,null,function*(){let e=D.loadPetStats();if(e.isLeaving){if(e.isLeaving&&this.clickTimes===this.maxClickTime){let t=e.name||"\u96FB\u5B50\u96DE";R.show(`\u66AB\u6642\u6C92\u6709${t}\u7684\u6D88\u606F\uFF0C\u665A\u9EDE\u518D\u8A66\u8A66\u5427\uFF01`,"info");return}this.isCanClick=!1,yield this.observing(),this.clickTimes+=1,setTimeout(()=>{this.isCanClick=!0},2e3)}})}observing(){return Q(this,null,function*(){let e=D.loadPetStats(),t=e.name||"\u96FB\u5B50\u96DE",i=Math.random();i<.22?(this.clickTimes=0,D.updatePetStats({isLeaving:!1,timeStopping:!1,isDead:!1,currentFriendship:50,currentHealth:Math.max(50,e.currentHealth)}),this.resetAllTimersOnReturn(),yield this.modalService.info(`${t}\u56E0\u70BA\u53D7\u4E0D\u4E86\u5C0D\u4F60\u7684\u601D\u5FF5\u800C\u56DE\u5BB6\u4E86\uFF0C\u8ACB\u597D\u597D\u5C0D\u5F85\u4ED6\u54E6\uFF5E`,"\u96FB\u5B50\u96DE\u56DE\u5BB6\u4E86\uFF01")):i<.35?(this.clickTimes=0,R.show(`${t}\u5728\u5F31\u8089\u5F37\u98DF\u7684\u4E16\u754C\u4E2D\u4E0D\u5E78\u88AB\u6DD8\u6C70\u4E86\uFF0C\u611B\u8981\u53CA\u6642\u554A\uFF01`,"error"),D.updatePetStats({isLeaving:!1}),this.resetAllTimersOnReturn(),yield this.lifecycleService.doKill(`${t}\u5728\u5916\u9762\u7684\u4E16\u754C\u906D\u9047\u4E0D\u6E2C\uFF0C\u518D\u4E5F\u56DE\u4E0D\u4F86\u4E86...`)):R.show(`\u4F60\u5411\u7A97\u5916\u5C0B\u627E${t}\u7684\u8E64\u5F71\uFF0C\u537B\u9023\u9846\u86CB\u90FD\u6C92\u627E\u5230`,"warning")})}resetClickTimes(){let e=D.loadPetStats();if(e.rare===null||e.timeStopping===!0||!e.isLeaving){this.clickTimes>0&&(this.clickTimes=0);return}if(this.clickTimes<this.maxClickTime)return;if(this.lastTimeReset===null){this.lastTimeReset=this.getCurrentTimeString(),this.saveLeavingTimes();return}let t=this.getCurrentTimeString(),i=this.parseTimeString(this.lastTimeReset),o=this.parseTimeString(t).getTime()-i.getTime(),s=60*60*1e3;o>=s&&(this.clickTimes=0,this.lastTimeReset=t,this.saveLeavingTimes())}getCurrentTimeString(){return this.customTimeService.formatTime()}parseTimeString(e){let[t,i]=e.split(" "),[r,o,s]=t.split("/").map(Number),[a,c,l]=i.split(":").map(Number);return new Date(r,o-1,s,a,c,l)}getIsCanClick(){return this.isCanClick}getClickTimes(){return this.clickTimes}stopTimer(){this.resetInterval&&(clearInterval(this.resetInterval),this.resetInterval=void 0)}resetAllState(){this.clickTimes=0,this.lastTimeReset=null,this.isCanClick=!0,this.saveLeavingTimes()}resetClickLimit(){this.clickTimes=0,this.isCanClick=!0}loadLeavingTimes(){try{let e=localStorage.getItem(n.LEAVING_STORAGE_KEY);if(e){let t=JSON.parse(e);this.lastTimeReset=t.lastTimeReset||null,this.clickTimes=t.clickTimes||0}}catch(e){console.error("Failed to load leaving times:",e),this.lastTimeReset=null,this.clickTimes=0}}saveLeavingTimes(){try{let e={lastTimeReset:this.lastTimeReset,clickTimes:this.clickTimes};localStorage.setItem(n.LEAVING_STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("Failed to save leaving times:",e)}}resetAllTimersOnReturn(){let e=this.customTimeService.formatTime(),t=this.injector.get(ze,null),i=this.injector.get(We,null),r=this.injector.get(wt,null),o=this.injector.get(qt,null),s=this.injector.get(Yt,null),a=this.injector.get(_t,null);t&&(t.lastAddDirtyTime=e,t.dirtyObjects?.forEach?.(c=>{c.lastPunishTime=e}),t.saveDirtyData?.()),i&&(i.lastLightCheckTime=e,i.saveLightTimes?.()),r&&(r.lastTimeReset=e,r.touchedTimes=0,r.isCanTouch=!0,r.saveTouchData?.()),o&&(o.lastSickCheckTime=e,o.lastLifeDamageTime=e,o.lastDiseaseCheckTime=e,o.saveWellnessTimes?.()),s&&(s.lastPunishTime=e,s.saveLowLikabilityTimes?.()),a&&(a.lastHungerTime=e,a.hungerStateStartTime=e,a.lastHungerPenaltyTime=e,a.saveHungerTimes?.()),this.lastTimeReset=e,this.saveLeavingTimes()}static \u0275fac=function(t){return new(t||n)(M(Gt),M(fe),M(ve),M(vt))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qt=class n{constructor(e,t,i){this.lightService=e;this.customTimeService=t;this.modalService=i;this.startSleepMonitoring(),setTimeout(()=>{this.checkSleepTime()},1e3)}sleepCheckInterval;startSleepMonitoring(){this.sleepCheckInterval=window.setInterval(()=>{this.checkSleepTime()},3e4)}checkSleepTime(){let e=D.loadPetStats();if(e.rare===null||e.timeStopping===!0)return;let t=P.loadStateData(),i=this.customTimeService.getCurrentTime(),r=i.getHours(),o=i.getMinutes();if(this.isSleepTime(r,o)){if(t.isSleeping.isActive===1)return;t.needSleep?.isActive!==1&&P.activateState("needSleep",t)}else{if(t.isSleeping.isActive===1){P.deactivateState("isSleeping",t);let a=e.name||"\u96FB\u5B50\u96DE";R.show(`${a} \u81EA\u7136\u9192\u4F86\uFF0C\u958B\u59CB\u65B0\u7684\u4E00\u5929\uFF01`,"success")}t.needSleep?.isActive===1&&P.deactivateState("needSleep",t)}}isSleepTime(e,t){return e===22&&t>=59||e===23||e>=0&&e<7}startSleep(){let e=D.loadPetStats();if(e.rare===null||e.timeStopping===!0)return;let t=this.customTimeService.getCurrentTime(),i=t.getHours(),r=t.getMinutes();if(!this.isSleepTime(i,r))return;let o=P.loadStateData();if(o.isSleeping.isActive===1){R.show("\u96FB\u5B50\u96DE\u5DF2\u7D93\u5728\u7761\u7720\u4E2D\u4E86\u3002","info");return}let s=this.lightService.getLightStatus();if(s.hasLight){s.isDay&&s.isLightOn?R.show("\u73FE\u5728\u662F\u767D\u5929\u4E14\u96FB\u71C8\u958B\u555F\uFF0C\u8ACB\u7B49\u5F85\u5929\u9ED1\u4E26\u95DC\u71C8\u5F8C\u518D\u7761\u7720\u3002","warning"):s.isDay?R.show("\u73FE\u5728\u662F\u767D\u5929\uFF0C\u8ACB\u7B49\u5F85\u5929\u9ED1\u5F8C\u518D\u7761\u7720\u3002","warning"):s.isLightOn&&R.show("\u8ACB\u95DC\u9589\u96FB\u71C8\u5F8C\u518D\u7761\u7720\u3002","warning");return}let a=P.activateState("isSleeping",o);P.deactivateState("needSleep",a);let c=P.loadStateData()}forceWakeUpWithConfirmation(){return Q(this,null,function*(){if(P.loadStateData().isSleeping.isActive===0)return;let i=D.loadPetStats().name||"\u96FB\u5B50\u96DE",r=this.calculateNaturalWakeTime(),o=this.formatTimeString(r),s=this.customTimeService.getCurrentTime(),a=this.calculateHoursUntil7AM(s),c=a,l=Math.ceil(a/2),d=`${i} \u6B63\u5728\u7761\u7720\u4E2D\u3002

\u81EA\u7136\u9192\u4F86\u6642\u9593\uFF1A${o}

\u5F37\u5236\u559A\u9192\u5C07\u6703\uFF1A
\u2022 \u597D\u611F\u5EA6 -${c}
\u2022 \u5065\u5EB7\u5EA6 -${l}

\u78BA\u5B9A\u8981\u5F37\u5236\u559A\u9192\u55CE\uFF1F`;(yield this.modalService.confirm(d,"\u5F37\u5236\u559A\u9192\u78BA\u8A8D"))&&this.wakeUp()})}wakeUp(){let e=D.loadPetStats(),t=P.loadStateData();if(t.isSleeping.isActive===0||e.rare===null||e.isDead===!0||e.isLeaving===!0||e.timeStopping===!0||e.lifeCycle!=="CHILD"&&e.lifeCycle!=="EVOLUTION")return;P.deactivateState("isSleeping",t);let i=this.customTimeService.getCurrentTime(),r=i.getHours(),o=i.getMinutes();if(this.isSleepTime(r,o)){let s=e.name||"\u96FB\u5B50\u96DE";R.show(`${s}\u5728\u9084\u6C92\u7761\u98FD\u7684\u60C5\u6CC1\u4E0B\u88AB\u5435\u9192\u4E86\uFF0C\u5065\u5EB7\u548C\u60C5\u7DD2\u90FD\u53D7\u5230\u4E86\u5F71\u97FF\u3002`,"warning");let a=this.calculateHoursUntil7AM(i),c=a,l=Math.ceil(a/2),d=_(g({},e),{currentFriendship:Math.max(0,e.currentFriendship-c),currentWellness:Math.max(0,e.currentWellness-l)});D.savePetStats(d)}}calculateNaturalWakeTime(){let e=this.customTimeService.getCurrentTime(),t=new Date(e);return t.setHours(7,0,0,0),e.getTime()>=t.getTime()&&t.setDate(t.getDate()+1),t}formatTimeString(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0");return`${t}/${i}/${r} ${o}:${s}`}calculateHoursUntil7AM(e){let t=new Date(e),i=new Date(t);i.setHours(7,0,0,0),t.getTime()>=i.getTime()&&i.setDate(i.getDate()+1);let r=i.getTime()-t.getTime(),o=Math.ceil(r/(1e3*60*60));return Math.max(1,o)}stopMonitoring(){this.sleepCheckInterval&&(clearInterval(this.sleepCheckInterval),this.sleepCheckInterval=void 0)}manualSleepCheck(){let e=this.customTimeService.getCurrentTime();this.checkSleepTime()}getSleepStatus(){let e=P.loadStateData(),t=this.customTimeService.getCurrentTime(),i=t.getHours(),r=t.getMinutes();return{isSleeping:e.isSleeping.isActive===1,needSleep:e.needSleep.isActive===1,isSleepTime:this.isSleepTime(i,r)}}static \u0275fac=function(t){return new(t||n)(M(We),M(fe),M(ve))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var Nn=class n{constructor(e,t,i,r,o,s,a,c){this.dirtyTriggerService=e;this.lightService=t;this.leavingService=i;this.touchEventService=r;this.wellnessCheckService=o;this.lowLikabilityEventService=s;this.hungerManagerService=a;this.customTimeService=c}initializeAllLastCheckTimes(){let e=this.customTimeService.formatTime();this.dirtyTriggerService.lastAddDirtyTime=e,this.lightService.lastLightCheckTime=e,this.leavingService.lastTimeReset=e,this.touchEventService.lastTimeReset=null,this.touchEventService.touchedTimes=0,this.touchEventService.isCanTouch=!0,this.wellnessCheckService.lastSickCheckTime=e,this.wellnessCheckService.lastLifeDamageTime=e,this.wellnessCheckService.lastDiseaseCheckTime=e,this.lowLikabilityEventService.lastPunishTime=e,this.hungerManagerService.lastHungerTime=e,this.hungerManagerService.hungerStateStartTime=e,this.hungerManagerService.lastHungerPenaltyTime=e,this.forceUpdateAllLastCheckTimes()}forceUpdateAllLastCheckTimes(){this.dirtyTriggerService.saveDirtyData?.(),this.lightService.saveLightTimes?.(),this.leavingService.saveLeavingTimes?.(),this.touchEventService.saveTouchData?.(),this.wellnessCheckService.saveWellnessTimes?.(),this.lowLikabilityEventService.saveLowLikabilityTimes?.(),this.hungerManagerService.saveHungerTimes?.()}presetAllLastCheckTimes(e){let t=e||this.customTimeService.formatTime();this.dirtyTriggerService.lastAddDirtyTime=t,this.lightService.lastLightCheckTime=t,this.leavingService.lastTimeReset=t,this.touchEventService.lastTimeReset=t,this.wellnessCheckService.lastSickCheckTime=t,this.wellnessCheckService.lastLifeDamageTime=t,this.wellnessCheckService.lastDiseaseCheckTime=t,this.lowLikabilityEventService.lastPunishTime=t,this.hungerManagerService.lastHungerTime=t,this.hungerManagerService.hungerStateStartTime=t,this.hungerManagerService.lastHungerPenaltyTime=t,this.forceUpdateAllLastCheckTimes()}resetAllLastPunishmentTimes(){let e=this.customTimeService.formatTime();this.dirtyTriggerService.dirtyObjects.forEach(t=>{t.lastPunishTime=e}),this.dirtyTriggerService.saveDirtyData(),this.lowLikabilityEventService.lastPunishTime=e,this.wellnessCheckService.lastLifeDamageTime=e,this.hungerManagerService.hungerStateStartTime=e,this.hungerManagerService.lastHungerPenaltyTime=e,this.forceUpdateAllLastCheckTimes()}resetAllLastCheckTimesToNull(){this.dirtyTriggerService.lastAddDirtyTime=null,this.lightService.lastLightCheckTime=null,this.leavingService.lastTimeReset=null,this.touchEventService.lastTimeReset=null,this.touchEventService.touchedTimes=0,this.touchEventService.isCanTouch=!0,this.wellnessCheckService.lastSickCheckTime=null,this.wellnessCheckService.lastLifeDamageTime=null,this.wellnessCheckService.lastDiseaseCheckTime=null,this.lowLikabilityEventService.lastPunishTime=null,this.hungerManagerService.lastHungerTime=null,this.hungerManagerService.hungerStateStartTime=null,this.hungerManagerService.lastHungerPenaltyTime=null,this.dirtyTriggerService.dirtyObjects.forEach(e=>{delete e.lastPunishTime}),this.forceUpdateAllLastCheckTimes()}getAllLastCheckTimesStatus(){let e={dirtyTrigger_lastAddDirtyTime:{label:"\u9AD2\u6C61\u89F8\u767C - \u4E0A\u6B21\u6DFB\u52A0\u9AD2\u6C61\u6642\u9593",value:this.dirtyTriggerService.lastAddDirtyTime}};return this.dirtyTriggerService.dirtyObjects.forEach((t,i)=>{let r=`dirtyObject_${t.dirtyNo}_lastPunishTime`,o={label:`\u9AD2\u6C61\u7269\u4EF6 ${t.dirtyNo} - \u4E0A\u6B21\u61F2\u7F70\u6642\u9593`,value:t.lastPunishTime||null};e[r]=o}),Object.assign(e,{light_lastLightCheckTime:{label:"\u71C8\u5149\u670D\u52D9 - \u4E0A\u6B21\u6AA2\u67E5\u6642\u9593",value:this.lightService.lastLightCheckTime},leaving_lastTimeReset:{label:"\u96E2\u5BB6\u51FA\u8D70\u670D\u52D9 - \u4E0A\u6B21\u91CD\u7F6E\u6642\u9593",value:this.leavingService.lastTimeReset},touchEvent_lastTimeReset:{label:"\u89F8\u6478\u4E8B\u4EF6\u670D\u52D9 - \u4E0A\u6B21\u91CD\u7F6E\u6642\u9593",value:this.touchEventService.lastTimeReset},wellness_lastSickCheckTime:{label:"\u5065\u5EB7\u5EA6\u6AA2\u67E5 - \u4E0A\u6B21\u751F\u75C5\u6AA2\u67E5\u6642\u9593",value:this.wellnessCheckService.lastSickCheckTime},wellness_lastLifeDamageTime:{label:"\u5065\u5EB7\u5EA6\u6AA2\u67E5 - \u4E0A\u6B21\u751F\u547D\u50B7\u5BB3\u6642\u9593",value:this.wellnessCheckService.lastLifeDamageTime},wellness_lastDiseaseCheckTime:{label:"\u5065\u5EB7\u5EA6\u6AA2\u67E5 - \u4E0A\u6B21\u75BE\u75C5\u6AA2\u67E5\u6642\u9593",value:this.wellnessCheckService.lastDiseaseCheckTime},lowLikability_lastPunishTime:{label:"\u4F4E\u597D\u611F\u5EA6\u4E8B\u4EF6 - \u4E0A\u6B21\u61F2\u7F70\u6642\u9593",value:this.lowLikabilityEventService.lastPunishTime},hunger_lastHungerTime:{label:"\u98E2\u9913\u7BA1\u7406 - \u4E0A\u6B21\u98E2\u9913\u6642\u9593",value:this.hungerManagerService.lastHungerTime},hunger_hungerStateStartTime:{label:"\u98E2\u9913\u7BA1\u7406 - \u98E2\u9913\u72C0\u614B\u958B\u59CB\u6642\u9593",value:this.hungerManagerService.hungerStateStartTime},hunger_lastHungerPenaltyTime:{label:"\u98E2\u9913\u7BA1\u7406 - \u4E0A\u6B21\u61F2\u7F70\u6642\u9593",value:this.hungerManagerService.lastHungerPenaltyTime}}),e}static \u0275fac=function(t){return new(t||n)(M(ze),M(We),M(kn),M(wt),M(qt),M(Yt),M(_t),M(fe))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};function XI(n,e){if(n&1){let t=te();u(0,"button",10),b("click",function(){let r=w(t).$implicit,o=S();return I(o.activeTab=r.id)}),m(1),f()}if(n&2){let t=e.$implicit,i=S();F("active",i.activeTab===t.id),h(),Y(" ",t.label," ")}}function eE(n,e){if(n&1&&(u(0,"div",11)(1,"h4"),m(2,"\u96FB\u5B50\u96DE\u6578\u503C\u67E5\u770B"),f(),u(3,"div",12)(4,"div",13)(5,"label"),m(6,"\u7576\u524D\u751F\u547D\u503C:"),f(),u(7,"span"),m(8),f()(),u(9,"div",13)(10,"label"),m(11,"\u6700\u5927\u751F\u547D\u503C:"),f(),u(12,"span"),m(13),f()(),u(14,"div",13)(15,"label"),m(16,"\u7576\u524D\u597D\u611F\u5EA6:"),f(),u(17,"span"),m(18),f()(),u(19,"div",13)(20,"label"),m(21,"\u7576\u524D\u5065\u5EB7\u5EA6:"),f(),u(22,"span"),m(23),f()(),u(24,"div",13)(25,"label"),m(26,"\u7576\u524D\u98FD\u8DB3\u611F:"),f(),u(27,"span"),m(28),f()(),u(29,"div",13)(30,"label"),m(31,"\u98E2\u9913\u901F\u5EA6:"),f(),u(32,"span"),m(33),f()(),u(34,"div",13)(35,"label"),m(36,"\u96FB\u5B50\u96DE\u54C1\u7A2E:"),f(),u(37,"span"),m(38),f()(),u(39,"div",13)(40,"label"),m(41,"\u96FB\u5B50\u96DE\u7A00\u6709\u5EA6:"),f(),u(42,"span"),m(43),f()(),u(44,"div",13)(45,"label"),m(46,"\u662F\u5426\u96E2\u5BB6\u51FA\u8D70:"),f(),u(47,"span"),m(48),f()(),u(49,"div",13)(50,"label"),m(51,"\u751F\u547D\u9031\u671F:"),f(),u(52,"span"),m(53),f()(),u(54,"div",13)(55,"label"),m(56,"\u662F\u5426\u51B7\u51CD\u72C0\u614B:"),f(),u(57,"span"),m(58),f()(),u(59,"div",13)(60,"label"),m(61,"\u662F\u5426\u719F\u6210:"),f(),u(62,"span"),m(63),f()(),u(64,"div",13)(65,"label"),m(66,"\u662F\u5426\u6B7B\u4EA1:"),f(),u(67,"span"),m(68),f()()()()),n&2){let t=S();h(8),q(t.petStats.currentHealth),h(5),q(t.petStats.maxHealth),h(5),q(t.petStats.currentFriendship.toFixed(2)),h(5),q(t.petStats.currentWellness),h(5),q(t.petStats.currentHunger),h(5),q(t.petStats.hungerSpeed),h(5),q(t.petStats.breedName||"\u672A\u8A2D\u5B9A"),h(5),q(t.petStats.rare||"\u672A\u8A2D\u5B9A"),h(5),q(t.petStats.isLeaving?"\u662F":"\u5426"),h(5),q(t.petStats.lifeCycle||"\u672A\u8A2D\u5B9A"),h(5),q(t.petStats.isFreezing?"\u662F":"\u5426"),h(5),q(t.petStats.isCooked?"\u662F":"\u5426"),h(5),q(t.petStats.isDead?"\u662F":"\u5426")}}function tE(n,e){if(n&1&&(u(0,"option",30),m(1),f()),n&2){let t=e.$implicit;y("value",t.breed),h(),Tn(" ",t.breedName," (",t.breed,") ")}}function nE(n,e){if(n&1&&(u(0,"optgroup",28),N(1,tE,2,3,"option",29),f()),n&2){let t=e.$implicit,i=S(2);y("label",i.getRareTypeName(t)),h(),y("ngForOf",i.getBreedsByRare(t))}}function iE(n,e){if(n&1){let t=te();u(0,"div",11)(1,"h4"),m(2,"\u96FB\u5B50\u96DE\u6578\u503C\u8ABF\u6574"),f(),u(3,"div",14)(4,"div",15)(5,"label"),m(6,"\u751F\u547D\u503C:"),f(),u(7,"input",16),$e("ngModelChange",function(r){w(t);let o=S();return Ze(o.editableStats.currentHealth,r)||(o.editableStats.currentHealth=r),I(r)}),f()(),u(8,"div",15)(9,"label"),m(10,"\u6700\u5927\u751F\u547D\u503C:"),f(),u(11,"input",17),$e("ngModelChange",function(r){w(t);let o=S();return Ze(o.editableStats.maxHealth,r)||(o.editableStats.maxHealth=r),I(r)}),f()(),u(12,"div",15)(13,"label"),m(14,"\u597D\u611F\u5EA6:"),f(),u(15,"input",18),$e("ngModelChange",function(r){w(t);let o=S();return Ze(o.editableStats.currentFriendship,r)||(o.editableStats.currentFriendship=r),I(r)}),f()(),u(16,"div",15)(17,"label"),m(18,"\u5065\u5EB7\u5EA6:"),f(),u(19,"input",19),$e("ngModelChange",function(r){w(t);let o=S();return Ze(o.editableStats.currentWellness,r)||(o.editableStats.currentWellness=r),I(r)}),f()(),u(20,"div",15)(21,"label"),m(22,"\u98FD\u8DB3\u611F:"),f(),u(23,"input",19),$e("ngModelChange",function(r){w(t);let o=S();return Ze(o.editableStats.currentHunger,r)||(o.editableStats.currentHunger=r),I(r)}),f()(),u(24,"div",15)(25,"label"),m(26,"\u98E2\u9913\u901F\u5EA6:"),f(),u(27,"input",20),$e("ngModelChange",function(r){w(t);let o=S();return Ze(o.editableStats.hungerSpeed,r)||(o.editableStats.hungerSpeed=r),I(r)}),f()()(),u(28,"h4",21),m(29,"\u54C1\u7A2E\u8A2D\u5B9A"),f(),u(30,"div",22)(31,"select",23),$e("ngModelChange",function(r){w(t);let o=S();return Ze(o.selectedBreedName,r)||(o.selectedBreedName=r),I(r)}),u(32,"option",24),m(33,"\u9078\u64C7\u54C1\u7A2E"),f(),N(34,nE,2,2,"optgroup",25),f(),u(35,"button",26),b("click",function(){w(t);let r=S();return I(r.setBreed())}),m(36,"\u6307\u5B9A\u54C1\u7A2E"),f()(),u(37,"button",27),b("click",function(){w(t);let r=S();return I(r.applyStatsChanges())}),m(38,"\u5957\u7528\u8B8A\u66F4"),f()()}if(n&2){let t=S();h(7),Ue("ngModel",t.editableStats.currentHealth),y("max",t.editableStats.maxHealth||100),h(4),Ue("ngModel",t.editableStats.maxHealth),h(4),Ue("ngModel",t.editableStats.currentFriendship),h(4),Ue("ngModel",t.editableStats.currentWellness),h(4),Ue("ngModel",t.editableStats.currentHunger),h(4),Ue("ngModel",t.editableStats.hungerSpeed),h(4),Ue("ngModel",t.selectedBreedName),h(3),y("ngForOf",t.rareTypes),h(),y("disabled",!t.selectedBreedName)}}function rE(n,e){if(n&1){let t=te();u(0,"div",11)(1,"h4"),m(2,"\u624B\u52D5\u89F8\u767C\u5B9A\u6642\u6AA2\u67E5\u5668"),f(),u(3,"div",31)(4,"button",32),b("click",function(){w(t);let r=S();return I(r.triggerTimer("hungerDecrease"))}),m(5,"\u98FD\u8DB3\u611F\u6E1B\u5C11\u6AA2\u67E5"),f(),u(6,"button",32),b("click",function(){w(t);let r=S();return I(r.triggerTimer("hungerPenalty"))}),m(7,"\u98FD\u8DB3\u611F\u61F2\u7F70\u6263\u503C\u6AA2\u67E5"),f(),u(8,"button",32),b("click",function(){w(t);let r=S();return I(r.triggerTimer("health"))}),m(9,"\u751F\u547D\u503C\u6AA2\u67E5"),f(),u(10,"button",32),b("click",function(){w(t);let r=S();return I(r.triggerTimer("wellness"))}),m(11,"\u5065\u5EB7\u5EA6\u6AA2\u67E5"),f(),u(12,"button",32),b("click",function(){w(t);let r=S();return I(r.triggerTimer("diseaseCheck"))}),m(13,"\u75BE\u75C5\u6AA2\u67E5"),f(),u(14,"button",32),b("click",function(){w(t);let r=S();return I(r.triggerTimer("leaving"))}),m(15,"\u96E2\u5BB6\u51FA\u8D70\u6AA2\u67E5"),f(),u(16,"button",32),b("click",function(){w(t);let r=S();return I(r.triggerTimer("lowLikability"))}),m(17,"\u4F4E\u597D\u611F\u5EA6\u6263\u503C\u6AA2\u67E5"),f(),u(18,"button",32),b("click",function(){w(t);let r=S();return I(r.triggerTimer("dirty"))}),m(19,"\u9AD2\u6C59\u7522\u751F\u6AA2\u67E5"),f(),u(20,"button",32),b("click",function(){w(t);let r=S();return I(r.triggerTimer("dirtyPunish"))}),m(21,"\u9AD2\u6C59\u61F2\u7F70"),f(),u(22,"button",32),b("click",function(){w(t);let r=S();return I(r.triggerTimer("light"))}),m(23,"\u71C8\u5149\u6AA2\u67E5"),f(),u(24,"button",32),b("click",function(){w(t);let r=S();return I(r.triggerTimer("sleep"))}),m(25,"\u7761\u7720\u6AA2\u67E5"),f(),u(26,"button",32),b("click",function(){w(t);let r=S();return I(r.triggerTimer("touchReset"))}),m(27,"\u64AB\u6478\u6B21\u6578\u91CD\u7F6E\u6AA2\u67E5"),f()()()}}function oE(n,e){if(n&1){let t=te();u(0,"div",40)(1,"div",41)(2,"label"),m(3,"\u81EA\u5B9A\u7FA9\u6642\u9593:"),f(),u(4,"input",42),$e("ngModelChange",function(r){w(t);let o=S(2);return Ze(o.customTimeString,r)||(o.customTimeString=r),I(r)}),b("change",function(){w(t);let r=S(2);return I(r.updateCustomTime())}),f()(),u(5,"button",32),b("click",function(){w(t);let r=S(2);return I(r.resetToRealTime())}),m(6,"\u91CD\u7F6E\u70BA\u5BE6\u969B\u6642\u9593"),f()()}if(n&2){let t=S(2);h(4),Ue("ngModel",t.customTimeString)}}function sE(n,e){if(n&1){let t=te();u(0,"div",11)(1,"h4"),m(2,"\u81EA\u5B9A\u7FA9\u6642\u9593\u8A2D\u5B9A"),f(),u(3,"div",33)(4,"div",34)(5,"label",35)(6,"input",36),$e("ngModelChange",function(r){w(t);let o=S();return Ze(o.isCustomTimeEnabled,r)||(o.isCustomTimeEnabled=r),I(r)}),b("change",function(){w(t);let r=S();return I(r.toggleCustomTime())}),f(),A(7,"span",37),f(),u(8,"span"),m(9,"\u555F\u7528\u81EA\u5B9A\u7FA9\u6642\u9593"),f()(),N(10,oE,7,1,"div",38),u(11,"div",39)(12,"p"),m(13),f(),u(14,"p"),m(15),f()()()()}if(n&2){let t=S();h(6),Ue("ngModel",t.isCustomTimeEnabled),h(4),y("ngIf",t.isCustomTimeEnabled),h(3),Y("\u7576\u524D\u6642\u9593: ",t.getCurrentTimeDisplay(),""),h(2),Y("\u5BE6\u969B\u6642\u9593: ",t.getRealTimeDisplay(),"")}}function aE(n,e){if(n&1){let t=te();u(0,"div",11)(1,"h4"),m(2,"\u904A\u6232\u63A7\u5236"),f(),u(3,"div",43)(4,"div",44)(5,"h5"),m(6,"\u91D1\u5E63\u63A7\u5236"),f(),u(7,"div",45)(8,"input",46),$e("ngModelChange",function(r){w(t);let o=S();return Ze(o.coinsToAdd,r)||(o.coinsToAdd=r),I(r)}),f(),u(9,"button",32),b("click",function(){w(t);let r=S();return I(r.adjustCoins())}),m(10,"\u8A2D\u5B9A\u91D1\u5E63"),f()()(),u(11,"div",44)(12,"h5"),m(13,"\u9AD2\u6C59\u63A7\u5236"),f(),u(14,"div",47)(15,"button",32),b("click",function(){w(t);let r=S();return I(r.addDirtyObject())}),m(16,"\u7522\u751F\u9AD2\u6C59"),f(),u(17,"button",32),b("click",function(){w(t);let r=S();return I(r.clearAllDirty())}),m(18,"\u6E05\u9664\u6240\u6709\u9AD2\u6C59"),f(),u(19,"p"),m(20),f()()(),u(21,"div",44)(22,"h5"),m(23,"\u6B21\u6578\u9650\u5236\u91CD\u7F6E"),f(),u(24,"div",48)(25,"button",32),b("click",function(){w(t);let r=S();return I(r.resetTouchLimit())}),m(26,"\u91CD\u7F6E\u64AB\u6478\u6B21\u6578"),f(),u(27,"button",32),b("click",function(){w(t);let r=S();return I(r.resetClickLimit())}),m(28,"\u91CD\u7F6E\u7A97\u6236\u9EDE\u64CA\u6B21\u6578"),f()()()()()}if(n&2){let t=S();h(8),Ue("ngModel",t.coinsToAdd),h(12),Y("\u7576\u524D\u9AD2\u6C59\u6578\u91CF: ",t.dirtyObjects.length,"")}}var Oa=class n{constructor(e,t,i,r,o,s,a,c,l,d,p,C,v){this.coinsService=e;this.customTimeService=t;this.dirtyTriggerService=i;this.hungerManagerService=r;this.healthCheckService=o;this.wellnessCheckService=s;this.leavingService=a;this.lowLikabilityEventService=c;this.lightService=l;this.sleepService=d;this.touchEventService=p;this.lastCheckTimeManagerService=C;this.modalService=v}close=new G;isVisible=!1;activeTab="info";tabs=[{id:"info",label:"\u8CC7\u8A0A\u67E5\u770B"},{id:"adjust",label:"\u6578\u503C\u8ABF\u6574"},{id:"timers",label:"\u5B9A\u6642\u6AA2\u67E5\u5668"},{id:"time",label:"\u6642\u9593\u8A2D\u5B9A"},{id:"control",label:"\u904A\u6232\u63A7\u5236"}];petStats=D.loadPetStats();editableStats={};isCustomTimeEnabled=!1;customTimeString="";coinsToAdd=0;dirtyObjects=[];selectedBreedName="";rareTypes=["BAD","NORMAL","SPECIAL","SUPER_SPECIAL"];subscriptions=[];ngOnInit(){this.loadData(),this.subscriptions.push(D.getPetStats$().subscribe(e=>{this.petStats=e,this.loadEditableStats()})),this.subscriptions.push(this.customTimeService.getCustomTimeEnabled$().subscribe(e=>{this.isCustomTimeEnabled=e})),this.dirtyObjects=this.dirtyTriggerService.dirtyObjects}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}show(){this.isVisible=!0,this.loadData(),this.updateDirtyDisplay()}onClose(){this.isVisible=!1,this.close.emit()}loadData(){this.petStats=D.loadPetStats(),this.loadEditableStats(),this.isCustomTimeEnabled=this.customTimeService.isCustomTimeEnabled(),this.updateCustomTimeString(),this.coinsToAdd=this.coinsService.getCoins(),this.updateDirtyDisplay()}updateDirtyDisplay(){this.dirtyObjects=[...this.dirtyTriggerService.dirtyObjects]}loadEditableStats(){this.editableStats={currentHealth:this.petStats.currentHealth,maxHealth:this.petStats.maxHealth,currentFriendship:parseFloat(this.petStats.currentFriendship.toFixed(2)),currentWellness:this.petStats.currentWellness,currentHunger:this.petStats.currentHunger,hungerSpeed:this.petStats.hungerSpeed}}updateCustomTimeString(){let e=this.customTimeService.getCurrentTime(),t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0");this.customTimeString=`${t}-${i}-${r}T${o}:${s}`}applyStatsChanges(){let e=g(g({},this.petStats),this.editableStats);D.savePetStats(e)}triggerTimer(e){return Q(this,null,function*(){switch(e){case"hungerDecrease":this.hungerManagerService.manualTriggerHungerDecrease();break;case"hungerPenalty":this.hungerManagerService.manualTriggerHungerPenalty();break;case"health":yield this.healthCheckService.manualCheck();break;case"wellness":this.wellnessCheckService.manualHealthCheck(),this.wellnessCheckService.manualDiseaseEffects();break;case"diseaseCheck":yield this.wellnessCheckService.manualDiseaseCheck();break;case"leaving":this.lowLikabilityEventService.manualTriggerLeavingCheck();break;case"lowLikability":this.lowLikabilityEventService.manualTriggerLikabilityCheck();break;case"dirty":this.dirtyTriggerService.addDirtyObject?.(),this.updateDirtyDisplay();break;case"dirtyPunish":this.dirtyTriggerService.dirtyPunishing?.();break;case"light":this.lightService.manualLightCheck(),this.lightService.manualDayNightCheck();break;case"sleep":this.sleepService.manualSleepCheck();break;case"touchReset":this.touchEventService.manualTriggerTouchReset();break;default:console.warn(`Unknown timer type: ${e}`)}})}toggleCustomTime(){this.customTimeService.setCustomTimeEnabled(this.isCustomTimeEnabled),this.isCustomTimeEnabled&&this.updateCustomTimeString()}updateCustomTime(){if(this.customTimeString){let e=new Date(this.customTimeString);this.customTimeService.setCustomTime(e)}}resetToRealTime(){this.customTimeService.resetToRealTime(),this.updateCustomTimeString()}getCurrentTimeDisplay(){return this.customTimeService.formatTime()}getRealTimeDisplay(){let e=new Date,t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return`${t}/${i}/${r} ${o}:${s}:${a}`}adjustCoins(){this.coinsToAdd>=0&&this.coinsService.setCoins(this.coinsToAdd)}addDirtyObject(){if(this.dirtyTriggerService.dirtyObjects.length>=3)return;let e=()=>{let o=[];for(let s=1;s<=3;s++)o.push(s);for(let s of o)if(!this.dirtyTriggerService.dirtyObjects.some(c=>c.dirtyNo===s))return s;return 1},t=this.customTimeService.formatTime(),i={dirtyNo:e(),dirtyTime:t,lastPunishTime:t};this.dirtyTriggerService.dirtyObjects.push(i),this.dirtyTriggerService.saveDirtyData(),this.updateDirtyDisplay()}clearAllDirty(){this.dirtyTriggerService.clearAllDirtyObjects(),this.updateDirtyDisplay()}resetTouchLimit(){this.touchEventService.resetTouchLimit()}resetClickLimit(){this.leavingService.resetClickLimit()}getRareTypeName(e){return{BAD:"\u52A3\u8CEA\u54C1\u7A2E",NORMAL:"\u4E00\u822C\u54C1\u7A2E",SPECIAL:"\u7279\u6B8A\u54C1\u7A2E",SUPER_SPECIAL:"\u8D85\u7A00\u6709\u54C1\u7A2E"}[e]}getBreedsByRare(e){return wa.filter(t=>t.rare===e)}setBreed(){return Q(this,null,function*(){if(!this.selectedBreedName){yield this.modalService.alert("\u8ACB\u9078\u64C7\u8981\u6307\u5B9A\u7684\u54C1\u7A2E","\u932F\u8AA4");return}let e=gn(this.selectedBreedName);if(!e){yield this.modalService.alert("\u627E\u4E0D\u5230\u6307\u5B9A\u7684\u54C1\u7A2E\u8CC7\u6599","\u932F\u8AA4");return}let t=_(g({},this.petStats),{breedName:e.breed,rare:e.rare,lifeCycle:"EVOLUTION"});D.savePetStats(t),yield this.modalService.info(`\u5DF2\u5C07\u96FB\u5B50\u96DE\u54C1\u7A2E\u8A2D\u5B9A\u70BA\uFF1A${e.breedName}
\u7A00\u6709\u5EA6\uFF1A${e.rare}`,"\u54C1\u7A2E\u8A2D\u5B9A\u5B8C\u6210"),this.loadData()})}static \u0275fac=function(t){return new(t||n)(T(st),T(fe),T(ze),T(_t),T(ur),T(qt),T(kn),T(Yt),T(We),T(Qt),T(wt),T(Nn),T(ve))};static \u0275cmp=j({type:n,selectors:[["app-engineer-mode"]],outputs:{close:"close"},standalone:!0,features:[H],decls:16,vars:8,consts:[[1,"engineer-modal"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[1,"tabs"],["class","tab-btn",3,"active","click",4,"ngFor","ngForOf"],["class","tab-content",4,"ngIf"],[1,"tab-btn",3,"click"],[1,"tab-content"],[1,"info-grid"],[1,"info-item"],[1,"adjust-grid"],[1,"adjust-item"],["type","number","min","0",3,"ngModelChange","ngModel","max"],["type","number","min","1",3,"ngModelChange","ngModel"],["type","number","min","0","max","100","step","0.01",3,"ngModelChange","ngModel"],["type","number","min","0","max","100",3,"ngModelChange","ngModel"],["type","number","min","0","step","0.1",3,"ngModelChange","ngModel"],[2,"margin-top","30px"],[1,"breed-control"],[1,"breed-select",3,"ngModelChange","ngModel"],["value",""],[3,"label",4,"ngFor","ngForOf"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-primary",2,"margin-top","20px",3,"click"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"timer-grid"],[1,"btn","btn-secondary",3,"click"],[1,"time-settings"],[1,"toggle-group"],[1,"toggle"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"slider"],["class","time-inputs",4,"ngIf"],[1,"current-time"],[1,"time-inputs"],[1,"input-group"],["type","datetime-local",3,"ngModelChange","change","ngModel"],[1,"control-grid"],[1,"control-section"],[1,"coin-control"],["type","number","min","0","placeholder","\u91D1\u5E63\u6578\u91CF",3,"ngModelChange","ngModel"],[1,"dirty-control"],[1,"limit-control"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),b("click",function(o){return o.stopPropagation()}),u(2,"div",2)(3,"div",3)(4,"h3",4),m(5,"\u{1F527} \u5DE5\u7A0B\u5E2B\u6A21\u5F0F"),f(),u(6,"button",5),b("click",function(){return i.onClose()}),m(7,"\xD7"),f()(),u(8,"div",6)(9,"div",7),N(10,XI,2,3,"button",8),f(),N(11,eE,69,13,"div",9)(12,iE,39,10,"div",9)(13,rE,28,0,"div",9)(14,sE,16,4,"div",9)(15,aE,29,2,"div",9),f()()()()),t&2&&(F("show",i.isVisible),h(10),y("ngForOf",i.tabs),h(),y("ngIf",i.activeTab==="info"),h(),y("ngIf",i.activeTab==="adjust"),h(),y("ngIf",i.activeTab==="timers"),h(),y("ngIf",i.activeTab==="time"),h(),y("ngIf",i.activeTab==="control"))},dependencies:[U,Ne,ye,rr,mv,vv,An,uo,Ed,_a,ir,ho,fo,ci],styles:['.engineer-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;display:flex;justify-content:center;align-items:center;z-index:2000;opacity:0;visibility:hidden;transition:all .3s ease}.engineer-modal.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:800px;max-height:90vh;overflow:hidden;box-shadow:0 8px 24px #0000004d;transform:scale(.9);transition:transform .3s ease}.engineer-modal.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:scale(1)}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center;background:#f8f9fa}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.close-btn[_ngcontent-%COMP%]:hover{color:#666}.modal-body[_ngcontent-%COMP%]{padding:0;max-height:calc(90vh - 120px);overflow-y:auto}.tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #eee;background:#f8f9fa}.tab-btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;background:none;cursor:pointer;border-bottom:2px solid transparent;transition:all .2s ease}.tab-btn.active[_ngcontent-%COMP%]{border-bottom-color:#007bff;background:#fff;font-weight:600}.tab-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}.tab-content[_ngcontent-%COMP%]{padding:20px}.info-grid[_ngcontent-%COMP%], .adjust-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:20px}.info-item[_ngcontent-%COMP%], .adjust-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .adjust-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#555}.adjust-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;border-radius:4px}.timer-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px}.btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background:#1e7e34}.btn-warning[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.btn-warning[_ngcontent-%COMP%]:hover{background:#e0a800}.btn-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background:#117a8b}.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.time-settings[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.toggle-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.toggle[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:34px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.time-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;border-radius:4px}.current-time[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px;border-radius:6px;border:1px solid #e9ecef}.current-time[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-family:monospace}.control-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.control-section[_ngcontent-%COMP%]{padding:15px;border:1px solid #e9ecef;border-radius:6px}.control-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 15px;color:#495057}.coin-control[_ngcontent-%COMP%], .dirty-control[_ngcontent-%COMP%], .pet-control[_ngcontent-%COMP%], .limit-control[_ngcontent-%COMP%], .time-control[_ngcontent-%COMP%], .breed-control[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;align-items:center}.coin-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .breed-select[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;border-radius:4px;width:120px}.breed-select[_ngcontent-%COMP%]{width:200px}.status-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;display:flex;justify-content:center;align-items:center;z-index:3000;opacity:0;visibility:hidden;transition:all .3s ease}.status-modal.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.status-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:600px;max-height:80vh;overflow:hidden;box-shadow:0 8px 24px #0000004d;transform:scale(.9);transition:transform .3s ease}.status-modal.show[_ngcontent-%COMP%]   .status-dialog[_ngcontent-%COMP%]{transform:scale(1)}.status-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center;background:#f8f9fa}.status-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.status-body[_ngcontent-%COMP%]{padding:20px;max-height:60vh;overflow-y:auto}.status-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f0f0f0}.status-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.status-label[_ngcontent-%COMP%]{font-weight:600;color:#333;flex:1}.status-value[_ngcontent-%COMP%]{font-family:monospace;color:#666;background:#f8f9fa;padding:4px 8px;border-radius:4px;border:1px solid #e9ecef}']})};var cE=["engineerMode"],Pa=class n{constructor(e,t){this.coinsService=e;this.customTimeService=t}openShopModal=new G;openCollectionModal=new G;engineerMode;logoSrc=x.logo.logoHorizonDark;coinIcon=x.otherIcons.coin;storeIcon=x.otherIcons.store;collectionIcon=x.otherIcons.collection;currentTime="";currentCoins=0;timeInterval;coinsSubscription=new ge;ngOnInit(){this.updateTime(),this.timeInterval=setInterval(()=>{this.updateTime()},1e3),this.coinsSubscription=this.coinsService.coins$.subscribe(e=>{this.currentCoins=e}),this.updateLogo()}onResize(e){this.updateLogo()}updateLogo(){window.innerWidth<=576?this.logoSrc=x.logo.logoSquareDark:this.logoSrc=x.logo.logoHorizonDark}ngOnDestroy(){this.timeInterval&&clearInterval(this.timeInterval),this.coinsSubscription.unsubscribe()}updateTime(){this.currentTime=this.customTimeService.formatTime()}openStore(){this.openShopModal.emit()}openCollection(){this.openCollectionModal.emit()}onLogoDoubleClick(){this.engineerMode.show()}onEngineerModeClose(){}static \u0275fac=function(t){return new(t||n)(T(st),T(fe))};static \u0275cmp=j({type:n,selectors:[["app-header"]],viewQuery:function(t,i){if(t&1&&ke(cE,5),t&2){let r;Oe(r=Pe())&&(i.engineerMode=r.first)}},hostBindings:function(t,i){t&1&&b("resize",function(o){return i.onResize(o)},!1,Pp)},outputs:{openShopModal:"openShopModal",openCollectionModal:"openCollectionModal"},standalone:!0,features:[H],decls:21,vars:7,consts:[["engineerMode",""],[1,"header"],[1,"header-left"],["alt","Achick",1,"logo",3,"dblclick","src"],[1,"header-right"],[1,"header-top-row"],[1,"current-time","desktop-time"],[1,"header-controls"],[1,"coins"],["alt","Coins",1,"coin-icon",3,"src"],[1,"coin-amount"],[1,"functions"],[1,"function-btn",3,"click"],["alt","\u5546\u5E97",1,"function-icon",3,"src"],["alt","\u5716\u9451",1,"function-icon",3,"src"],[1,"current-time","mobile-time"],[3,"close"]],template:function(t,i){if(t&1){let r=te();u(0,"header",1)(1,"div",2)(2,"img",3),b("dblclick",function(){return w(r),I(i.onLogoDoubleClick())}),f()(),u(3,"div",4)(4,"div",5)(5,"div",6),m(6),f(),u(7,"div",7)(8,"div",8),A(9,"img",9),u(10,"span",10),m(11),f()(),u(12,"div",11)(13,"button",12),b("click",function(){return w(r),I(i.openStore())}),A(14,"img",13),f(),u(15,"button",12),b("click",function(){return w(r),I(i.openCollection())}),A(16,"img",14),f()()()(),u(17,"div",15),m(18),f()()(),u(19,"app-engineer-mode",16,0),b("close",function(){return w(r),I(i.onEngineerModeClose())}),f()}t&2&&(h(2),y("src",i.logoSrc,$),h(4),q(i.currentTime),h(3),y("src",i.coinIcon,$),h(2),q(i.currentCoins),h(3),y("src",i.storeIcon,$),h(2),y("src",i.collectionIcon,$),h(2),q(i.currentTime))},dependencies:[U,Oa],styles:[".header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;display:flex;justify-content:space-between;align-items:center;padding:5px 20px 0;z-index:1000;box-sizing:border-box}.header-left[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:40px;width:auto}.header-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:5px}.header-top-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.header-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:0 16px;background:#ffffff0d;border:2px solid rgba(255,255,255,.2);border-radius:25px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.current-time[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:500;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.mobile-time[_ngcontent-%COMP%]{display:none}.desktop-time[_ngcontent-%COMP%]{display:block}.coins[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;color:#fff;font-weight:600;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.coin-icon[_ngcontent-%COMP%]{width:36px;height:36px}.functions[_ngcontent-%COMP%]{display:flex;gap:10px}.function-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:5px;border-radius:5px;transition:background-color .3s ease}.function-btn[_ngcontent-%COMP%]:hover{background-color:#fff3}.function-icon[_ngcontent-%COMP%]{width:44px;height:44px}@media (max-width: 576px){.header-right[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end;gap:8px}.header-top-row[_ngcontent-%COMP%]{gap:15px}.desktop-time[_ngcontent-%COMP%]{display:none}.mobile-time[_ngcontent-%COMP%]{display:block;font-size:12px}.logo[_ngcontent-%COMP%]{height:42px!important}.coin-icon[_ngcontent-%COMP%]{width:32px;height:32px}.function-icon[_ngcontent-%COMP%]{width:38px;height:38px}.functions[_ngcontent-%COMP%]{gap:8px}}"]})};var Aa=class n{constructor(e,t){this.lightService=e;this.sleepService=t}openInventory=new G;lampIcon=x.otherIcons.lamp;sleepIcon=x.otherIcons.sleep;feedIcon=x.otherIcons.feed;toggleLight(){this.lightService.lampToggle()}sleep(){this.sleepService.startSleep()}feed(){this.openInventory.emit()}static \u0275fac=function(t){return new(t||n)(T(We),T(Qt))};static \u0275cmp=j({type:n,selectors:[["app-sidebar"]],outputs:{openInventory:"openInventory"},standalone:!0,features:[H],decls:8,vars:6,consts:[[1,"sidebar"],[1,"sidebar-functions"],[1,"sidebar-btn",3,"click","title"],["alt","\u96FB\u71C8",1,"sidebar-icon",3,"src"],["alt","\u7761\u7720",1,"sidebar-icon",3,"src"],["alt","\u9935\u98DF",1,"sidebar-icon",3,"src"]],template:function(t,i){t&1&&(u(0,"aside",0)(1,"div",1)(2,"button",2),b("click",function(){return i.toggleLight()}),A(3,"img",3),f(),u(4,"button",2),b("click",function(){return i.sleep()}),A(5,"img",4),f(),u(6,"button",2),b("click",function(){return i.feed()}),A(7,"img",5),f()()()),t&2&&(h(2),y("title","\u96FB\u71C8\u958B\u95DC"),h(),y("src",i.lampIcon,$),h(),y("title","\u7761\u7720"),h(),y("src",i.sleepIcon,$),h(),y("title","\u9935\u98DF"),h(),y("src",i.feedIcon,$))},dependencies:[U],styles:[".sidebar[_ngcontent-%COMP%]{position:fixed;left:20px;top:50%;transform:translateY(-50%);z-index:900}.sidebar-functions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.sidebar-btn[_ngcontent-%COMP%]{width:60px;height:60px;background:#fff0e680;border:2px solid rgba(255,255,255,.2);border-radius:50%;cursor:pointer;display:flex;justify-content:center;align-items:center;transition:all .3s ease;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);box-shadow:0 4px 8px #0003}.sidebar-btn[_ngcontent-%COMP%]:hover{background:#fff;transform:scale(1.1);box-shadow:0 6px 12px #0000004d}.sidebar-icon[_ngcontent-%COMP%]{width:40px;height:40px}"]})};var ka=class n{constructor(e){this.leavingService=e}onWindowClick(){return Q(this,null,function*(){D.loadPetStats().isLeaving&&(yield this.leavingService.leavingWindowEvent())})}static \u0275fac=function(t){return new(t||n)(T(kn))};static \u0275cmp=j({type:n,selectors:[["app-window"]],standalone:!0,features:[H],decls:2,vars:0,consts:[[1,"window-area",3,"click"],[1,"window-frame"]],template:function(t,i){t&1&&(u(0,"div",0),b("click",function(){return i.onWindowClick()}),A(1,"div",1),f())},dependencies:[U],styles:[".window-area[_ngcontent-%COMP%]{position:absolute;right:30%;top:17dvh;width:26dvh;height:30dvh;cursor:pointer;z-index:600}.window-frame[_ngcontent-%COMP%]{width:100%;height:100%;border:3px solid white;border-radius:10px;background:#fff;opacity:0;transition:all .3s ease}.window-frame[_ngcontent-%COMP%]:hover{opacity:.1}"]})};function lE(n,e){if(n&1&&(u(0,"span"),m(1),f()),n&2){let t=S();h(),Y("\u9032\u5316: ",t.petInfo.evolutionTime,"")}}function uE(n,e){if(n&1&&(u(0,"div",11),m(1),f()),n&2){let t=S();h(),Y("\u60C5\u7DD2: ",t.statusEffects.mood,"")}}function dE(n,e){if(n&1&&(u(0,"span",14),m(1),f()),n&2){let t=e.$implicit;h(),q(t)}}function fE(n,e){if(n&1&&(u(0,"div",12),N(1,dE,2,1,"span",13),f()),n&2){let t=S();h(),y("ngForOf",t.statusEffects.activeStates)}}function hE(n,e){if(n&1){let t=te();u(0,"div",15),b("click",function(){w(t);let r=S();return I(r.togglePanel())})("mouseenter",function(){w(t);let r=S();return I(r.onHover(!0))})("mouseleave",function(){w(t);let r=S();return I(r.onHover(!1))}),u(1,"div",16)(2,"div",17),m(3,"STATUS"),f(),u(4,"div",18)(5,"span",19),m(6,"\u7576\u524D\u751F\u547D\u503C"),f(),u(7,"div",20)(8,"div",21),A(9,"div",22),f(),u(10,"span",23),m(11),f()()(),u(12,"div",18)(13,"span",19),m(14,"\u7576\u524D\u597D\u611F\u5EA6"),f(),u(15,"div",20)(16,"div",21),A(17,"div",24),f(),u(18,"span",25),m(19),f()()(),u(20,"div",18)(21,"span",19),m(22,"\u7576\u524D\u98FD\u8DB3\u611F"),f(),u(23,"div",20)(24,"div",21),A(25,"div",26),f(),u(26,"span",27),m(27),f()()(),u(28,"div",18)(29,"span",19),m(30,"\u7576\u524D\u5065\u5EB7\u5EA6"),f(),u(31,"div",20)(32,"div",21),A(33,"div",28),f(),u(34,"span",29),m(35),f()()()()()}if(n&2){let t=S();F("visible",t.isPanelVisible)("hover",t.isHovering),h(9),je("width",t.getHealthPercentage(),"%"),h(2),Tn("",t.petStats.currentHealth,"/",t.petStats.maxHealth,""),h(6),je("width",t.getFriendshipPercentage(),"%"),h(2),Tn("",t.getFriendshipDisplay(),"/",t.petStats.maxFriendship,""),h(6),je("width",t.getHungerPercentage(),"%"),h(2),Tn("",t.petStats.currentHunger,"/",t.petStats.maxHunger,""),h(6),je("width",t.getWellnessPercentage(),"%"),h(2),Tn("",t.petStats.currentWellness,"/",t.petStats.maxWellness,"")}}var Na=class n{constructor(e){this.customTimeService=e}petInfo={name:"Achick",birthday:"\u672A\u77E5",hoursAlive:0};statusEffects={mood:"\u958B\u5FC3",activeStates:[]};petStats=D.loadPetStats();stateData=P.loadStateData();userData=Z.loadUserData();isPanelVisible=!1;isHovering=!1;stateUpdateInterval;petStatsSubscription;stateDataSubscription;ngOnInit(){this.loadPetData(),this.updateStateData(),this.petStatsSubscription=D.getPetStats$().subscribe(e=>{this.petStats=e,this.loadPetData(),this.updateActiveStates()}),this.stateDataSubscription=P.getStateData$().subscribe(e=>{this.stateData=e,this.updateActiveStates()}),this.stateUpdateInterval=setInterval(()=>{this.loadPetData()},1e3)}ngOnDestroy(){this.stateUpdateInterval&&clearInterval(this.stateUpdateInterval),this.petStatsSubscription&&this.petStatsSubscription.unsubscribe(),this.stateDataSubscription&&this.stateDataSubscription.unsubscribe()}loadPetData(){this.petStats=D.loadPetStats(),this.userData=Z.loadUserData(),this.petStats.name&&(this.petInfo.name=this.petStats.name);let e=Z.getCurrentPetRecord(this.userData);e&&(this.petInfo.birthday=e.birthTime?this.formatDisplayTime(e.birthTime):"\u672A\u77E5",this.petStats.lifeCycle==="EVOLUTION"&&e.evolutionTime?this.petInfo.evolutionTime=this.formatDisplayTime(e.evolutionTime):this.petInfo.evolutionTime=void 0,e.birthTime&&(this.petInfo.hoursAlive=this.calculateHoursAlive(e.birthTime)))}updateStateData(){this.stateData=P.loadStateData(),this.updateActiveStates()}updateActiveStates(){if(this.petStats.isLeaving)this.statusEffects.activeStates=["\u96E2\u5BB6\u51FA\u8D70\u4E2D"];else{let e=P.getActiveStates(this.stateData);this.statusEffects.activeStates=e.map(t=>t.stateText),this.petStats.isFreezing&&this.statusEffects.activeStates.push("\u51B7\u51CD\u72C0\u614B")}this.updateMood()}togglePanel(){this.isPanelVisible=!this.isPanelVisible,R.setStatusExpanded(this.isPanelVisible)}onHover(e){this.isPanelVisible||(this.isHovering=e)}getHealthPercentage(){return this.petStats.maxHealth===0?0:Math.round(this.petStats.currentHealth/this.petStats.maxHealth*100)}getFriendshipPercentage(){return this.petStats.maxFriendship===0?0:Math.round(this.petStats.currentFriendship/this.petStats.maxFriendship*100)}getHungerPercentage(){return this.petStats.maxHunger===0?0:Math.round(this.petStats.currentHunger/this.petStats.maxHunger*100)}getWellnessPercentage(){return this.petStats.maxWellness===0?0:Math.round(this.petStats.currentWellness/this.petStats.maxWellness*100)}getFriendshipDisplay(){return this.petStats.currentFriendship.toFixed(1)}updateMood(){if(this.petStats.isDead||this.petStats.isCooked||this.petStats.isFreezing||this.petStats.breedName===null){this.statusEffects.mood="";return}if(this.petStats.isLeaving){this.statusEffects.mood="\u5FC3\u7070\u610F\u51B7";return}if(this.stateData.needSleep?.isActive===1){this.statusEffects.mood="\u7169\u8E81";return}if(this.stateData.hungry?.isActive===1||this.stateData.weak?.isActive===1||this.stateData.lowLikability?.isActive===1){this.statusEffects.mood="\u96E3\u904E";return}this.statusEffects.mood="\u958B\u5FC3"}formatDisplayTime(e){let t=e.split(" ");if(t.length===2){let i=t[0].split("/"),r=t[1].split(":");if(i.length===3&&r.length>=2)return`${i[1]}/${i[2]} ${r[0]}:${r[1]}`}return e}calculateHoursAlive(e){try{let t=this.parseTimeString(e),r=this.customTimeService.getCurrentTime().getTime()-t.getTime();return Math.floor(r/(1e3*60*60))}catch(t){return console.error("Error calculating hours alive:",t),0}}parseTimeString(e){let t=e.split(" ");if(t.length!==2)throw new Error("Invalid time format");let i=t[0].split("/"),r=t[1].split(":");if(i.length!==3||r.length!==3)throw new Error("Invalid time format");let o=parseInt(i[0]),s=parseInt(i[1])-1,a=parseInt(i[2]),c=parseInt(r[0]),l=parseInt(r[1]),d=parseInt(r[2]);return new Date(o,s,a,c,l,d)}shouldHideActiveStates(){return this.petStats.isDead||this.petStats.isFreezing||this.petStats.isCooked}static \u0275fac=function(t){return new(t||n)(T(fe))};static \u0275cmp=j({type:n,selectors:[["app-status-bar"]],standalone:!0,features:[H],decls:16,vars:7,consts:[[1,"status-bar"],[1,"status-left"],[1,"pet-info"],[1,"pet-details"],[4,"ngIf"],[1,"status-right"],[1,"status-effects"],[1,"pet-name"],["class","mood",4,"ngIf"],["class","active-states",4,"ngIf"],["class","status-panel",3,"visible","hover","click","mouseenter","mouseleave",4,"ngIf"],[1,"mood"],[1,"active-states"],["class","state",4,"ngFor","ngForOf"],[1,"state"],[1,"status-panel",3,"click","mouseenter","mouseleave"],[1,"status-values"],[1,"status-title"],[1,"status-row"],[1,"status-label"],[1,"status-bar-row"],[1,"progress-bar"],[1,"progress-fill","health"],[1,"status-value","health"],[1,"progress-fill","friendship"],[1,"status-value","friendship"],[1,"progress-fill","hunger"],[1,"status-value","hunger"],[1,"progress-fill","wellness"],[1,"status-value","wellness"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span"),m(5),f(),N(6,lE,2,1,"span",4),u(7,"span"),m(8),f()()()(),u(9,"div",5)(10,"div",6)(11,"div",7),m(12),f(),N(13,uE,2,1,"div",8)(14,fE,2,1,"div",9),f()()(),N(15,hE,36,20,"div",10)),t&2&&(h(5),Y("\u751F\u65E5: ",i.petInfo.birthday,""),h(),y("ngIf",i.petInfo.evolutionTime),h(2),Y("\u98FC\u990A: ",i.petInfo.hoursAlive,"\u5C0F\u6642"),h(4),q(i.petInfo.name),h(),y("ngIf",i.statusEffects.mood),h(),y("ngIf",i.statusEffects.activeStates.length>0&&!i.shouldHideActiveStates()),h(),y("ngIf",i.petStats.rare!==null&&!i.petStats.isLeaving))},dependencies:[U,Ne,ye],styles:[".status-bar[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;height:92px;background:#ffffff0d;border-top:1px solid rgba(255,255,255,.2);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);color:#fff;display:flex;align-items:center;padding:0 20px;box-sizing:border-box;z-index:1000;text-shadow:0 1px 2px rgba(0,0,0,.7)}.status-left[_ngcontent-%COMP%]{flex:1}.pet-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.pet-name[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.pet-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3px;font-size:12px;opacity:.8}.status-right[_ngcontent-%COMP%]{flex:1;text-align:right}.status-effects[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.mood[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.active-states[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;justify-content:flex-end}.state[_ngcontent-%COMP%]{background:#e74c3ccc;padding:2px 8px;border-radius:12px;font-size:10px}.status-panel[_ngcontent-%COMP%]{position:fixed;bottom:120px;right:-305px;z-index:1001;transition:transform .3s ease;cursor:pointer}.status-panel.visible[_ngcontent-%COMP%]{transform:translate(-305px)}.status-panel.hover[_ngcontent-%COMP%]:not(.visible){transform:translate(-5px)}.status-values[_ngcontent-%COMP%]{width:290px;background:#fff6f3b3;border-radius:12px 0 0 12px;padding:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 4px 12px #00000026;display:flex;flex-direction:column;gap:12px}.status-title[_ngcontent-%COMP%], .status-row[_ngcontent-%COMP%]{transition:opacity .4s ease}.status-panel[_ngcontent-%COMP%]:not(.visible)   .status-title[_ngcontent-%COMP%], .status-panel[_ngcontent-%COMP%]:not(.visible)   .status-row[_ngcontent-%COMP%]{opacity:0}.status-panel.visible[_ngcontent-%COMP%]   .status-title[_ngcontent-%COMP%], .status-panel.visible[_ngcontent-%COMP%]   .status-row[_ngcontent-%COMP%]{opacity:1}.status-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#847170;text-align:center;margin-bottom:8px;letter-spacing:2px}@media (max-width: 576px){.status-panel[_ngcontent-%COMP%]{right:-305px!important}.status-panel.visible[_ngcontent-%COMP%]{transform:translate(-305px)!important}.status-panel.hover[_ngcontent-%COMP%]:not(.visible){transform:translate(-5px)!important}}.status-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0px}.status-label[_ngcontent-%COMP%]{font-size:14px;color:#847170;font-weight:500;letter-spacing:1px}.status-bar-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.progress-bar[_ngcontent-%COMP%]{flex:1;height:8px;background:#84717033;border-radius:4px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease;border-radius:4px}.progress-fill.health[_ngcontent-%COMP%]{background:#cc6e6c}.progress-fill.friendship[_ngcontent-%COMP%]{background:#f3b09f}.progress-fill.hunger[_ngcontent-%COMP%]{background:#e0a65f}.progress-fill.wellness[_ngcontent-%COMP%]{background:#b5ca89}.status-value[_ngcontent-%COMP%]{min-width:50px;font-size:14px;text-align:right;font-weight:600}.status-value.health[_ngcontent-%COMP%]{color:#cc6e6c}.status-value.friendship[_ngcontent-%COMP%]{color:#f3b09f}.status-value.hunger[_ngcontent-%COMP%]{color:#e0a65f}.status-value.wellness[_ngcontent-%COMP%]{color:#b5ca89}"]})};var Ra=class n{isVisible=!1;isFadingIn=!1;isFadingOut=!1;message="";ngOnInit(){}ngOnDestroy(){}showBirthOverlay(e,t=5e3){return new Promise(i=>{this.message=e,this.isVisible=!0,setTimeout(()=>{this.isFadingIn=!0},50),setTimeout(()=>{this.isFadingIn=!1,this.isFadingOut=!0,setTimeout(()=>{this.isVisible=!1,this.isFadingOut=!1,this.message="",i()},1e3)},t+1e3)})}isShowing(){return this.isVisible}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=j({type:n,selectors:[["app-birth-overlay"]],standalone:!0,features:[H],decls:3,vars:7,consts:[[1,"birth-overlay"],[1,"birth-message"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),m(2),f()()),t&2&&(F("active",i.isVisible)("fade-in",i.isFadingIn)("fade-out",i.isFadingOut),h(2),q(i.message))},dependencies:[U],styles:[".birth-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#fff;z-index:99998;opacity:0;visibility:hidden;display:flex;justify-content:center;align-items:center;transition:all .3s ease}.birth-overlay.active[_ngcontent-%COMP%]{visibility:visible}.birth-overlay.fade-in[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in}.birth-overlay.fade-out[_ngcontent-%COMP%]{opacity:0;transition:opacity 1s ease-out}.birth-message[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#333;text-align:center;letter-spacing:2px}@media (max-width: 576px){.birth-message[_ngcontent-%COMP%]{font-size:24px}}"]})};var Fa=class n{confirm=new G;close=new G;isVisible=!1;petName="";get isNameValid(){return this.petName.trim().length>0&&this.petName.length<=14}show(){this.isVisible=!0,this.petName="",setTimeout(()=>{let e=document.querySelector(".form-control");e&&e.focus()},100)}hide(){this.isVisible=!1,this.petName=""}onInputChange(){this.petName.length>14&&(this.petName=this.petName.substring(0,14))}onBackdropClick(e){this.onClose()}onClose(){this.hide(),this.close.emit()}onConfirm(){this.isNameValid&&(this.confirm.emit(this.petName.trim()),this.hide())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=j({type:n,selectors:[["app-naming-modal"]],outputs:{confirm:"confirm",close:"close"},standalone:!0,features:[H],decls:20,vars:5,consts:[["nameInput",""],[1,"modal-backdrop",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text","maxlength","14","placeholder","\u8F38\u5165\u96FB\u5B50\u96DE\u540D\u5B57\uFF08\u6700\u591A14\u500B\u5B57\u7B26\uFF09",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"char-count"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"]],template:function(t,i){if(t&1){let r=te();u(0,"div",1),b("click",function(s){return w(r),I(i.onBackdropClick(s))}),u(1,"div",2),b("click",function(s){return w(r),I(s.stopPropagation())}),u(2,"div",3)(3,"div",4)(4,"h5",5),m(5,"\u8ACB\u70BA\u60A8\u7684\u96FB\u5B50\u96DE\u547D\u540D"),f(),u(6,"button",6),b("click",function(){return w(r),I(i.onClose())}),u(7,"span"),m(8,"\xD7"),f()()(),u(9,"div",7)(10,"div",8)(11,"input",9,0),$e("ngModelChange",function(s){return w(r),Ze(i.petName,s)||(i.petName=s),I(s)}),b("input",function(){return w(r),I(i.onInputChange())}),f(),u(13,"div",10),m(14),f()()(),u(15,"div",11)(16,"button",12),b("click",function(){return w(r),I(i.onClose())}),m(17," \u95DC\u9589 "),f(),u(18,"button",13),b("click",function(){return w(r),I(i.onConfirm())}),m(19," \u78BA\u8A8D\u5B75\u5316 "),f()()()()()}t&2&&(F("show",i.isVisible),h(11),Ue("ngModel",i.petName),h(3),Y("",i.petName.length,"/14"),h(4),y("disabled",!i.isNameValid))},dependencies:[U,rr,An,ir,Td,ci],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#00000080;z-index:99999;display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;transition:all .3s ease}.modal-backdrop.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-dialog[_ngcontent-%COMP%]{max-width:500px;width:90%;margin:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 20px #0000004d;overflow:hidden;animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{transform:translateY(-50px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.form-group[_ngcontent-%COMP%]{position:relative}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:16px;transition:border-color .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}.char-count[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:-20px;font-size:12px;color:#666}.modal-footer[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:10px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.btn-primary[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}@media (max-width: 576px){.modal-dialog[_ngcontent-%COMP%]{width:95%;margin:10px}.modal-title[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{font-size:16px}}"]})};function pE(n,e){if(n&1&&(u(0,"div",2),m(1),f()),n&2){let t=e.$implicit;je("left",t.x,"px")("top",t.y,"px"),F("visible",t.visible),h(),Y(" +",t.amount," ")}}var La=class n{activeAnimations=[];animationCounter=0;ngOnInit(){}showCoinAnimation(e,t,i){let r={id:`coin-${++this.animationCounter}`,amount:e,x:t||window.innerWidth/2,y:i||window.innerHeight/2,visible:!1};this.activeAnimations.push(r),setTimeout(()=>{r.visible=!0},50),setTimeout(()=>{this.removeAnimation(r.id)},2500)}removeAnimation(e){this.activeAnimations=this.activeAnimations.filter(t=>t.id!==e)}clearAllAnimations(){this.activeAnimations=[]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=j({type:n,selectors:[["app-coin-animation"]],standalone:!0,features:[H],decls:2,vars:1,consts:[[1,"coin-animations-container"],["class","coin-animation",3,"left","top","visible",4,"ngFor","ngForOf"],[1,"coin-animation"]],template:function(t,i){t&1&&(u(0,"div",0),N(1,pE,2,7,"div",1),f()),t&2&&(h(),y("ngForOf",i.activeAnimations))},dependencies:[U,Ne],styles:[".coin-animations-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:95000}.coin-animation[_ngcontent-%COMP%]{position:absolute;font-size:24px;font-weight:700;color:gold;text-shadow:2px 2px 4px rgba(0,0,0,.5);opacity:0;transform:translateY(0);transition:all 2s ease-out;pointer-events:none}.coin-animation.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(-20px)}.coin-animation.visible[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_coinFloat 2s ease-out forwards}@keyframes _ngcontent-%COMP%_coinFloat{0%{opacity:1;transform:translateY(0) scale(1)}50%{opacity:1;transform:translateY(-10px) scale(1.1)}to{opacity:0;transform:translateY(-20px) scale(.8)}}@media (max-width: 576px){.coin-animation[_ngcontent-%COMP%]{font-size:20px}}"]})};var Va=class n{confirm=new G;close=new G;isVisible=!1;show(){this.isVisible=!0}onClose(){this.isVisible=!1,this.close.emit()}onConfirm(){this.isVisible=!1,this.confirm.emit()}onBackdropClick(e){e.target===e.currentTarget&&this.onClose()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=j({type:n,selectors:[["app-unfreeze-modal"]],outputs:{confirm:"confirm",close:"close"},standalone:!0,features:[H],decls:22,vars:2,consts:[[1,"modal-backdrop",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[1,"unfreeze-message"],[1,"freeze-icon"],[1,"message-text"],[1,"confirm-text"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,i){t&1&&(u(0,"div",0),b("click",function(o){return i.onBackdropClick(o)}),u(1,"div",1),b("click",function(o){return o.stopPropagation()}),u(2,"div",2)(3,"div",3)(4,"h5",4),m(5,"\u89E3\u9664\u51B7\u51CD"),f(),u(6,"button",5),b("click",function(){return i.onClose()}),u(7,"span"),m(8,"\xD7"),f()()(),u(9,"div",6)(10,"div",7)(11,"div",8),m(12,"\u2744\uFE0F"),f(),u(13,"p",9),m(14,"\u60A8\u7684\u96FB\u5B50\u96DE\u76EE\u524D\u8655\u65BC\u51B7\u51CD\u72C0\u614B\u3002"),f(),u(15,"p",10),m(16,"\u662F\u5426\u8981\u89E3\u9664\u51B7\u51CD\u72C0\u614B\uFF1F"),f()()(),u(17,"div",11)(18,"button",12),b("click",function(){return i.onClose()}),m(19," \u53D6\u6D88 "),f(),u(20,"button",13),b("click",function(){return i.onConfirm()}),m(21," \u89E3\u9664\u51B7\u51CD "),f()()()()()),t&2&&F("show",i.isVisible)},dependencies:[U],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1200;opacity:0;visibility:hidden;transition:all .3s ease}.modal-backdrop.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:400px;box-shadow:0 8px 24px #0000004d;transform:scale(.9);transition:transform .3s ease}.modal-backdrop.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:scale(1)}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{padding:20px 20px 15px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999;transition:color .2s ease;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.close-btn[_ngcontent-%COMP%]:hover{color:#666}.modal-body[_ngcontent-%COMP%]{padding:20px}.unfreeze-message[_ngcontent-%COMP%]{text-align:center}.freeze-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;display:block}.message-text[_ngcontent-%COMP%]{font-size:16px;color:#495057;margin-bottom:12px;line-height:1.5}.confirm-text[_ngcontent-%COMP%]{font-size:16px;color:#333;font-weight:500;margin-bottom:0;line-height:1.5}.modal-footer[_ngcontent-%COMP%]{padding:15px 20px 20px;display:flex;justify-content:flex-end;gap:12px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;border:none;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease;min-width:80px}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#0056b3}"]})};var ja=class n{moodIcon1=x.moodStatus.loving;moodIcon2=x.moodStatus.loving;moodIcon3=x.moodStatus.loving;isVisible=!1;touchEventSubscription;ngOnInit(){this.touchEventSubscription=wt.getFriendshipIncrease$().subscribe(e=>{e>0&&this.showMoodStatus()})}ngOnDestroy(){this.touchEventSubscription&&this.touchEventSubscription.unsubscribe(),this.animationTimeout&&clearTimeout(this.animationTimeout)}animationTimeout;showMoodStatus(){this.animationTimeout&&clearTimeout(this.animationTimeout),this.isVisible=!1,setTimeout(()=>{this.isVisible=!0},10),this.animationTimeout=window.setTimeout(()=>{this.isVisible=!1},1e3)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=j({type:n,selectors:[["app-mood-status"]],standalone:!0,features:[H],decls:7,vars:5,consts:[[1,"mood-status-container"],[1,"mood-icon","mood-icon-1"],["alt","Mood 1",3,"src"],[1,"mood-icon","mood-icon-2"],["alt","Mood 2",3,"src"],[1,"mood-icon","mood-icon-3"],["alt","Mood 3",3,"src"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),A(2,"img",2),f(),u(3,"div",3),A(4,"img",4),f(),u(5,"div",5),A(6,"img",6),f()()),t&2&&(F("visible",i.isVisible),h(2),y("src",i.moodIcon1,$),h(2),y("src",i.moodIcon2,$),h(2),y("src",i.moodIcon3,$))},dependencies:[U],styles:[".mood-status-container[_ngcontent-%COMP%]{position:absolute;top:0;right:0;opacity:0;transform:translateY(60px);pointer-events:none;z-index:750}.mood-status-container.visible[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_moodFloat 1s linear forwards}@keyframes _ngcontent-%COMP%_moodFloat{0%{opacity:0;transform:translateY(40px)}50%{opacity:1;transform:translateY(5px)}60%{opacity:1;transform:translateY(-2px)}to{opacity:0;transform:translateY(-30px)}}.mood-icon[_ngcontent-%COMP%]{position:absolute;width:45px;height:45px}.mood-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.mood-icon-1[_ngcontent-%COMP%]{top:20px;right:-30px;animation:_ngcontent-%COMP%_blink1 .5s ease-in-out infinite alternate}.mood-icon-2[_ngcontent-%COMP%]{top:-30px;right:-60px;animation:_ngcontent-%COMP%_blink2 1s ease-in-out infinite alternate}.mood-icon-3[_ngcontent-%COMP%]{top:40px;right:-90px;animation:_ngcontent-%COMP%_blink3 1.5s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_blink1{0%{transform:scale(.5)}to{transform:scale(.6)}}@keyframes _ngcontent-%COMP%_blink2{0%{transform:scale(.9)}to{transform:scale(1.2)}}@keyframes _ngcontent-%COMP%_blink3{0%{transform:scale(.7)}to{transform:scale(1)}}"]})};var fr=class n{constructor(e,t,i,r,o){this.hungerManagerService=e;this.dirtyTriggerService=t;this.lowLikabilityEventService=i;this.wellnessCheckService=r;this.healthCheckService=o}checkInterval;isRunning=!1;startUnifiedCheck(){this.isRunning||(this.isRunning=!0,this.checkInterval=window.setInterval(()=>{this.executeAllChecks()},3e4))}stopUnifiedCheck(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=void 0),this.isRunning=!1}executeAllChecks(){return Q(this,null,function*(){if(D.loadPetStats().rare!==null)try{this.hungerManagerService.decreaseHunger(),this.hungerManagerService.checkHungerState(),this.dirtyTriggerService.addDirtyObject(),this.dirtyTriggerService.dirtyPunishing(),this.lowLikabilityEventService.likabilityPunishing(),yield this.wellnessCheckService.healthCheck(),this.wellnessCheckService.diseaseEffects(),yield this.healthCheckService.checkLifeValue()}catch(t){console.error("Error executing unified stats check:",t)}})}isCheckRunning(){return this.isRunning}resetAllTimers(){console.log("Timer reset should be handled by LeavingService.resetAllTimersOnReturn()")}static \u0275fac=function(t){return new(t||n)(M(_t),M(ze),M(Yt),M(qt),M(ur))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ha=class n{constructor(e,t,i,r,o){this.customTimeService=e;this.lastCheckTimeManagerService=t;this.unifiedStatsCheckerService=i;this.logService=r;this.coinsService=o}rare=null;breed=null;generateRare(){let e=Math.random()*100;e<15?this.rare="BAD":e<85?this.rare="NORMAL":e<95?this.rare="SPECIAL":this.rare="SUPER_SPECIAL"}selectBreed(){if(!this.rare)return;let e=Cv(this.rare);if(e.length===0)return;let t=Math.floor(Math.random()*e.length),i=e[t];this.breed=i.breed}getHatchingCoins(e){switch(e){case"BAD":return 5;case"NORMAL":return 10;case"SPECIAL":return 30;case"SUPER_SPECIAL":return 80;default:return 0}}getMaxHealth(e){switch(e){case"BAD":return Math.floor(Math.random()*31)+60;case"NORMAL":return 100;case"SPECIAL":return 110;case"SUPER_SPECIAL":return 120;default:return 100}}getHungerSpeed(e){switch(e){case"BAD":return 10;case"NORMAL":return 6;case"SPECIAL":return 5;case"SUPER_SPECIAL":return 4;default:return 6}}setPresetRare(e){this.rare=e}generateNewPetBreed(e,t){if(t?this.rare=t:this.generateRare(),this.selectBreed(),!this.rare)throw new Error("Failed to generate rare");let i=null;this.breed&&this.rare&&(i=this.breed);let r=this.getHatchingCoins(this.rare),o=this.getMaxHealth(this.rare),s=this.getHungerSpeed(this.rare);r>0&&this.coinsService.addCoins(r,!0,"\u5B75\u5316\u734E\u52F5");let a={rare:this.rare,lifeCycle:"EGG",breedName:i||null,name:e,currentHealth:o,maxHealth:o,currentHunger:100,maxHunger:100,hungerSpeed:s,currentFriendship:50,maxFriendship:100,currentWellness:50,maxWellness:100,timeStopping:!1,isLeaving:!1,isFreezing:!1,isDead:!1,isCooked:!1};return this.customTimeService.forceResetToRealTime(),this.lastCheckTimeManagerService.initializeAllLastCheckTimes(),this.logService.clearLogs(),D.savePetStats(a),setTimeout(()=>{this.unifiedStatsCheckerService.executeAllChecks()},100),a}getCurrentRare(){return this.rare}getCurrentBreed(){return this.breed}reset(){this.rare=null,this.breed=null}static \u0275fac=function(t){return new(t||n)(M(fe),M(Nn),M(fr),M(ot),M(st))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var gE=["birthOverlay"],vE=["namingModal"],yE=["coinAnimation"],CE=["unfreezeModal"];function bE(n,e){if(n&1){let t=te();u(0,"div",6)(1,"div",7)(2,"div",8)(3,"button",9),b("click",function(){w(t);let r=S();return I(r.onBirthClick())}),m(4," \u9EDE\u64CA\u6309\u9215\u51FA\u751F "),f()()()()}}function SE(n,e){if(n&1&&A(0,"img",18),n&2){let t=S(3);y("src",t.freezingIcon,$)}}function DE(n,e){if(n&1&&(u(0,"div",16),N(1,SE,1,1,"img",17),f()),n&2){let t=S(2);h(),y("ngIf",t.isFreezing)}}function _E(n,e){if(n&1){let t=te();u(0,"div",6)(1,"div",10),b("mousedown",function(r){w(t);let o=S();return I(o.onDragStart(r))})("touchstart",function(r){w(t);let o=S();return I(o.onDragStart(r))}),u(2,"div",11),A(3,"div",12),u(4,"div",13),A(5,"img",14),N(6,DE,2,1,"div",15),f()(),A(7,"app-mood-status"),f()()}if(n&2){let t=S();h(),je("left",t.characterPosition.left)("top",t.characterPosition.top),h(4),y("src",t.characterImage,$)("alt",t.characterName),h(),y("ngIf",t.hasEffects)}}var Ba=class n{constructor(e,t,i,r,o,s){this.rareBreedService=e;this.touchEventService=t;this.lifecycleService=i;this.sleepService=r;this.modalService=o;this.whiteTransitionService=s;this.petStats=D.loadPetStats()}birthOverlay;namingModal;coinAnimation;unfreezeModal;characterImage="";characterName="";isFreezing=!1;freezingIcon=x.character.others.isFreezing;isCharacterVisible=!1;showBirthButton=!1;showNamingModal=!1;isSleeping=!1;characterPosition={left:"40%",top:"35dvh"};isDragging=!1;dragStartX=0;dragStartY=0;startLeft=0;startTop=0;hasMoved=!1;dragThreshold=5;petStats;petStatsSubscription;ngOnInit(){this.loadCharacterPosition(),this.setCharacterImage(),this.updateSleepingState(),this.petStatsSubscription=D.getPetStats$().subscribe(e=>{let t=this.petStats;this.petStats=e,t&&!t.isDead&&e.isDead&&this.resetCharacterPositionToDefault(),t&&!t.isCooked&&e.isCooked&&this.resetCharacterPositionToDefault(),this.setCharacterImage(),this.updateSleepingState()}),setInterval(()=>{this.updateSleepingState()},1e3),document.addEventListener("mousemove",this.onDragMove.bind(this),{passive:!1}),document.addEventListener("mouseup",this.onDragEnd.bind(this)),document.addEventListener("touchmove",this.onDragMove.bind(this),{passive:!1}),document.addEventListener("touchend",this.onDragEnd.bind(this))}ngOnDestroy(){this.petStatsSubscription&&this.petStatsSubscription.unsubscribe(),this.touchEventService.stopResetTimer(),document.removeEventListener("mousemove",this.onDragMove.bind(this),{passive:!1}),document.removeEventListener("mouseup",this.onDragEnd.bind(this)),document.removeEventListener("touchmove",this.onDragMove.bind(this),{passive:!1}),document.removeEventListener("touchend",this.onDragEnd.bind(this))}get hasEffects(){return this.isFreezing}setCharacterImage(){let{lifeCycle:e,rare:t,breedName:i}=this.petStats;if(t===null){this.isCharacterVisible=!1,this.showBirthButton=!0;return}if(this.showBirthButton=!1,e===null){this.isCharacterVisible=!1;return}if(this.isCharacterVisible=!this.petStats.isLeaving,this.petStats.isCooked&&this.petStats.breedName){let r=gn(this.petStats.breedName);if(r){this.characterImage=this.getCookedImage(r.breed),this.characterName=`Cooked - ${r.breedName}`;return}}if(this.petStats.isDead){this.characterImage=x.character.dead.dead,this.characterName="Dead";return}if(this.petStats.isFreezing){this.characterImage=x.character.others.isFreezing,this.characterName="Frozen";return}if(t&&e==="EGG"){this.characterImage=this.getEggImage(t),this.characterName="Egg";return}if(e==="CHILD"){this.characterImage=x.character.child.child,this.characterName="Child";return}if(i&&e==="EVOLUTION"){let r=gn(i);if(r){this.characterImage=this.getEvolutionImage(r.breed),this.characterName=r.breedName||`Evolution - ${r.breed}`;return}}this.characterImage=x.character.child.child,this.characterName="Unknown"}getEggImage(e){switch(e){case"BAD":return x.character.egg.bad;case"SPECIAL":return x.character.egg.special;case"SUPER_SPECIAL":return x.character.egg.superSpecial;case"NORMAL":default:return x.character.egg.normal}}getEvolutionImage(e){let t=x.character.evolution;return t[e]||t.cute}getCookedImage(e){let t=x.character.cooked;return t[e]||t.cute}onBirthClick(){return Q(this,null,function*(){try{this.rareBreedService.reset();let e=Math.random()*100,t;e<15?t="BAD":e<85?t="NORMAL":e<95?t="SPECIAL":t="SUPER_SPECIAL";let i=this.getEggName(t);yield this.modalService.info(`\u4F60\u7372\u5F97\u4E86 ${i}`,"\u6210\u529F\u51FA\u751F"),this.whiteTransitionService.fadeIn(),setTimeout(()=>{let r=this.rareBreedService.generateNewPetBreed("",t),o=_(g({},r),{name:null,lifeCycle:"EGG"});D.savePetStats(o);let s=Re.loadCollectionData();Re.unlockEgg(t,s);let a=Z.loadUserData(),c={petName:null,birthTime:Z.formatDateTime(new Date),evolutionTime:null,deathTime:null};Z.addPetRecord(c,a),this.showBirthButton=!1,this.whiteTransitionService.fadeOut()},500)}catch(e){console.error("Birth process failed:",e)}})}onNameConfirmed(e){return Q(this,null,function*(){try{yield this.modalService.info(`\u557E\u557E\uFF5E${e}\u51FA\u751F\u4E86\uFF01`,"\u6210\u529F\u5B75\u5316"),this.whiteTransitionService.fadeIn(),setTimeout(()=>{let t=D.loadPetStats(),i=_(g({},t),{name:e,lifeCycle:"CHILD",timeStopping:!1});D.savePetStats(i);let r=Re.loadCollectionData();Re.unlockChild("normal",r);let o=Z.loadUserData(),s=o.petHistory.length-1;s>=0&&Z.updatePetRecord(s,{petName:e},o);let a=this.getHatchingCoins(i.rare);this.showCoinAnimation(a),this.whiteTransitionService.fadeOut()},500)}catch(t){console.error("Hatching process failed:",t)}})}onNamingModalClose(){}showCoinAnimation(e){let t=window.innerWidth/2,i=window.innerHeight*.3;this.coinAnimation.showCoinAnimation(e,t,i)}getHatchingCoins(e){switch(e){case"BAD":return 5;case"NORMAL":return 10;case"SPECIAL":return 30;case"SUPER_SPECIAL":return 80;default:return 0}}getEggName(e){switch(e){case"BAD":return"\u5947\u602A\u7684\u86CB";case"NORMAL":return"\u5E73\u51E1\u7684\u86CB";case"SPECIAL":return"\u7279\u5225\u7684\u86CB";case"SUPER_SPECIAL":return"\u767C\u5149\u7684\u86CB";default:return"\u672A\u77E5\u7684\u86CB"}}updateSleepingState(){let e=P.loadStateData();this.isSleeping=e.isSleeping.isActive===1}onUnfreezeConfirm(){let e=_(g({},this.petStats),{isFreezing:!1,timeStopping:!1});D.savePetStats(e),this.petStats=e,this.setCharacterImage()}onUnfreezeModalClose(){}loadCharacterPosition(){let e=P.loadStateData();this.characterPosition=e.characterPosition}resetCharacterPositionToDefault(){P.resetCharacterPositionToDefault(),this.loadCharacterPosition()}onDragStart(e){let t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;this.isDragging=!0,this.hasMoved=!1,this.dragStartX=t,this.dragStartY=i;let r=window.innerWidth,o=window.innerHeight;this.startLeft=parseFloat(this.characterPosition.left)*r/100,this.startTop=parseFloat(this.characterPosition.top)*o/100,e.preventDefault(),e.stopPropagation()}onDragMove(e){if(!this.isDragging)return;let t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,r=t-this.dragStartX,o=i-this.dragStartY,s=Math.sqrt(r*r+o*o);if(!this.hasMoved&&s>this.dragThreshold){this.hasMoved=!0;let a=document.querySelector(".character-positioning-frame"),c=document.querySelector(".character-area");a?.classList.add("dragging"),c?.classList.add("dragging")}if(this.hasMoved){let a=this.startLeft+r,c=this.startTop+o,l=window.innerWidth,d=window.innerHeight,p=Math.max(0,Math.min(a,l-100)),C=Math.max(0,Math.min(c,d-100)),v=p/l*100,E=C/d*100;this.characterPosition={left:`${v}%`,top:`${E}%`}}e.preventDefault(),e.stopPropagation()}onDragEnd(e){if(this.isDragging){if(this.isDragging=!1,this.hasMoved){let t=document.querySelector(".character-positioning-frame"),i=document.querySelector(".character-area");t?.classList.remove("dragging"),i?.classList.remove("dragging"),P.updateCharacterPosition(this.characterPosition)}else this.handleCharacterClick();this.hasMoved=!1}}handleCharacterClick(){if(this.petStats.isDead||this.petStats.isCooked){this.lifecycleService.showDeathConfirmDialog();return}if(this.petStats.isFreezing){this.unfreezeModal.show();return}if(this.petStats.lifeCycle==="EGG"&&this.petStats.name===null){this.namingModal.show();return}this.touchEventService.touchingEvent()}static \u0275fac=function(t){return new(t||n)(T(Ha),T(wt),T(Gt),T(Qt),T(ve),T(rt))};static \u0275cmp=j({type:n,selectors:[["app-character"]],viewQuery:function(t,i){if(t&1&&(ke(gE,5),ke(vE,5),ke(yE,5),ke(CE,5)),t&2){let r;Oe(r=Pe())&&(i.birthOverlay=r.first),Oe(r=Pe())&&(i.namingModal=r.first),Oe(r=Pe())&&(i.coinAnimation=r.first),Oe(r=Pe())&&(i.unfreezeModal=r.first)}},standalone:!0,features:[H],decls:10,vars:2,consts:[["birthOverlay",""],["namingModal",""],["coinAnimation",""],["unfreezeModal",""],["class","character-area-wrapper",4,"ngIf"],[3,"confirm","close"],[1,"character-area-wrapper"],[1,"birth-area-centered"],[1,"birth-button-container"],[1,"birth-button",3,"click"],[1,"character-positioning-frame",3,"mousedown","touchstart"],[1,"character-area"],[1,"character-shadow"],[1,"character-container"],[1,"character-image",3,"src","alt"],["class","character-effects",4,"ngIf"],[1,"character-effects"],["alt","Freezing","class","effect-icon",3,"src",4,"ngIf"],["alt","Freezing",1,"effect-icon",3,"src"]],template:function(t,i){if(t&1){let r=te();N(0,bE,5,0,"div",4)(1,_E,8,7,"div",4),A(2,"app-birth-overlay",null,0),u(4,"app-naming-modal",5,1),b("confirm",function(s){return w(r),I(i.onNameConfirmed(s))})("close",function(){return w(r),I(i.onNamingModalClose())}),f(),A(6,"app-coin-animation",null,2),u(8,"app-unfreeze-modal",5,3),b("confirm",function(){return w(r),I(i.onUnfreezeConfirm())})("close",function(){return w(r),I(i.onUnfreezeModalClose())}),f()}t&2&&(y("ngIf",i.showBirthButton),h(),y("ngIf",i.isCharacterVisible&&!i.isSleeping))},dependencies:[U,ye,Ra,Fa,La,Va,ja],styles:[".character-area-wrapper[_ngcontent-%COMP%]{width:100%;height:100%}.character-positioning-frame[_ngcontent-%COMP%]{position:absolute;z-index:700;transition:none}.character-positioning-frame.dragging[_ngcontent-%COMP%]{cursor:grabbing}.character-area[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;transition:none}.character-area[_ngcontent-%COMP%]:not(.dragging){animation:_ngcontent-%COMP%_characterFloat 3s ease-in-out infinite}.character-area.dragging[_ngcontent-%COMP%]{animation:none}.birth-area-centered[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:700;display:flex;justify-content:center;align-items:center}@keyframes _ngcontent-%COMP%_characterFloat{0%,to{transform:translate(0)}50%{transform:translateY(-15px)}}.birth-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:50dvh;width:auto}.birth-button[_ngcontent-%COMP%]{background:#ffffffe6;border:2px solid rgba(132,113,112,.6);border-radius:12px;padding:16px 32px;font-size:18px;font-weight:600;color:#847170;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #0003;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);text-shadow:none}.birth-button[_ngcontent-%COMP%]:hover{background:#fff;border-color:#847170cc;transform:translateY(-2px);box-shadow:0 6px 16px #0000004d}.birth-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.character-shadow[_ngcontent-%COMP%]{position:absolute;bottom:0dvh;left:50%;transform:translate(-50%);width:12dvh;height:3dvh;background:radial-gradient(ellipse,rgba(0,0,0,.8) 0%,rgba(0,0,0,.5) 50%,transparent 100%);border-radius:50%;z-index:1;filter:blur(.8dvh)}.character-area[_ngcontent-%COMP%]:not(.dragging)   .character-shadow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shadowFloat 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_shadowFloat{0%,to{transform:translate(-50%) translateY(0) scale(1);opacity:.7;filter:blur(.8dvh)}50%{transform:translate(-50%) translateY(.8dvh) scale(.8);opacity:.4;filter:blur(1dvh)}}.character-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.character-image[_ngcontent-%COMP%]{width:auto;height:50dvh;object-fit:contain;cursor:pointer;z-index:2;position:relative}.character-effects[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-10px}.effect-icon[_ngcontent-%COMP%]{width:1.5dvh;height:1.5dvh}"]})};function wE(n,e){if(n&1&&(u(0,"div",4),A(1,"img",5),f()),n&2){let t=S();h(),y("src",t.sleepIcon,$)}}var Ua=class n{constructor(e,t){this.lightService=e;this.sleepService=t}bedImage=x.bed.bedEmptyLight;sleepIcon=x.moodStatus.isSleeping;isSleeping=!1;bedPosition={left:"19%",top:"53dvh"};isDragging=!1;hasMoved=!1;dragStartX=0;dragStartY=0;startLeft=0;startTop=0;DRAG_THRESHOLD=5;stateSubscription;boundOnDragMove=this.onDragMove.bind(this);boundOnDragEnd=this.onDragEnd.bind(this);ngOnInit(){this.loadBedPosition(),this.updateBedImage(),this.stateSubscription=new ge,this.startStateMonitoring(),document.addEventListener("mousemove",this.boundOnDragMove,{passive:!1}),document.addEventListener("mouseup",this.boundOnDragEnd),document.addEventListener("touchmove",this.boundOnDragMove,{passive:!1}),document.addEventListener("touchend",this.boundOnDragEnd)}ngOnDestroy(){this.stateSubscription&&this.stateSubscription.unsubscribe(),document.removeEventListener("mousemove",this.boundOnDragMove),document.removeEventListener("mouseup",this.boundOnDragEnd),document.removeEventListener("touchmove",this.boundOnDragMove),document.removeEventListener("touchend",this.boundOnDragEnd)}startStateMonitoring(){let e=setInterval(()=>{this.updateBedImage(),this.checkPositionReset()},1e3);this.stateSubscription?.add(()=>clearInterval(e))}checkPositionReset(){let e=P.loadStateData();(e.bedPosition.left!==this.bedPosition.left||e.bedPosition.top!==this.bedPosition.top)&&(this.bedPosition=e.bedPosition)}updateBedImage(){let e=P.loadStateData(),t=this.lightService.isLightOn,i=e.isSleeping.isActive;this.isSleeping=i===1,t===1&&i===1?this.bedImage=x.bed.bedIsSleepingLight:t===0&&i===1?this.bedImage=x.bed.bedIsSleepingDark:t===1&&i===0?this.bedImage=x.bed.bedEmptyLight:t===0&&i===0&&(this.bedImage=x.bed.bedEmptyDark)}loadBedPosition(){let e=P.loadStateData();this.bedPosition=e.bedPosition}onDragStart(e){let t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;this.isDragging=!0,this.hasMoved=!1,this.dragStartX=t,this.dragStartY=i;let r=window.innerWidth,o=window.innerHeight;this.startLeft=parseFloat(this.bedPosition.left)*r/100,this.startTop=parseFloat(this.bedPosition.top)*o/100,e.preventDefault(),e.stopPropagation()}onDragMove(e){if(!this.isDragging)return;let t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,r=t-this.dragStartX,o=i-this.dragStartY,s=Math.sqrt(r*r+o*o);if(!this.hasMoved&&s>this.DRAG_THRESHOLD&&(this.hasMoved=!0,document.querySelector(".bed-positioning-frame")?.classList.add("dragging")),this.hasMoved){let a=this.startLeft+r,c=this.startTop+o,l=window.innerWidth,d=window.innerHeight,p=Math.max(0,Math.min(a,l-100)),C=Math.max(0,Math.min(c,d-100)),v=p/l*100,E=C/d*100;this.bedPosition={left:`${v}%`,top:`${E}%`}}e.preventDefault(),e.stopPropagation()}onDragEnd(e){this.isDragging&&(this.isDragging=!1,this.hasMoved?(document.querySelector(".bed-positioning-frame")?.classList.remove("dragging"),P.updateBedPosition(this.bedPosition)):this.handleBedClick(),this.hasMoved=!1)}handleBedClick(){return Q(this,null,function*(){yield this.sleepService.forceWakeUpWithConfirmation()})}static \u0275fac=function(t){return new(t||n)(T(We),T(Qt))};static \u0275cmp=j({type:n,selectors:[["app-bed"]],standalone:!0,features:[H],decls:4,vars:6,consts:[[1,"bed-positioning-frame",3,"mousedown","touchstart"],[1,"bed-area"],["alt","Bed",1,"bed-image",3,"src"],["class","sleep-status-indicator",4,"ngIf"],[1,"sleep-status-indicator"],["alt","Sleeping",1,"sleep-icon",3,"src"]],template:function(t,i){t&1&&(u(0,"div",0),b("mousedown",function(o){return i.onDragStart(o)})("touchstart",function(o){return i.onDragStart(o)}),u(1,"div",1),A(2,"img",2),N(3,wE,2,1,"div",3),f()()),t&2&&(je("left",i.bedPosition.left)("top",i.bedPosition.top),h(2),y("src",i.bedImage,$),h(),y("ngIf",i.isSleeping))},dependencies:[U,ye],styles:[".bed-positioning-frame[_ngcontent-%COMP%]{position:absolute;z-index:600;transition:none}.bed-positioning-frame.dragging[_ngcontent-%COMP%]{cursor:grabbing}.bed-area[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;transition:none;cursor:pointer}.bed-image[_ngcontent-%COMP%]{width:auto;height:40dvh;object-fit:contain}.sleep-status-indicator[_ngcontent-%COMP%]{position:absolute;right:30px;top:-30px;z-index:650;animation:_ngcontent-%COMP%_sleepFloat 2s ease-in-out infinite}.sleep-icon[_ngcontent-%COMP%]{width:auto;height:10dvh;object-fit:contain}@keyframes _ngcontent-%COMP%_sleepFloat{0%,to{transform:translateY(0);opacity:1}50%{transform:translateY(-20px);opacity:.6}}"]})};var $a=class n{constructor(e,t){this.dirtyTriggerService=e;this.coinsService=t}getCleaningCoin(){let e=Math.random()<.2,t=0,i=D.loadPetStats();i.lifeCycle==="CHILD"?t=20:i.lifeCycle==="EVOLUTION"&&(t=30),e&&t>0&&this.coinsService.addCoins(t,!0,"\u6E05\u6F54\u734E\u52F5")}cleanEvent(e){this.dirtyTriggerService.dirtyObjects.find(i=>i.dirtyNo===e)&&(this.getCleaningCoin(),this.dirtyTriggerService.removeDirtyObject(e))}cleanDirtyObject(e){let t=D.loadPetStats();if(t.rare===null||!this.dirtyTriggerService.dirtyObjects.some(s=>s.dirtyNo===e))return;this.dirtyTriggerService.removeDirtyObject(e);let r=t.name||"\u96FB\u5B50\u96DE";R.show(`${r}\u7684\u74B0\u5883\u8B8A\u4E7E\u6DE8\u4E86\uFF01\u9AD2\u6C61\u7269\u4EF6${e}\u5DF2\u6E05\u9664`,"success");let o=_(g({},t),{currentWellness:Math.min(t.maxWellness,t.currentWellness+1),currentFriendship:Math.min(t.maxFriendship,t.currentFriendship+.5)});D.savePetStats(o)}cleanAllDirtyObjects(){let e=D.loadPetStats();if(e.rare===null||this.dirtyTriggerService.dirtyObjects.length===0)return;let t=this.dirtyTriggerService.dirtyObjects.length;this.dirtyTriggerService.resetDirtyState();let i=e.name||"\u96FB\u5B50\u96DE";R.show(`${i}\u7684\u74B0\u5883\u5B8C\u5168\u4E7E\u6DE8\u4E86\uFF01\u6E05\u9664\u4E86${t}\u500B\u9AD2\u6C61\u7269\u4EF6`,"success");let r=t*1,o=t*.5,s=_(g({},e),{currentWellness:Math.min(e.maxWellness,e.currentWellness+r),currentFriendship:Math.min(e.maxFriendship,e.currentFriendship+o)});D.savePetStats(s)}hasDirtyObjects(){return this.dirtyTriggerService.dirtyObjects.length>0}getDirtyCount(){return this.dirtyTriggerService.getDirtyCount()}static \u0275fac=function(t){return new(t||n)(M(ze),M(st))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};function EE(n,e){if(n&1){let t=te();u(0,"div",2),b("click",function(){let r=w(t).$implicit,o=S();return I(o.onDirtyClick(r.dirtyNo))}),A(1,"img",3),f()}if(n&2){let t=e.$implicit,i=S();Us("dirty-item-"+t.dirtyNo),h(),y("src",i.getDirtyImageSrc(t.dirtyNo),$)("alt","\u9AD2\u6C61\u7269\u4EF6 "+t.dirtyNo)}}var za=class n{constructor(e,t){this.dirtyTriggerService=e;this.cleaningEventService=t}visibleDirtyObjects=[];updateInterval;ngOnInit(){this.updateDirtyDisplay(),this.updateInterval=window.setInterval(()=>{this.updateDirtyDisplay()},1e3)}ngOnDestroy(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=void 0)}updateDirtyDisplay(){this.visibleDirtyObjects=[...this.dirtyTriggerService.dirtyObjects]}getDirtyImageSrc(e){switch(e){case 1:return x.otherIcons.dirty01;case 2:return x.otherIcons.dirty02;case 3:return x.otherIcons.dirty03;default:return x.otherIcons.dirty01}}onDirtyClick(e){this.cleaningEventService.cleanEvent(e),this.updateDirtyDisplay()}static \u0275fac=function(t){return new(t||n)(T(ze),T($a))};static \u0275cmp=j({type:n,selectors:[["app-dirty-display"]],standalone:!0,features:[H],decls:2,vars:1,consts:[[1,"dirty-display-container"],["class","dirty-item",3,"class","click",4,"ngFor","ngForOf"],[1,"dirty-item",3,"click"],[1,"dirty-image",3,"src","alt"]],template:function(t,i){t&1&&(u(0,"div",0),N(1,EE,2,4,"div",1),f()),t&2&&(h(),y("ngForOf",i.visibleDirtyObjects))},dependencies:[U,Ne],styles:[".dirty-display-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:850}.dirty-item[_ngcontent-%COMP%]{position:absolute;cursor:pointer;pointer-events:auto;transition:transform .2s ease}.dirty-item[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.dirty-image[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:contain;-webkit-user-select:none;user-select:none}.dirty-item-1[_ngcontent-%COMP%]{top:80px;left:50px}.dirty-item-2[_ngcontent-%COMP%]{top:70dvh;left:100px}.dirty-item-3[_ngcontent-%COMP%]{top:75dvh;right:350px}"]})};var Ae={currentHealth:0,currentHunger:0,maxHealth:0,currentFriendship:0,currentWellness:0},Iv={food:[{itemName:"\u9EB5\u5305\u87F2",productType:"food",price:10,reborn:0,freeze:0,effect:_(g({},Ae),{currentHunger:5,currentFriendship:2})},{itemName:"\u71DF\u990A\u7C73",productType:"food",price:11,reborn:0,freeze:0,effect:_(g({},Ae),{currentHunger:8,currentFriendship:2})},{itemName:"\u70B8\u96DE",productType:"food",price:30,reborn:0,freeze:0,effect:_(g({},Ae),{currentHunger:20,currentFriendship:8})},{itemName:"\u7CD6\u679C",productType:"food",price:10,reborn:0,freeze:0,effect:_(g({},Ae),{currentHunger:5,currentFriendship:8})},{itemName:"\u7159\u71FB\u9BAD\u9B5A",productType:"food",price:15,reborn:0,freeze:0,effect:_(g({},Ae),{currentHunger:15,currentFriendship:5})},{itemName:"\u72D7\u98FC\u6599",productType:"food",price:13,reborn:0,freeze:0,effect:_(g({},Ae),{currentHunger:20,currentFriendship:2})},{itemName:"\u51B0\u6DC7\u6DCB",productType:"food",price:10,reborn:0,freeze:0,effect:_(g({},Ae),{currentHunger:2,currentFriendship:10})}],health:[{itemName:"\u897F\u85E5",productType:"health",price:10,reborn:0,freeze:0,effect:_(g({},Ae),{currentHealth:10,currentWellness:15,maxHealth:-10})},{itemName:"\u4EBA\u8518",productType:"health",price:80,reborn:0,freeze:0,effect:_(g({},Ae),{currentHealth:2,currentWellness:10,maxHealth:5})},{itemName:"\u4E2D\u85E5\u5305",productType:"health",price:40,reborn:0,freeze:0,effect:_(g({},Ae),{currentHealth:1,currentWellness:1,maxHealth:1})},{itemName:"\u982D\u75DB\u85E5",productType:"health",price:10,reborn:0,freeze:0,effect:_(g({},Ae),{currentHealth:2,currentWellness:15,maxHealth:-2})},{itemName:"\u6574\u8178\u85E5",productType:"health",price:10,reborn:0,freeze:0,effect:_(g({},Ae),{currentHealth:2,currentWellness:15,maxHealth:-2})},{itemName:"\u80C3\u85E5",productType:"health",price:10,reborn:0,freeze:0,effect:_(g({},Ae),{currentHealth:2,currentWellness:15,maxHealth:-2})},{itemName:"\u611F\u5192\u85E5",productType:"health",price:10,reborn:0,freeze:0,effect:_(g({},Ae),{currentHealth:2,currentWellness:15,maxHealth:-2})},{itemName:"\u6B7B\u8005\u7526\u9192",productType:"health",price:1e3,reborn:1,freeze:0,effect:_(g({},Ae),{maxHealth:-2})},{itemName:"\u51B0\u51CD\u85E5\u4E38",productType:"health",price:300,reborn:0,freeze:1,effect:g({},Ae)}],gift:[{itemName:"\u5C0F\u96DE\u5A03\u5A03",productType:"gifts",price:30,reborn:0,freeze:0,effect:_(g({},Ae),{currentFriendship:5})},{itemName:"\u667A\u6167\u578B\u624B\u6A5F",productType:"gifts",price:150,reborn:0,freeze:0,effect:_(g({},Ae),{currentFriendship:50})}],decoration:[{itemName:"\u661F\u661F\u88DD\u98FE",productType:"decorations",price:100,reborn:0,freeze:0,effect:_(g({},Ae),{currentFriendship:5})}]},Ce=class{static STORAGE_KEY="achick_shop_data";static loadShopData(){let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{return g(g({},Iv),JSON.parse(e))}catch(t){console.error("Failed to parse shop data:",t)}return g({},Iv)}static saveShopData(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Failed to save shop data:",t)}}static getProductsByCategory(e,t){return t[e]||[]}static getProductByName(e,t){let i=["food","health","gift","decoration"];for(let r of i){let o=t[r].find(s=>s.itemName===e);if(o)return o}return null}static getTotalProductCount(e){return e.food.length+e.health.length+e.gift.length+e.decoration.length}static getProductsByPriceRange(e,t,i){return[...i.food,...i.health,...i.gift,...i.decoration].filter(o=>o.price>=e&&o.price<=t)}static purchaseProduct(e,t=1){let i=Z.loadUserData(),r=e.price*t;if(i.coins<r)return{success:!1,message:`\u91D1\u5E63\u4E0D\u8DB3\uFF01\u9700\u8981 ${r} \u91D1\u5E63\uFF0C\u76EE\u524D\u53EA\u6709 ${i.coins} \u91D1\u5E63\u3002`};if(Z.spendCoins(r,i).success){let s=Ge.addItem(e.itemName,t);return s.success?{success:!0,message:`\u6210\u529F\u8CFC\u8CB7 ${t} \u500B ${e.itemName}\uFF01\u82B1\u8CBB ${r} \u91D1\u5E63\uFF0C\u7269\u54C1\u5DF2\u6DFB\u52A0\u5230\u80CC\u5305\u3002`}:(Z.addCoins(r,i),{success:!1,message:`\u8CFC\u8CB7\u5931\u6557\uFF1A${s.message}`})}return{success:!1,message:"\u8CFC\u8CB7\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66\u3002"}}};var Ev={items:{food:[],health:[],gift:[],decoration:[]},totalItems:0},Ge=class{static STORAGE_KEY="achick_user_inventory";static loadUserInventory(){let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{let t=JSON.parse(e);return{items:{food:t.items?.food||[],health:t.items?.health||[],gift:t.items?.gift||[],decoration:t.items?.decoration||[]},totalItems:this.calculateTotalItems(t.items||{})}}catch(t){console.error("Failed to parse user inventory:",t)}return g({},Ev)}static saveUserInventory(e){try{e.totalItems=this.calculateTotalItems(e.items),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Failed to save user inventory:",t)}}static calculateTotalItems(e){return Object.values(e).reduce((t,i)=>t+i.reduce((r,o)=>r+o.quantity,0),0)}static addItem(e,t=1,i){let r=i||this.loadUserInventory(),o=Ce.loadShopData(),s=Ce.getProductByName(e,o);if(!s)return{success:!1,message:`\u7269\u54C1 "${e}" \u4E0D\u5B58\u5728`,inventory:r};let a=this.getProductCategory(s,o);if(!a)return{success:!1,message:`\u7121\u6CD5\u5224\u65B7\u7269\u54C1 "${e}" \u7684\u5206\u985E`,inventory:r};let c=r.items[a].findIndex(l=>l.itemName===e);return c>=0?r.items[a][c].quantity+=t:r.items[a].push({itemName:e,quantity:t}),this.saveUserInventory(r),{success:!0,message:`\u6210\u529F\u6DFB\u52A0 ${t} \u500B "${e}" \u5230\u80CC\u5305`,inventory:r}}static useItem(e,t=1,i){let r=i||this.loadUserInventory(),o=Ce.loadShopData(),s=Ce.getProductByName(e,o);if(!s)return{success:!1,message:`\u7269\u54C1 "${e}" \u4E0D\u5B58\u5728`,inventory:r};let a=this.getProductCategory(s,o);if(!a)return{success:!1,message:`\u7121\u6CD5\u5224\u65B7\u7269\u54C1 "${e}" \u7684\u5206\u985E`,inventory:r};let c=r.items[a].findIndex(d=>d.itemName===e);if(c<0)return{success:!1,message:`\u80CC\u5305\u4E2D\u6C92\u6709 "${e}"`,inventory:r};let l=r.items[a][c];return l.quantity<t?{success:!1,message:`${e} \u6578\u91CF\u4E0D\u8DB3\uFF0C\u76EE\u524D\u53EA\u6709 ${l.quantity} \u500B`,inventory:r}:(l.quantity-=t,l.quantity===0&&r.items[a].splice(c,1),this.saveUserInventory(r),{success:!0,message:`\u6210\u529F\u4F7F\u7528 ${t} \u500B "${e}"`,inventory:r,productItem:s})}static getItemQuantity(e,t){let i=t||this.loadUserInventory();for(let r of Object.keys(i.items)){let o=i.items[r].find(s=>s.itemName===e);if(o)return o.quantity}return 0}static getItemsByCategory(e,t){return[...(t||this.loadUserInventory()).items[e]]}static getAllItems(e){let t=e||this.loadUserInventory(),i=[];for(let r of Object.keys(t.items))t.items[r].forEach(o=>{i.push(_(g({},o),{category:r}))});return i}static clearInventory(){let e=g({},Ev);return this.saveUserInventory(e),e}static getProductCategory(e,t){let i=["food","health","gift","decoration"];for(let r of i)if(t[r].find(s=>s.itemName===e.itemName))return r;return null}static hasEnoughItems(e,t,i){return this.getItemQuantity(e,i)>=t}static getInventoryStats(e){let t=e||this.loadUserInventory(),i={food:0,health:0,gift:0,decoration:0},r=0;for(let o of Object.keys(t.items)){let s=t.items[o];i[o]=s.reduce((a,c)=>a+c.quantity,0),r+=s.length}return{totalItems:t.totalItems,categoryCounts:i,uniqueItems:r}}};var Ft=class n{static injector;static setInjector(e){n.injector=e}static useItemWithConfirmation(e,t=1,i){return Q(this,null,function*(){if(!Ge.hasEnoughItems(e,t)){let d=Ge.getItemQuantity(e);return{success:!1,message:`${e} \u6578\u91CF\u4E0D\u8DB3\uFF0C\u76EE\u524D\u53EA\u6709 ${d} \u500B`}}let r=Ce.loadShopData(),o=Ce.getProductByName(e,r);if(!o)return{success:!1,message:`\u627E\u4E0D\u5230\u7269\u54C1 "${e}" \u7684\u8CC7\u8A0A`};let s=n.canUseItem(e);if(!s.canUse)return{success:!1,message:s.reason||"\u7121\u6CD5\u4F7F\u7528\u6B64\u7269\u54C1"};let a=D.loadPetStats();if(o.effect.currentHunger>0&&a.currentHunger>=100&&!(yield i.confirm(`\u96FB\u5B50\u96DE\u5DF2\u7D93\u4E0D\u9913\u4E86\uFF0C\u76EE\u524D\u98FD\u8DB3\u611F\u70BA 100\uFF01

\u662F\u5426\u78BA\u8A8D\u9084\u662F\u8981\u9935\u98DF ${e}\uFF1F`,"\u{1F37D}\uFE0F \u9935\u98DF\u78BA\u8A8D","\u78BA\u8A8D\u9935\u98DF","\u53D6\u6D88")))return{success:!1,message:"\u5DF2\u53D6\u6D88\u9935\u98DF"};let c=Ge.useItem(e,t);if(!c.success)return{success:!1,message:c.message};let l=this.applyItemEffects(o,t);return{success:!0,message:`\u6210\u529F\u4F7F\u7528 ${t} \u500B ${e}`,effects:l}})}static useItem(e,t=1){if(!Ge.hasEnoughItems(e,t)){let a=Ge.getItemQuantity(e);return{success:!1,message:`${e} \u6578\u91CF\u4E0D\u8DB3\uFF0C\u76EE\u524D\u53EA\u6709 ${a} \u500B`}}let i=Ce.loadShopData(),r=Ce.getProductByName(e,i);if(!r)return{success:!1,message:`\u627E\u4E0D\u5230\u7269\u54C1 "${e}" \u7684\u8CC7\u8A0A`};let o=Ge.useItem(e,t);if(!o.success)return{success:!1,message:o.message};let s=this.applyItemEffects(r,t);return{success:!0,message:`\u6210\u529F\u4F7F\u7528 ${t} \u500B ${e}`,effects:s}}static applyItemEffects(e,t){let i=D.loadPetStats(),r=[],o=g({},i);if(e.freeze===1&&(o.timeStopping=!0,o.isFreezing=!0,r.push("\u96FB\u5B50\u96DE\u5DF2\u88AB\u51B0\u51CD")),e.reborn===1){let c=Z.loadUserData(),d=Z.getCurrentPetRecord(c)?.evolutionTime?"EVOLUTION":"CHILD";o.lifeCycle=d,o.isDead=!1,o.timeStopping=!1,o.currentHealth=20,r.push("\u96FB\u5B50\u96DE\u5DF2\u5FA9\u6D3B")}let s=e.effect;if(s.currentHealth!==0){let c=s.currentHealth*t;o.currentHealth=Math.max(0,Math.min(o.maxHealth,o.currentHealth+c)),r.push(`\u751F\u547D\u503C ${c>0?"+":""}${c}`)}if(s.currentHunger!==0){let c=s.currentHunger*t;o.currentHunger=Math.max(0,Math.min(100,o.currentHunger+c)),r.push(`\u98FD\u8DB3\u611F ${c>0?"+":""}${c}`)}if(s.currentFriendship!==0){let c=s.currentFriendship*t;o.currentFriendship=Math.max(0,Math.min(100,o.currentFriendship+c)),r.push(`\u597D\u611F\u5EA6 ${c>0?"+":""}${c}`)}if(s.currentWellness!==0){let c=s.currentWellness*t;o.currentWellness=Math.max(0,Math.min(100,o.currentWellness+c)),r.push(`\u5065\u5EB7\u5EA6 ${c>0?"+":""}${c}`)}if(s.maxHealth!==0){let c=s.maxHealth*t;o.maxHealth=Math.max(1,o.maxHealth+c),r.push(`\u6700\u5927\u751F\u547D\u503C ${c>0?"+":""}${c}`),o.currentHealth>o.maxHealth&&(o.currentHealth=o.maxHealth)}let a=this.handleDiseaseHealing(e,t);return r.push(...a),D.savePetStats(o),e.reborn===1&&n.injector&&n.injector.get(Nn).initializeAllLastCheckTimes(),r}static handleDiseaseHealing(e,t){let i=[],r=P.loadStateData(),s={\u982D\u75DB\u85E5:{disease:"headache",name:"\u504F\u982D\u75DB"},\u6574\u8178\u85E5:{disease:"diarrhea",name:"\u62C9\u809A\u5B50"},\u80C3\u85E5:{disease:"gastricUlcer",name:"\u80C3\u6F70\u760D"},\u611F\u5192\u85E5:{disease:"flu",name:"\u6D41\u611F"}}[e.itemName];if(s){let a=s.disease,c=r[a];"isActive"in c&&c.isActive===1?(P.deactivateState(a,r),i.push(`\u6CBB\u7642\u4E86 ${s.name}`),R.success(`\u{1F48A} ${s.name} \u5DF2\u6CBB\u7652\uFF01`,3e3)):R.info(`\u{1F48A} \u96FB\u5B50\u96DE\u6C92\u6709 ${s.name}\uFF0C\u4F46\u85E5\u7269\u4ECD\u7136\u751F\u6548`,3e3)}return i}static getItemImagePath(e){let{productType:t}=e,i=this.getItemKeyFromProduct(e);if(!i)return"";try{return x.store[t][i]||""}catch(r){return console.error("Failed to get item image path:",r),""}}static getItemKeyFromProduct(e){let t=Ce.loadShopData();return{\u9EB5\u5305\u87F2:"worm",\u71DF\u990A\u7C73:"rice",\u70B8\u96DE:"chicken",\u7CD6\u679C:"candy",\u7159\u71FB\u9BAD\u9B5A:"fish",\u72D7\u98FC\u6599:"dogFood",\u51B0\u6DC7\u6DCB:"icecream",\u897F\u85E5:"pill",\u4EBA\u8518:"ginseng",\u4E2D\u85E5\u5305:"chineseMedicine",\u982D\u75DB\u85E5:"pillForHeadache",\u6574\u8178\u85E5:"pillForDiarrhea",\u80C3\u85E5:"pillForGastricUlcer",\u611F\u5192\u85E5:"pillForFlu",\u6B7B\u8005\u7526\u9192:"rebornPill",\u51B0\u51CD\u85E5\u4E38:"freezePill",\u5C0F\u96DE\u5A03\u5A03:"doll",\u667A\u6167\u578B\u624B\u6A5F:"cellphone",\u661F\u661F\u88DD\u98FE:"star"}[e.itemName]||""}static canUseItem(e){let t=D.loadPetStats();if(t.rare===null)return{canUse:!1,reason:"\u96FB\u5B50\u96DE\u5C1A\u672A\u51FA\u751F\uFF0C\u7121\u6CD5\u4F7F\u7528\u7269\u54C1"};if(t.isLeaving)return{canUse:!1,reason:"\u96FB\u5B50\u96DE\u6B63\u5728\u96E2\u5BB6\u51FA\u8D70\uFF0C\u7121\u6CD5\u4F7F\u7528\u7269\u54C1"};let i=Ce.loadShopData(),r=Ce.getProductByName(e,i);if(r){if(r.reborn===1){if(t.isCooked)return{canUse:!1,reason:"\u5DF2\u719F\u6210\u7684\u96FB\u5B50\u96DE\u7121\u6CD5\u5FA9\u6D3B"};if(!t.isDead||!t.timeStopping)return{canUse:!1,reason:"\u96FB\u5B50\u96DE\u9084\u6D3B\u8457\uFF0C\u4E0D\u9700\u8981\u4F7F\u7528\u5FA9\u6D3B\u7269\u54C1"}}else if(t.timeStopping)return{canUse:!1,reason:"\u96FB\u5B50\u96DE\u6642\u9593\u5DF2\u505C\u6B62\uFF0C\u7121\u6CD5\u4F7F\u7528\u7269\u54C1"};if(r.freeze===1&&t.timeStopping)return{canUse:!1,reason:"\u96FB\u5B50\u96DE\u5DF2\u7D93\u88AB\u51B0\u51CD\uFF0C\u7121\u6CD5\u91CD\u8907\u4F7F\u7528\u51B0\u51CD\u7269\u54C1"}}return{canUse:!0}}static getItemUsagePreview(e,t=1){let i=Ce.loadShopData(),r=Ce.getProductByName(e,i);if(!r)return{success:!1,message:`\u627E\u4E0D\u5230\u7269\u54C1 "${e}" \u7684\u8CC7\u8A0A`};let o=[],s=r.effect;if(s.currentHealth!==0){let a=s.currentHealth*t;o.push(`\u751F\u547D\u503C ${a>0?"+":""}${a}`)}if(s.currentHunger!==0){let a=s.currentHunger*t;o.push(`\u98FD\u8DB3\u611F ${a>0?"+":""}${a}`)}if(s.currentFriendship!==0){let a=s.currentFriendship*t;o.push(`\u597D\u611F\u5EA6 ${a>0?"+":""}${a}`)}if(s.currentWellness!==0){let a=s.currentWellness*t;o.push(`\u5065\u5EB7\u5EA6 ${a>0?"+":""}${a}`)}if(s.maxHealth!==0){let a=s.maxHealth*t;o.push(`\u6700\u5927\u751F\u547D\u503C ${a>0?"+":""}${a}`)}return r.freeze===1&&o.push("\u5C07\u51B0\u51CD\u96FB\u5B50\u96DE"),r.reborn===1&&o.push("\u5C07\u5FA9\u6D3B\u96FB\u5B50\u96DE"),{success:!0,preview:o}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};function ME(n,e){if(n&1){let t=te();u(0,"button",17),b("click",function(){let r=w(t).$implicit,o=S();return I(o.switchTab(r.key))}),m(1),f()}if(n&2){let t=e.$implicit,i=S();F("active",i.activeTab===t.key),h(),Y(" ",t.label," ")}}function xE(n,e){if(n&1){let t=te();u(0,"div",20),b("click",function(){let r=w(t).$implicit,o=S(2);return I(o.onItemClick(r))}),u(1,"div",21),A(2,"img",22),f(),u(3,"div",23)(4,"div",24),m(5),f(),u(6,"div",25),m(7),f()()()}if(n&2){let t=e.$implicit;h(2),y("src",t.imagePath,$)("alt",t.itemName),h(3),q(t.itemName),h(2),Y("x",t.quantity,"")}}function TE(n,e){if(n&1&&(u(0,"div",18),N(1,xE,8,4,"div",19),f()),n&2){let t=S();h(),y("ngForOf",t.currentTabItems)}}function OE(n,e){n&1&&(u(0,"span"),m(1,"\u80CC\u5305\u4E2D\u6C92\u6709\u98DF\u7269"),f())}function PE(n,e){if(n&1&&(u(0,"span"),m(1),f()),n&2){let t=S(2);h(),Y("\u80CC\u5305\u4E2D\u6C92\u6709",t.getTabLabel(t.activeTab),"")}}function AE(n,e){if(n&1){let t=te();u(0,"button",30),b("click",function(){w(t);let r=S(2);return I(r.openShop())}),m(1," \u524D\u5F80\u8CFC\u8CB7 "),f()}}function kE(n,e){if(n&1&&(u(0,"div",26)(1,"div",27),N(2,OE,2,0,"span",28)(3,PE,2,1,"span",28),f(),N(4,AE,2,0,"button",29),f()),n&2){let t=S();h(2),y("ngIf",t.activeTab==="food"),h(),y("ngIf",t.activeTab!=="food"),h(),y("ngIf",t.activeTab==="food")}}function NE(n,e){if(n&1&&(u(0,"li"),m(1),f()),n&2){let t=e.$implicit;h(),q(t)}}function RE(n,e){if(n&1&&(u(0,"div",37)(1,"h6"),m(2,"\u4F7F\u7528\u6548\u679C\uFF1A"),f(),u(3,"ul"),N(4,NE,2,1,"li",38),f()()),n&2){let t=S(2);h(4),y("ngForOf",t.itemPreview)}}function FE(n,e){if(n&1&&(u(0,"div",8)(1,"div",31),A(2,"img",22),u(3,"div",32)(4,"div",33),m(5),f(),u(6,"div",34),m(7),f()()(),N(8,RE,5,1,"div",35),u(9,"div",36),m(10),f()()),n&2){let t=S();h(2),y("src",t.selectedItem.imagePath,$)("alt",t.selectedItem.itemName),h(3),q(t.selectedItem.itemName),h(2),Y("\u64C1\u6709\u6578\u91CF\uFF1A",t.selectedItem.quantity,""),h(),y("ngIf",t.itemPreview.length>0),h(2),Y(" \u78BA\u5B9A\u8981\u4F7F\u7528 ",t.selectedItem.itemName," \u55CE\uFF1F ")}}var Wa=class n{constructor(e){this.modalService=e}close=new G;openShopModal=new G;itemUsed=new G;isVisible=!1;showConfirmModal=!1;activeTab="food";currentTabItems=[];selectedItem=null;itemPreview=[];inventory=Ge.loadUserInventory();tabs=[{key:"food",label:"\u98DF\u7269"},{key:"health",label:"\u5065\u5EB7"},{key:"gift",label:"\u79AE\u7269"},{key:"decoration",label:"\u88DD\u98FE"}];ngOnInit(){this.updateCurrentTabItems()}show(e="food"){this.activeTab=e,this.inventory=Ge.loadUserInventory(),this.updateCurrentTabItems(),this.isVisible=!0}onClose(){this.isVisible=!1,this.close.emit()}onBackdropClick(e){e.target===e.currentTarget&&this.onClose()}switchTab(e){this.activeTab=e,this.updateCurrentTabItems()}updateCurrentTabItems(){let e=Ge.getItemsByCategory(this.activeTab,this.inventory),t=Ce.loadShopData();this.currentTabItems=e.map(i=>{let r=Ce.getProductByName(i.itemName,t),o=r?Ft.getItemImagePath(r):"";return{itemName:i.itemName,quantity:i.quantity,imagePath:o,productItem:r}})}onItemClick(e){this.selectedItem=e;let t=Ft.getItemUsagePreview(e.itemName,1);this.itemPreview=t.success?t.preview:[],this.showConfirmModal=!0}closeConfirmModal(){this.showConfirmModal=!1,this.selectedItem=null,this.itemPreview=[]}onConfirmBackdropClick(e){e.target===e.currentTarget&&this.closeConfirmModal()}confirmUseItem(){return Q(this,null,function*(){if(!this.selectedItem)return;let e=this.selectedItem.itemName,t=Ft.canUseItem(e);if(this.closeConfirmModal(),!t.canUse){yield this.modalService.alert(t.reason||"\u7121\u6CD5\u4F7F\u7528\u6B64\u7269\u54C1","\u7121\u6CD5\u4F7F\u7528"),this.onClose();return}let i=yield Ft.useItemWithConfirmation(e,1,this.modalService);i.success?(this.itemUsed.emit({itemName:e,effects:i.effects||[]}),this.inventory=Ge.loadUserInventory(),this.updateCurrentTabItems(),yield this.modalService.alert(`${i.message}${i.effects?`
\u6548\u679C\uFF1A`+i.effects.join(", "):""}`,"\u4F7F\u7528\u6210\u529F"),this.onClose()):i.message!=="\u5DF2\u53D6\u6D88\u9935\u98DF"?(yield this.modalService.alert(i.message,"\u4F7F\u7528\u5931\u6557"),this.onClose()):this.onClose()})}openShop(){this.onClose(),this.openShopModal.emit()}getTabLabel(e){let t=this.tabs.find(i=>i.key===e);return t?t.label:e}static \u0275fac=function(t){return new(t||n)(T(ve))};static \u0275cmp=j({type:n,selectors:[["app-inventory-modal"]],outputs:{close:"close",openShopModal:"openShopModal",itemUsed:"itemUsed"},standalone:!0,features:[H],decls:29,vars:8,consts:[[1,"modal-backdrop",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-tabs"],["class","tab-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"modal-body"],["class","items-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"modal-backdrop","confirm-modal",3,"click"],[1,"modal-dialog","small",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"tab-btn",3,"click"],[1,"items-grid"],["class","item-card",3,"click",4,"ngFor","ngForOf"],[1,"item-card",3,"click"],[1,"item-image"],[3,"src","alt"],[1,"item-info"],[1,"item-name"],[1,"item-quantity"],[1,"empty-state"],[1,"empty-message"],[4,"ngIf"],["class","buy-btn",3,"click",4,"ngIf"],[1,"buy-btn",3,"click"],[1,"confirm-item"],[1,"confirm-info"],[1,"confirm-name"],[1,"confirm-quantity"],["class","confirm-effects",4,"ngIf"],[1,"confirm-message"],[1,"confirm-effects"],[4,"ngFor","ngForOf"]],template:function(t,i){t&1&&(u(0,"div",0),b("click",function(o){return i.onBackdropClick(o)}),u(1,"div",1),b("click",function(o){return o.stopPropagation()}),u(2,"div",2)(3,"div",3)(4,"h5",4),m(5,"\u80CC\u5305"),f(),u(6,"button",5),b("click",function(){return i.onClose()}),u(7,"span"),m(8,"\xD7"),f()()(),u(9,"div",6),N(10,ME,2,3,"button",7),f(),u(11,"div",8),N(12,TE,2,1,"div",9)(13,kE,5,3,"div",10),f()()()(),u(14,"div",11),b("click",function(o){return i.onConfirmBackdropClick(o)}),u(15,"div",12),b("click",function(o){return o.stopPropagation()}),u(16,"div",2)(17,"div",3)(18,"h5",4),m(19,"\u4F7F\u7528\u7269\u54C1"),f(),u(20,"button",5),b("click",function(){return i.closeConfirmModal()}),u(21,"span"),m(22,"\xD7"),f()()(),N(23,FE,11,6,"div",13),u(24,"div",14)(25,"button",15),b("click",function(){return i.closeConfirmModal()}),m(26,"\u53D6\u6D88"),f(),u(27,"button",16),b("click",function(){return i.confirmUseItem()}),m(28,"\u78BA\u8A8D\u4F7F\u7528"),f()()()()()),t&2&&(F("show",i.isVisible),h(10),y("ngForOf",i.tabs),h(2),y("ngIf",i.currentTabItems.length>0),h(),y("ngIf",i.currentTabItems.length===0),h(),F("show",i.showConfirmModal),h(9),y("ngIf",i.selectedItem))},dependencies:[U,Ne,ye],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;visibility:hidden;transition:all .3s ease}.modal-backdrop.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-backdrop.confirm-modal[_ngcontent-%COMP%]{z-index:1100}.modal-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:600px;max-height:80vh;box-shadow:0 8px 24px #0000004d;transform:scale(.9);transition:transform .3s ease}.modal-dialog.small[_ngcontent-%COMP%]{max-width:400px}.modal-backdrop.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:scale(1)}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999;transition:color .2s ease}.close-btn[_ngcontent-%COMP%]:hover{color:#666}.modal-tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #eee;background:#f8f9fa}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:12px 16px;background:none;border:none;cursor:pointer;font-size:14px;color:#666;transition:all .2s ease;border-bottom:3px solid transparent}.tab-btn[_ngcontent-%COMP%]:hover{background:#e9ecef;color:#333}.tab-btn.active[_ngcontent-%COMP%]{color:#007bff;border-bottom-color:#007bff;background:#fff}.modal-body[_ngcontent-%COMP%]{flex:1;padding:20px;overflow-y:auto}.items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:16px}.item-card[_ngcontent-%COMP%]{border:2px solid #e9ecef;border-radius:8px;padding:12px;cursor:pointer;transition:all .2s ease;text-align:center}.item-card[_ngcontent-%COMP%]:hover{border-color:#007bff;transform:translateY(-2px);box-shadow:0 4px 12px #007bff33}.item-image[_ngcontent-%COMP%]{width:60px;height:60px;margin:0 auto 8px;border-radius:6px;overflow:hidden;background:#f8f9fa;display:flex;align-items:center;justify-content:center}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.item-info[_ngcontent-%COMP%]{font-size:12px}.item-name[_ngcontent-%COMP%]{font-weight:500;color:#333;margin-bottom:4px}.item-quantity[_ngcontent-%COMP%]{color:#666}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-message[_ngcontent-%COMP%]{font-size:16px;margin-bottom:20px}.buy-btn[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none;padding:12px 24px;border-radius:6px;cursor:pointer;font-size:14px;transition:background .2s ease}.buy-btn[_ngcontent-%COMP%]:hover{background:#218838}.confirm-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;padding:12px;background:#f8f9fa;border-radius:8px}.confirm-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:contain;margin-right:12px}.confirm-info[_ngcontent-%COMP%]{flex:1}.confirm-name[_ngcontent-%COMP%]{font-weight:500;color:#333;margin-bottom:4px}.confirm-quantity[_ngcontent-%COMP%]{font-size:12px;color:#666}.confirm-effects[_ngcontent-%COMP%]{margin-bottom:16px}.confirm-effects[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#333}.confirm-effects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px;font-size:12px;color:#666}.confirm-message[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:#333;margin-bottom:16px}.modal-footer[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:12px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;border:none;cursor:pointer;font-size:14px;transition:all .2s ease}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#0056b3}"]})};function LE(n,e){if(n&1){let t=te();u(0,"button",20),b("click",function(){let r=w(t).$implicit,o=S();return I(o.switchTab(r.key))}),m(1),f()}if(n&2){let t=e.$implicit,i=S();F("active",i.activeTab===t.key),h(),Y(" ",t.label," ")}}function VE(n,e){if(n&1){let t=te();u(0,"div",21),b("click",function(){let r=w(t).$implicit,o=S();return I(o.onItemClick(r))}),u(1,"div",22),A(2,"img",23),f(),u(3,"div",24)(4,"div",25),m(5),f(),u(6,"div",26),A(7,"img",27),u(8,"span"),m(9),f()()()()}if(n&2){let t=e.$implicit,i=S();h(2),y("src",t.imagePath,$)("alt",t.productItem.itemName),h(3),q(t.productItem.itemName),h(2),y("src",i.coinIcon,$),h(2),q(t.productItem.price)}}function jE(n,e){if(n&1&&(u(0,"div",47),m(1," \u8CFC\u8CB7\u5F8C\u9918\u984D\uFF1A "),A(2,"img",44),m(3),f()),n&2){let t=S(2);h(2),y("src",t.coinIcon,$),h(),Y(" ",t.currentCoins-t.totalPrice," ")}}function HE(n,e){n&1&&(u(0,"div",48)(1,"span",49),m(2,"\u26A0\uFE0F \u91D1\u5E63\u4E0D\u8DB3"),f()())}function BE(n,e){if(n&1){let t=te();u(0,"div",11)(1,"div",28),A(2,"img",23),u(3,"div",29)(4,"div",30),m(5),f(),u(6,"div",31),m(7," \u55AE\u50F9\uFF1A "),A(8,"img",27),m(9),f()()(),u(10,"div",32)(11,"label",33),m(12,"\u8CFC\u8CB7\u6578\u91CF\uFF1A"),f(),u(13,"div",34)(14,"button",35),b("click",function(){w(t);let r=S();return I(r.decreaseQuantity())}),m(15,"-"),f(),u(16,"input",36),$e("ngModelChange",function(r){w(t);let o=S();return Ze(o.purchaseQuantity,r)||(o.purchaseQuantity=r),I(r)}),b("input",function(){w(t);let r=S();return I(r.onQuantityChange())}),f(),u(17,"button",35),b("click",function(){w(t);let r=S();return I(r.increaseQuantity())}),m(18,"+"),f()()(),u(19,"div",37)(20,"div",38),m(21,"\u7E3D\u8A08\uFF1A"),f(),u(22,"div",39),A(23,"img",40),u(24,"span",41),m(25),f()()(),u(26,"div",42)(27,"div",43),m(28," \u76EE\u524D\u9918\u984D\uFF1A "),A(29,"img",44),m(30),f(),N(31,jE,4,2,"div",45)(32,HE,3,0,"div",46),f()()}if(n&2){let t=S();h(2),y("src",t.selectedItem.imagePath,$)("alt",t.selectedItem.productItem.itemName),h(3),q(t.selectedItem.productItem.itemName),h(3),y("src",t.coinIcon,$),h(),Y(" ",t.selectedItem.productItem.price," "),h(5),y("disabled",t.purchaseQuantity<=1),h(2),Ue("ngModel",t.purchaseQuantity),h(),y("disabled",t.purchaseQuantity>=99),h(6),y("src",t.coinIcon,$),h(2),q(t.totalPrice),h(),F("insufficient",!t.canAfford),h(3),y("src",t.coinIcon,$),h(),Y(" ",t.currentCoins," "),h(),y("ngIf",t.canAfford),h(),y("ngIf",!t.canAfford)}}var Ga=class n{constructor(e){this.modalService=e}close=new G;purchaseSuccess=new G;isVisible=!1;showConfirmModal=!1;activeTab="food";currentTabItems=[];selectedItem=null;purchaseQuantity=1;currentCoins=0;coinIcon=x.otherIcons.coin;shopData=Ce.loadShopData();tabs=[{key:"food",label:"\u98DF\u7269"},{key:"health",label:"\u5065\u5EB7"},{key:"gift",label:"\u79AE\u7269"},{key:"decoration",label:"\u88DD\u98FE"}];ngOnInit(){this.updateCurrentTabItems(),this.updateCoins()}show(){this.shopData=Ce.loadShopData(),this.updateCurrentTabItems(),this.updateCoins(),this.isVisible=!0}onClose(){this.isVisible=!1,this.close.emit()}onBackdropClick(e){e.target===e.currentTarget&&this.onClose()}switchTab(e){this.activeTab=e,this.updateCurrentTabItems()}updateCurrentTabItems(){let e=this.shopData[this.activeTab]||[];this.currentTabItems=e.map((t,i)=>{let r=Ft.getItemImagePath(t);return{itemKey:`${this.activeTab}_${i}_${t.itemName}`,productItem:t,imagePath:r}})}onItemClick(e){this.selectedItem=e,this.purchaseQuantity=1,this.showConfirmModal=!0}closeConfirmModal(){this.showConfirmModal=!1,this.selectedItem=null,this.purchaseQuantity=1}onConfirmBackdropClick(e){e.target===e.currentTarget&&this.closeConfirmModal()}increaseQuantity(){this.purchaseQuantity<99&&this.purchaseQuantity++}decreaseQuantity(){this.purchaseQuantity>1&&this.purchaseQuantity--}onQuantityChange(){this.purchaseQuantity<1?this.purchaseQuantity=1:this.purchaseQuantity>99&&(this.purchaseQuantity=99)}get totalPrice(){return this.selectedItem?this.selectedItem.productItem.price*this.purchaseQuantity:0}get canAfford(){return this.currentCoins>=this.totalPrice}confirmPurchase(){if(!this.selectedItem||!this.canAfford)return;let e=Ce.purchaseProduct(this.selectedItem.productItem,this.purchaseQuantity);e.success?(this.purchaseSuccess.emit({itemName:this.selectedItem.productItem.itemName,quantity:this.purchaseQuantity,totalCost:this.totalPrice}),this.updateCoins(),this.closeConfirmModal(),this.modalService.alert(e.message,"\u8CFC\u8CB7\u6210\u529F")):this.modalService.alert(e.message,"\u8CFC\u8CB7\u5931\u6557")}updateCoins(){let e=Z.loadUserData();this.currentCoins=e.coins}static \u0275fac=function(t){return new(t||n)(T(ve))};static \u0275cmp=j({type:n,selectors:[["app-shop-modal"]],outputs:{close:"close",purchaseSuccess:"purchaseSuccess"},standalone:!0,features:[H],decls:33,vars:10,consts:[[1,"modal-backdrop",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"user-coins"],["alt","\u91D1\u5E63",1,"coin-icon",3,"src"],[1,"coin-amount"],["type","button",1,"close-btn",3,"click"],[1,"modal-tabs"],["class","tab-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"modal-body"],[1,"items-grid"],["class","item-card",3,"click",4,"ngFor","ngForOf"],[1,"modal-backdrop","confirm-modal",3,"click"],[1,"modal-dialog","small",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"tab-btn",3,"click"],[1,"item-card",3,"click"],[1,"item-image"],[3,"src","alt"],[1,"item-info"],[1,"item-name"],[1,"item-price"],["alt","\u91D1\u5E63",1,"price-coin-icon",3,"src"],[1,"confirm-item"],[1,"confirm-info"],[1,"confirm-name"],[1,"confirm-unit-price"],[1,"quantity-section"],[1,"quantity-label"],[1,"quantity-controls"],[1,"quantity-btn",3,"click","disabled"],["type","number","min","1","max","99",1,"quantity-input",3,"ngModelChange","input","ngModel"],[1,"total-section"],[1,"total-label"],[1,"total-amount"],["alt","\u91D1\u5E63",1,"total-coin-icon",3,"src"],[1,"total-price"],[1,"balance-check"],[1,"current-balance"],["alt","\u91D1\u5E63",1,"balance-coin-icon",3,"src"],["class","after-purchase",4,"ngIf"],["class","insufficient-notice",4,"ngIf"],[1,"after-purchase"],[1,"insufficient-notice"],[1,"error-text"]],template:function(t,i){t&1&&(u(0,"div",0),b("click",function(o){return i.onBackdropClick(o)}),u(1,"div",1),b("click",function(o){return o.stopPropagation()}),u(2,"div",2)(3,"div",3)(4,"h5",4),m(5,"\u5546\u5E97"),f(),u(6,"div",5),A(7,"img",6),u(8,"span",7),m(9),f()(),u(10,"button",8),b("click",function(){return i.onClose()}),u(11,"span"),m(12,"\xD7"),f()()(),u(13,"div",9),N(14,LE,2,3,"button",10),f(),u(15,"div",11)(16,"div",12),N(17,VE,10,5,"div",13),f()()()()(),u(18,"div",14),b("click",function(o){return i.onConfirmBackdropClick(o)}),u(19,"div",15),b("click",function(o){return o.stopPropagation()}),u(20,"div",2)(21,"div",3)(22,"h5",4),m(23,"\u8CFC\u8CB7\u5546\u54C1"),f(),u(24,"button",8),b("click",function(){return i.closeConfirmModal()}),u(25,"span"),m(26,"\xD7"),f()()(),N(27,BE,33,16,"div",16),u(28,"div",17)(29,"button",18),b("click",function(){return i.closeConfirmModal()}),m(30,"\u53D6\u6D88"),f(),u(31,"button",19),b("click",function(){return i.confirmPurchase()}),m(32," \u78BA\u8A8D\u8CFC\u8CB7 "),f()()()()()),t&2&&(F("show",i.isVisible),h(7),y("src",i.coinIcon,$),h(2),q(i.currentCoins),h(5),y("ngForOf",i.tabs),h(3),y("ngForOf",i.currentTabItems),h(),F("show",i.showConfirmModal),h(9),y("ngIf",i.selectedItem),h(4),y("disabled",!i.canAfford))},dependencies:[U,Ne,ye,rr,An,uo,ir,ho,fo,ci],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;visibility:hidden;transition:all .3s ease}.modal-backdrop.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-backdrop.confirm-modal[_ngcontent-%COMP%]{z-index:1100}.modal-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:700px;max-height:85vh;box-shadow:0 8px 24px #0000004d;transform:scale(.9);transition:transform .3s ease}.modal-dialog.small[_ngcontent-%COMP%]{max-width:450px}.modal-backdrop.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:scale(1)}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.user-coins[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;background:#f8f9fa;padding:8px 12px;border-radius:20px;border:2px solid #e9ecef}.coin-icon[_ngcontent-%COMP%]{width:24px;height:24px}.coin-amount[_ngcontent-%COMP%]{font-weight:600;color:#495057}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999;transition:color .2s ease}.close-btn[_ngcontent-%COMP%]:hover{color:#666}.modal-tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #eee;background:#f8f9fa}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:12px 16px;background:none;border:none;cursor:pointer;font-size:14px;color:#666;transition:all .2s ease;border-bottom:3px solid transparent}.tab-btn[_ngcontent-%COMP%]:hover{background:#e9ecef;color:#333}.tab-btn.active[_ngcontent-%COMP%]{color:#28a745;border-bottom-color:#28a745;background:#fff}.modal-body[_ngcontent-%COMP%]{flex:1;padding:20px;overflow-y:auto}.items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:16px}.item-card[_ngcontent-%COMP%]{border:2px solid #e9ecef;border-radius:8px;padding:16px;cursor:pointer;transition:all .2s ease;text-align:center;background:#fff}.item-card[_ngcontent-%COMP%]:hover{border-color:#28a745;transform:translateY(-2px);box-shadow:0 4px 12px #28a74533}.item-image[_ngcontent-%COMP%]{width:70px;height:70px;margin:0 auto 12px;border-radius:6px;overflow:hidden;background:#f8f9fa;display:flex;align-items:center;justify-content:center}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.item-info[_ngcontent-%COMP%]{font-size:12px}.item-name[_ngcontent-%COMP%]{font-weight:500;color:#333;margin-bottom:6px;line-height:1.3}.item-price[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px;color:#28a745;font-weight:600}.price-coin-icon[_ngcontent-%COMP%], .balance-coin-icon[_ngcontent-%COMP%]{width:16px;height:16px}.total-coin-icon[_ngcontent-%COMP%]{width:20px;height:20px}.confirm-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px;padding:16px;background:#f8f9fa;border-radius:8px}.confirm-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:contain;margin-right:16px}.confirm-info[_ngcontent-%COMP%]{flex:1}.confirm-name[_ngcontent-%COMP%]{font-weight:500;color:#333;margin-bottom:6px;font-size:16px}.confirm-unit-price[_ngcontent-%COMP%]{font-size:14px;color:#666;display:flex;align-items:center;gap:4px}.quantity-section[_ngcontent-%COMP%]{margin-bottom:20px}.quantity-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#333}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;justify-content:center}.quantity-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:2px solid #dee2e6;background:#fff;border-radius:6px;cursor:pointer;font-size:18px;font-weight:600;color:#495057;transition:all .2s ease}.quantity-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#28a745;color:#28a745}.quantity-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.quantity-input[_ngcontent-%COMP%]{width:80px;height:40px;text-align:center;border:2px solid #dee2e6;border-radius:6px;font-size:16px;font-weight:600}.quantity-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#28a745}.total-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:#e8f5e8;border-radius:8px;margin-bottom:16px}.total-label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333}.total-amount[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.total-price[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#28a745}.balance-check[_ngcontent-%COMP%]{padding:12px;border-radius:8px;border:2px solid #d4edda;background:#d4edda;margin-bottom:16px}.balance-check.insufficient[_ngcontent-%COMP%]{border-color:#f8d7da;background:#f8d7da}.current-balance[_ngcontent-%COMP%], .after-purchase[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:14px;color:#155724;margin-bottom:4px}.insufficient[_ngcontent-%COMP%]   .current-balance[_ngcontent-%COMP%]{color:#721c24}.insufficient-notice[_ngcontent-%COMP%]{margin-top:8px}.error-text[_ngcontent-%COMP%]{color:#721c24;font-weight:600}.modal-footer[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:12px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;border:none;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn-primary[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#218838}.btn-primary[_ngcontent-%COMP%]:disabled{background:#c3c3c3;cursor:not-allowed}@media (max-width: 768px){.items-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px}.item-card[_ngcontent-%COMP%]{padding:12px}.item-image[_ngcontent-%COMP%]{width:60px;height:60px}}"]})};function UE(n,e){if(n&1){let t=te();u(0,"button",12),b("click",function(){let r=w(t).$implicit,o=S();return I(o.switchTab(r.key))}),m(1),f()}if(n&2){let t=e.$implicit,i=S();F("active",i.activeTab===t.key),h(),Y(" ",t.label," ")}}function $E(n,e){if(n&1&&(u(0,"div",23),A(1,"img",24),f()),n&2){let t=S(3);h(),y("src",t.unlockedIcon,$)}}function zE(n,e){if(n&1&&(u(0,"div",25),m(1),f()),n&2){let t=S().$implicit;h(),Y("\u6536\u96C6\u6B21\u6578: ",t.collectedCount,"")}}function WE(n,e){n&1&&(u(0,"div",26),m(1,"\u672A\u89E3\u9396"),f())}function GE(n,e){if(n&1&&(u(0,"div",15)(1,"div",16),A(2,"img",17),N(3,$E,2,1,"div",18),f(),u(4,"div",19)(5,"div",20),m(6),f(),N(7,zE,2,1,"div",21)(8,WE,2,0,"div",22),f()()),n&2){let t=e.$implicit;h(2),y("src",t.imageSource,$)("alt",t.rareName),h(),y("ngIf",t.isUnlocked===0),h(3),q(t.isUnlocked===1?t.rareName:"???"),h(),y("ngIf",t.isUnlocked===1),h(),y("ngIf",t.isUnlocked===0)}}function qE(n,e){if(n&1&&(u(0,"div",13),N(1,GE,9,6,"div",14),f()),n&2){let t=S();h(),y("ngForOf",t.collectionData.EGG)}}function YE(n,e){if(n&1&&(u(0,"div",23),A(1,"img",24),f()),n&2){let t=S(3);h(),y("src",t.unlockedIcon,$)}}function QE(n,e){if(n&1&&(u(0,"div",25),m(1),f()),n&2){let t=S().$implicit;h(),Y("\u6536\u96C6\u6B21\u6578: ",t.collectedCount,"")}}function ZE(n,e){n&1&&(u(0,"div",26),m(1,"\u672A\u89E3\u9396"),f())}function KE(n,e){if(n&1&&(u(0,"div",15)(1,"div",16),A(2,"img",27),N(3,YE,2,1,"div",18),f(),u(4,"div",19)(5,"div",20),m(6),f(),N(7,QE,2,1,"div",21)(8,ZE,2,0,"div",22),f()()),n&2){let t=e.$implicit;h(2),y("src",t.imageSource,$),h(),y("ngIf",t.isUnlocked===0),h(3),q(t.isUnlocked===1?"\u5E7C\u5E74\u5C0F\u96DE":"???"),h(),y("ngIf",t.isUnlocked===1),h(),y("ngIf",t.isUnlocked===0)}}function JE(n,e){if(n&1&&(u(0,"div",13),N(1,KE,9,5,"div",14),f()),n&2){let t=S();h(),y("ngForOf",t.collectionData.CHILD)}}function XE(n,e){if(n&1&&(u(0,"div",23),A(1,"img",24),f()),n&2){let t=S(3);h(),y("src",t.unlockedIcon,$)}}function eM(n,e){if(n&1&&(u(0,"div",25),m(1),f()),n&2){let t=S().$implicit;h(),Y("\u6536\u96C6\u6B21\u6578: ",t.collectedCount,"")}}function tM(n,e){n&1&&(u(0,"div",26),m(1,"\u672A\u89E3\u9396"),f())}function nM(n,e){if(n&1&&(u(0,"div",15)(1,"div",16),A(2,"img",17),N(3,XE,2,1,"div",18),f(),u(4,"div",19)(5,"div",20),m(6),f(),N(7,eM,2,1,"div",21)(8,tM,2,0,"div",22),f()()),n&2){let t=e.$implicit,i=S(2);h(2),y("src",t.imageSource,$)("alt",t.breedName),h(),y("ngIf",t.isUnlocked===0),h(3),q(t.isUnlocked===1?i.getBreedDisplayName(t.breedName):"???"),h(),y("ngIf",t.isUnlocked===1),h(),y("ngIf",t.isUnlocked===0)}}function iM(n,e){if(n&1&&(u(0,"div",13),N(1,nM,9,6,"div",14),f()),n&2){let t=S();h(),y("ngForOf",t.collectionData.EVOLUTION)}}function rM(n,e){if(n&1&&(u(0,"div",23),A(1,"img",24),f()),n&2){let t=S(3);h(),y("src",t.unlockedIcon,$)}}function oM(n,e){if(n&1&&(u(0,"div",25),m(1),f()),n&2){let t=S().$implicit;h(),Y("\u6536\u96C6\u6B21\u6578: ",t.collectedCount,"")}}function sM(n,e){n&1&&(u(0,"div",26),m(1,"\u672A\u89E3\u9396"),f())}function aM(n,e){if(n&1&&(u(0,"div",15)(1,"div",16),A(2,"img",17),N(3,rM,2,1,"div",18),f(),u(4,"div",19)(5,"div",20),m(6),f(),N(7,oM,2,1,"div",21)(8,sM,2,0,"div",22),f()()),n&2){let t=e.$implicit,i=S(2);h(2),y("src",t.imageSource,$)("alt",t.breedName),h(),y("ngIf",t.isUnlocked===0),h(3),q(t.isUnlocked===1?i.getBreedDisplayName(t.breedName):"???"),h(),y("ngIf",t.isUnlocked===1),h(),y("ngIf",t.isUnlocked===0)}}function cM(n,e){if(n&1&&(u(0,"div",13),N(1,aM,9,6,"div",14),f()),n&2){let t=S();h(),y("ngForOf",t.collectionData.COOKED)}}var qa=class n{close=new G;isVisible=!1;activeTab="EGG";collectionData=Re.loadCollectionData();collectionStats=Re.getCollectionStats(this.collectionData);unlockedIcon=x.character.others.unlocked;tabs=[{key:"EGG",label:"\u86CB"},{key:"CHILD",label:"\u5E7C\u5E74"},{key:"EVOLUTION",label:"\u9032\u5316"},{key:"COOKED",label:"\u719F\u6210"}];ngOnInit(){this.loadCollectionData()}show(){this.loadCollectionData(),this.isVisible=!0}onClose(){this.isVisible=!1,this.close.emit()}onBackdropClick(e){e.target===e.currentTarget&&this.onClose()}switchTab(e){this.activeTab=e}loadCollectionData(){this.collectionData=Re.loadCollectionData(),this.collectionStats=Re.getCollectionStats(this.collectionData)}getBreedDisplayName(e){return gn(e)?.breedName||e}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=j({type:n,selectors:[["app-collection-modal"]],outputs:{close:"close"},standalone:!0,features:[H],decls:19,vars:10,consts:[[1,"modal-backdrop",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"collection-stats"],[1,"stats-text"],["type","button",1,"close-btn",3,"click"],[1,"modal-tabs"],["class","tab-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"modal-body"],["class","collection-grid",4,"ngIf"],[1,"tab-btn",3,"click"],[1,"collection-grid"],["class","collection-item",4,"ngFor","ngForOf"],[1,"collection-item"],[1,"item-image-container"],[1,"item-image",3,"src","alt"],["class","locked-overlay",4,"ngIf"],[1,"item-info"],[1,"item-name"],["class","item-count",4,"ngIf"],["class","item-locked",4,"ngIf"],[1,"locked-overlay"],["alt","\u672A\u89E3\u9396",1,"locked-icon",3,"src"],[1,"item-count"],[1,"item-locked"],["alt","\u5E7C\u5E74\u5C0F\u96DE",1,"item-image",3,"src"]],template:function(t,i){t&1&&(u(0,"div",0),b("click",function(o){return i.onBackdropClick(o)}),u(1,"div",1),b("click",function(o){return o.stopPropagation()}),u(2,"div",2)(3,"div",3)(4,"h5",4),m(5,"\u5716\u9451"),f(),u(6,"div",5)(7,"span",6),m(8),f()(),u(9,"button",7),b("click",function(){return i.onClose()}),u(10,"span"),m(11,"\xD7"),f()()(),u(12,"div",8),N(13,UE,2,3,"button",9),f(),u(14,"div",10),N(15,qE,2,1,"div",11)(16,JE,2,1,"div",11)(17,iM,2,1,"div",11)(18,cM,2,1,"div",11),f()()()()),t&2&&(F("show",i.isVisible),h(8),Cu("\u6536\u96C6\u9032\u5EA6: ",i.collectionStats.unlockedBreeds,"/",i.collectionStats.totalBreeds," (",i.collectionStats.completionRate,"%)"),h(5),y("ngForOf",i.tabs),h(2),y("ngIf",i.activeTab==="EGG"),h(),y("ngIf",i.activeTab==="CHILD"),h(),y("ngIf",i.activeTab==="EVOLUTION"),h(),y("ngIf",i.activeTab==="COOKED"))},dependencies:[U,Ne,ye],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;display:flex;justify-content:center;align-items:center;z-index:2000;opacity:0;visibility:hidden;transition:all .3s ease}.modal-backdrop.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-dialog[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;width:90%;max-width:800px;max-height:85vh;overflow:hidden;box-shadow:0 8px 24px #0000004d;transform:scale(.9);transition:transform .3s ease}.modal-backdrop.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:scale(1)}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e9ecef;background-color:#f8f9fa}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.collection-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.stats-text[_ngcontent-%COMP%]{font-size:14px;color:#666;font-weight:500}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#999;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.close-btn[_ngcontent-%COMP%]:hover{color:#666}.modal-tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #e9ecef;background-color:#f8f9fa}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:12px 16px;border:none;background:none;cursor:pointer;font-size:14px;font-weight:500;color:#666;border-bottom:2px solid transparent;transition:all .2s ease}.tab-btn[_ngcontent-%COMP%]:hover{background-color:#0000000d;color:#333}.tab-btn.active[_ngcontent-%COMP%]{color:#007bff;border-bottom-color:#007bff;background-color:#fff}.modal-body[_ngcontent-%COMP%]{padding:20px;max-height:60vh;overflow-y:auto}.collection-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px}.collection-item[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:12px;text-align:center;border:2px solid transparent;transition:all .2s ease}.collection-item[_ngcontent-%COMP%]:hover{border-color:#007bff;background:#fff}.item-image-container[_ngcontent-%COMP%]{position:relative;margin-bottom:8px}.item-image[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:contain;border-radius:4px}.locked-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;border-radius:4px}.locked-icon[_ngcontent-%COMP%]{width:32px;height:32px;opacity:.8}.item-info[_ngcontent-%COMP%]{text-align:center}.item-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;margin-bottom:4px}.item-count[_ngcontent-%COMP%]{font-size:12px;color:#666}.item-locked[_ngcontent-%COMP%]{font-size:12px;color:#999;font-style:italic}@media (max-width: 576px){.modal-dialog[_ngcontent-%COMP%]{width:95%;max-height:90vh}.collection-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px}.item-image[_ngcontent-%COMP%]{width:60px;height:60px}.modal-header[_ngcontent-%COMP%]{padding:12px 16px}.modal-title[_ngcontent-%COMP%]{font-size:16px}.stats-text[_ngcontent-%COMP%]{font-size:12px}.tab-btn[_ngcontent-%COMP%]{padding:10px 8px;font-size:12px}}"]})};function lM(n,e){if(n&1){let t=te();u(0,"div",1)(1,"div",2),b("click",function(){w(t);let r=S();return I(r.onCookingClick())}),A(2,"img",3),f(),u(3,"div",4)(4,"div",5)(5,"h4"),m(6,"\u719F\u6210\u689D\u4EF6"),f(),u(7,"ul")(8,"li"),m(9),f(),u(10,"li"),m(11),Mm(12,"number"),f(),u(13,"li"),m(14),f()(),u(15,"div",6),m(16),f()()()()}if(n&2){let t=S();h(),F("enabled",t.canCook)("disabled",!t.canCook),h(),y("src",t.cookedIcon,$),h(7),Y("\u597D\u611F\u5EA6 \u2265 90 (\u7576\u524D: ",t.petStats.currentFriendship.toFixed(1),")"),h(2),Y("\u5065\u5EB7\u5EA6 \u2265 90 (\u7576\u524D: ",xm(12,13,t.petStats.currentWellness,"1.0-0"),")"),h(3),Y("\u9032\u5316\u5F8C\u7D93\u904E 240 \u5C0F\u6642 (",t.getTimeProgress(),")"),h(),F("ready",t.canCook)("not-ready",!t.canCook),h(),Y(" ",t.canCook?"\u53EF\u4EE5\u719F\u6210\uFF01":"\u689D\u4EF6\u672A\u6EFF\u8DB3"," ")}}var Ya=class n{constructor(e,t,i,r){this.lifecycleService=e;this.modalService=t;this.customTimeService=i;this.coinsService=r}shouldShowButton=!1;canCook=!1;cookedIcon=x.otherIcons.cooked;petStats=D.loadPetStats();petStatsSubscription;ngOnInit(){this.updateButtonState(),this.petStatsSubscription=D.getPetStats$().subscribe(e=>{this.petStats=e,this.updateButtonState()})}ngOnDestroy(){this.petStatsSubscription&&this.petStatsSubscription.unsubscribe()}updateButtonState(){this.shouldShowButton=this.shouldShowCookingButton(),this.shouldShowButton&&(this.canCook=this.canStartCooking())}shouldShowCookingButton(){if(this.petStats.isCooked||this.petStats.isDead||this.petStats.lifeCycle!=="EVOLUTION"||!this.petStats.breedName)return!1;let e=Z.loadUserData(),t=Z.getCurrentPetRecord(e);if(!t||!t.evolutionTime)return!1;let i=new Date(t.evolutionTime);return(this.customTimeService.getCurrentTime().getTime()-i.getTime())/(1e3*60*60)>=240}canStartCooking(){return this.shouldShowButton?this.petStats.currentFriendship>=90&&this.petStats.currentWellness>=90:!1}getTimeProgress(){let e=Z.loadUserData(),t=Z.getCurrentPetRecord(e);if(!t||!t.evolutionTime)return"\u7121\u9032\u5316\u8A18\u9304";let i=new Date(t.evolutionTime),o=(this.customTimeService.getCurrentTime().getTime()-i.getTime())/(1e3*60*60),s=240;return o>=s?"\u5DF2\u6EFF\u8DB3\u6642\u9593\u689D\u4EF6":`\u9084\u9700 ${Math.ceil(s-o)} \u5C0F\u6642`}onCookingClick(){return Q(this,null,function*(){if(!this.canCook)return;let t=`\u78BA\u5B9A\u8981\u8B93 ${this.petStats.name||"\u96FB\u5B50\u96DE"} \u9032\u884C\u719F\u6210\u55CE\uFF1F

\u719F\u6210\u5F8C\u96FB\u5B50\u96DE\u5C07\u6703\u8B8A\u6210\u6700\u7D42\u5F62\u614B\uFF0C\u4F46\u4E5F\u6703\u7D50\u675F\u5176\u751F\u547D\u3002`;(yield this.modalService.confirm(t,"\u719F\u6210\u78BA\u8A8D"))&&this.performCooking()})}performCooking(){let e=this.petStats.name||"\u96FB\u5B50\u96DE",t=gn(this.petStats.breedName);if(!t){console.error("\u7121\u6CD5\u627E\u5230\u54C1\u7A2E\u8CC7\u6599");return}let i=_(g({},this.petStats),{isCooked:!0,isDead:!0,timeStopping:!0});D.savePetStats(i);let r=t.cookedEarned||0;r>0&&this.coinsService.addCoins(r,!0,"\u719F\u6210\u734E\u52F5");let o=Re.loadCollectionData();Re.unlockBreed(this.petStats.breedName,"COOKED",o),R.show(`${e}\uFF0C\u6210\u70BA\u4E86\u6700\u7F8E\u5473\u7684\u6A23\u5B50\uFF0C\u770B\u8D77\u4F86\u5F88\u5FEB\u6A02\u4E5F\u5F88\u53EF\u53E3`,"success")}static \u0275fac=function(t){return new(t||n)(T(Gt),T(ve),T(fe),T(st))};static \u0275cmp=j({type:n,selectors:[["app-cooking-button"]],standalone:!0,features:[H],decls:1,vars:1,consts:[["class","cooking-icon-wrapper",4,"ngIf"],[1,"cooking-icon-wrapper"],[1,"cooking-icon",3,"click"],["alt","\u53EF\u719F\u6210",1,"cooked-image",3,"src"],[1,"tooltip"],[1,"tooltip-content"],[1,"tooltip-status"]],template:function(t,i){t&1&&N(0,lM,17,16,"div",0),t&2&&y("ngIf",i.shouldShowButton)},dependencies:[U,ye,Xm],styles:['.cooking-icon-wrapper[_ngcontent-%COMP%]{position:fixed;left:20px;top:120px;z-index:800}.cooking-icon[_ngcontent-%COMP%]{display:inline-block;cursor:pointer;transition:all .3s ease}.cooking-icon[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.cooking-icon.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.7}.cooked-image[_ngcontent-%COMP%]{height:10dvh;width:auto;object-fit:contain}.tooltip[_ngcontent-%COMP%]{position:absolute;left:calc(10dvh + 10px);top:0;background:#000000e6;color:#fff;padding:12px;border-radius:8px;font-size:12px;white-space:normal;opacity:0;visibility:hidden;transform:translate(-10px);transition:all .3s ease;z-index:1000;min-width:280px}.cooking-icon[_ngcontent-%COMP%]:hover + .tooltip[_ngcontent-%COMP%], .tooltip[_ngcontent-%COMP%]:hover{opacity:1;visibility:visible;transform:translate(0)}.tooltip-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:gold;border-bottom:1px solid rgba(255,255,255,.3);padding-bottom:4px}.tooltip-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:8px 0;padding:0 0 0 16px;list-style:none}.tooltip-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:4px 0;position:relative;padding-left:8px}.tooltip-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2022";position:absolute;left:0;color:gold}.tooltip-status[_ngcontent-%COMP%]{margin-top:8px;padding:4px 8px;border-radius:4px;text-align:center;font-weight:700}.tooltip-status.ready[_ngcontent-%COMP%]{color:#90ee90}.tooltip-status.not-ready[_ngcontent-%COMP%]{background:#dc35454d;color:#ffb6c1}@media (max-width: 768px){.cooking-icon-wrapper[_ngcontent-%COMP%]{left:15px;top:100px}.tooltip[_ngcontent-%COMP%]{left:calc(10dvh + 10px);min-width:250px;font-size:11px}}@media (max-width: 576px){.cooking-icon-wrapper[_ngcontent-%COMP%]{left:10px;top:90px}.tooltip[_ngcontent-%COMP%]{left:calc(10dvh + 10px);min-width:220px;font-size:10px}}']})};var uM=["logPanel"];function dM(n,e){if(n&1){let t=te();u(0,"button",18),b("click",function(){w(t);let r=S(2);return I(r.clearLogs())}),m(1," \u6E05\u9664\u65E5\u8A8C "),f()}}function fM(n,e){if(n&1&&(u(0,"div",28),m(1),f()),n&2){let t=S().$implicit;h(),q(t.title)}}function hM(n,e){if(n&1&&(u(0,"div",21)(1,"div",22),m(2),f(),u(3,"div",23)(4,"div",24),m(5),f(),u(6,"div",25),N(7,fM,2,1,"div",26),u(8,"div",27),m(9),f()()()()),n&2){let t=e.$implicit,i=S(3);y("ngClass","log-"+t.category),h(2),q(i.formatTime(t.timestamp)),h(2),y("ngClass","badge-"+t.type),h(),Y(" ",t.type==="toastr"?"T":"M"," "),h(2),y("ngIf",t.title),h(2),q(t.message)}}function pM(n,e){if(n&1&&(u(0,"div",19),N(1,hM,10,6,"div",20),f()),n&2){let t=S(2);h(),y("ngForOf",t.filteredEntries)("ngForTrackBy",t.trackByLogId)}}function mM(n,e){n&1&&(u(0,"div"),m(1," \u5C1A\u7121\u65E5\u8A8C\u8A18\u9304 "),f())}function gM(n,e){n&1&&(u(0,"div"),m(1,"\u6C92\u6709\u7B26\u5408\u7BE9\u9078\u689D\u4EF6\u7684\u65E5\u8A8C"),f())}function vM(n,e){if(n&1&&(u(0,"div",29),N(1,mM,2,0,"div",30)(2,gM,2,0,"ng-template",null,2,bu),f()),n&2){let t=yu(3),i=S(2);h(),y("ngIf",i.selectedFilter==="all")("ngIfElse",t)}}function yM(n,e){if(n&1){let t=te();u(0,"div",8)(1,"div",9),N(2,dM,2,0,"button",10),u(3,"div",11)(4,"button",12),b("click",function(){w(t);let r=S();return I(r.setFilter("all"))}),m(5," \u5168\u90E8 "),f(),u(6,"button",13),b("click",function(){w(t);let r=S();return I(r.setFilter("success"))}),m(7," \u6210\u529F "),f(),u(8,"button",14),b("click",function(){w(t);let r=S();return I(r.setFilter("info"))}),m(9," \u8CC7\u8A0A "),f(),u(10,"button",15),b("click",function(){w(t);let r=S();return I(r.setFilter("warning"))}),m(11," \u8B66\u544A "),f(),u(12,"button",16),b("click",function(){w(t);let r=S();return I(r.setFilter("error"))}),m(13," \u6263\u503C "),f()()(),N(14,pM,2,2,"div",17)(15,vM,4,2,"ng-template",null,1,bu),f()}if(n&2){let t=yu(16),i=S();F("show-content",i.showContent),h(2),y("ngIf",i.logCount>0),h(2),F("active",i.selectedFilter==="all"),h(2),F("active",i.selectedFilter==="success"),h(2),F("active",i.selectedFilter==="info"),h(2),F("active",i.selectedFilter==="warning"),h(2),F("active",i.selectedFilter==="error"),h(2),y("ngIf",i.filteredEntries.length>0)("ngIfElse",t)}}var Qa=class n{constructor(e){this.logService=e}logPanel;isExpanded=!1;isAnimating=!1;showContent=!1;headerMouseDownTime=0;logData={entries:[]};logCount=0;selectedFilter="all";filteredEntries=[];position={x:20,y:100};isDragging=!1;dragOffset={x:0,y:0};logSubscription;ngOnInit(){this.logSubscription=this.logService.getLogData$().subscribe(e=>{this.logData=e,this.logCount=e.entries.length,this.updateFilteredEntries()}),document.addEventListener("mousemove",this.onDragMove.bind(this)),document.addEventListener("mouseup",this.onDragEnd.bind(this))}ngOnDestroy(){this.logSubscription&&this.logSubscription.unsubscribe(),document.removeEventListener("mousemove",this.onDragMove.bind(this)),document.removeEventListener("mouseup",this.onDragEnd.bind(this))}togglePanel(){this.isAnimating||(this.isExpanded?this.closePanel():this.openPanel())}openPanel(){this.isAnimating=!0,this.isExpanded=!0,setTimeout(()=>{this.showContent=!0,this.isAnimating=!1},300)}closePanel(){this.isAnimating=!0,this.showContent=!1,setTimeout(()=>{this.isExpanded=!1,this.isAnimating=!1},200)}clearLogs(){this.logService.clearLogs()}setFilter(e){this.selectedFilter=e,this.updateFilteredEntries()}updateFilteredEntries(){this.selectedFilter==="all"?this.filteredEntries=this.logData.entries:this.filteredEntries=this.logData.entries.filter(e=>e.category===this.selectedFilter)}formatTime(e){let t=e.split(" ");if(t.length===2){let i=t[0].split("/"),r=t[1];if(i.length===3)return`${i[1]}/${i[2]} ${r.substring(0,5)}`}return e}trackByLogId(e,t){return t.id}onHeaderMouseDown(e){this.headerMouseDownTime=Date.now()}onHeaderClick(e){Date.now()-this.headerMouseDownTime<200&&!this.isDragging&&this.togglePanel(),e.stopPropagation()}onDragStart(e){this.isDragging=!0,this.logPanel.nativeElement.classList.add("dragging");let t=this.logPanel.nativeElement.getBoundingClientRect();this.dragOffset.x=e.clientX-t.left,this.dragOffset.y=e.clientY-t.top,e.preventDefault(),e.stopPropagation()}onDragMove(e){if(!this.isDragging)return;let t=e.clientX-this.dragOffset.x,i=window.innerHeight-e.clientY+this.dragOffset.y-this.logPanel.nativeElement.offsetHeight,r=this.logPanel.nativeElement.offsetWidth,o=this.logPanel.nativeElement.offsetHeight;this.position.x=Math.max(0,Math.min(t,window.innerWidth-r)),this.position.y=Math.max(0,Math.min(i,window.innerHeight-o)),e.preventDefault()}onDragEnd(e){this.isDragging&&(this.isDragging=!1,this.logPanel.nativeElement.classList.remove("dragging"),setTimeout(()=>{this.headerMouseDownTime=0},10))}static \u0275fac=function(t){return new(t||n)(T(ot))};static \u0275cmp=j({type:n,selectors:[["app-log-panel"]],viewQuery:function(t,i){if(t&1&&ke(uM,7),t&2){let r;Oe(r=Pe())&&(i.logPanel=r.first)}},standalone:!0,features:[H],decls:8,vars:10,consts:[["logPanel",""],["noLogs",""],["noFilteredLogs",""],[1,"log-panel",3,"mousedown"],[1,"log-header",3,"click","mousedown"],[1,"log-title"],[1,"toggle-icon"],["class","log-content",3,"show-content",4,"ngIf"],[1,"log-content"],[1,"log-controls"],["class","clear-btn",3,"click",4,"ngIf"],[1,"log-filters"],[1,"filter-btn",3,"click"],[1,"filter-btn","filter-success",3,"click"],[1,"filter-btn","filter-info",3,"click"],[1,"filter-btn","filter-warning",3,"click"],[1,"filter-btn","filter-error",3,"click"],["class","log-entries",4,"ngIf","ngIfElse"],[1,"clear-btn",3,"click"],[1,"log-entries"],["class","log-entry",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"log-entry",3,"ngClass"],[1,"log-time"],[1,"log-content-text"],[1,"log-type-badge",3,"ngClass"],[1,"log-message"],["class","log-title-text",4,"ngIf"],[1,"log-message-text"],[1,"log-title-text"],[1,"no-logs"],[4,"ngIf","ngIfElse"]],template:function(t,i){if(t&1){let r=te();u(0,"div",3,0),b("mousedown",function(s){return w(r),I(i.onDragStart(s))}),u(2,"div",4),b("click",function(s){return w(r),I(i.onHeaderClick(s))})("mousedown",function(s){return w(r),I(i.onHeaderMouseDown(s))}),u(3,"span",5),m(4),f(),u(5,"span",6),m(6,"\u25B2"),f()(),N(7,yM,17,15,"div",7),f()}t&2&&(je("left",i.position.x,"px")("bottom",i.position.y,"px"),F("expanded",i.isExpanded),h(4),Y("\u65E5\u8A8C (",i.logCount,")"),h(),F("rotated",i.isExpanded),h(2),y("ngIf",i.isExpanded))},dependencies:[U,Jm,Ne,ye],styles:[".log-panel[_ngcontent-%COMP%]{position:fixed;width:100px;min-width:100px;max-height:40px;background:#000c;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:10px;color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:12px;z-index:1500;transition:all .3s ease;cursor:move}.log-panel.expanded[_ngcontent-%COMP%]{width:400px;max-height:50dvh}.log-panel.dragging[_ngcontent-%COMP%]{cursor:grabbing;transition:none}.log-header[_ngcontent-%COMP%]{padding:10px 15px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;background:#ffffff1a;border-radius:10px;-webkit-user-select:none;user-select:none}.log-panel.expanded[_ngcontent-%COMP%]   .log-header[_ngcontent-%COMP%]{border-radius:10px 10px 0 0}.log-header[_ngcontent-%COMP%]:hover{background:#ffffff26}.log-title[_ngcontent-%COMP%]{font-weight:600;font-size:13px}.toggle-icon[_ngcontent-%COMP%]{transition:transform .3s ease;font-size:10px}.toggle-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.log-content[_ngcontent-%COMP%]{max-height:calc(50dvh - 50px);overflow:hidden;display:flex;flex-direction:column;opacity:0;transition:opacity .2s ease}.log-content.show-content[_ngcontent-%COMP%]{opacity:1}.log-controls[_ngcontent-%COMP%]{padding:10px 15px;border-bottom:1px solid rgba(255,255,255,.1);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:5px}.clear-btn[_ngcontent-%COMP%]{background:#ff646433;color:#fff;border:1px solid rgba(255,100,100,.3);padding:4px 8px;border-radius:4px;cursor:pointer;font-size:11px;transition:all .2s ease}.clear-btn[_ngcontent-%COMP%]:hover{background:#ff64644d;border-color:#ff646480}.log-filters[_ngcontent-%COMP%]{display:flex;gap:3px}.filter-btn[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2);padding:3px 6px;border-radius:3px;cursor:pointer;font-size:10px;transition:all .2s ease}.filter-btn[_ngcontent-%COMP%]:hover, .filter-btn.active[_ngcontent-%COMP%]{background:#fff3;border-color:#fff6}.filter-success.active[_ngcontent-%COMP%]{background:#4caf504d}.filter-info.active[_ngcontent-%COMP%]{background:#2196f34d}.filter-warning.active[_ngcontent-%COMP%]{background:#ff98004d}.filter-error.active[_ngcontent-%COMP%]{background:#f443364d}.log-entries[_ngcontent-%COMP%]{flex:1;overflow-y:auto;max-height:calc(50dvh - 120px);padding:5px}.log-entries[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.log-entries[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:3px}.log-entries[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.log-entries[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}.log-entry[_ngcontent-%COMP%]{margin-bottom:8px;padding:8px 10px;border-radius:6px;border-left:3px solid;background:#ffffff0d}.log-success[_ngcontent-%COMP%]{border-left-color:#4caf50}.log-info[_ngcontent-%COMP%]{border-left-color:#2196f3}.log-warning[_ngcontent-%COMP%]{border-left-color:#ff9800}.log-error[_ngcontent-%COMP%]{border-left-color:#f44336}.log-time[_ngcontent-%COMP%]{font-size:10px;opacity:.7;margin-bottom:4px}.log-content-text[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:flex-start}.log-type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;border-radius:3px;font-size:9px;font-weight:700;flex-shrink:0;margin-top:1px}.badge-toastr[_ngcontent-%COMP%]{background:#2196f3cc;color:#fff}.badge-modal[_ngcontent-%COMP%]{background:#9c27b0cc;color:#fff}.log-message[_ngcontent-%COMP%]{flex:1;line-height:1.4}.log-title-text[_ngcontent-%COMP%]{font-weight:600;margin-bottom:2px;color:#ffffffe6}.log-message-text[_ngcontent-%COMP%]{color:#fffc;word-break:break-word}.no-logs[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#fff9;font-style:italic}@media (max-width: 768px){.log-panel[_ngcontent-%COMP%]{width:100%;max-width:100%}.log-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:8px}.log-filters[_ngcontent-%COMP%]{justify-content:center}}"]})};var CM=["roomWrapper"],bM=["inventoryModal"],SM=["shopModal"],DM=["collectionModal"];function _M(n,e){n&1&&A(0,"app-status-bar")}function wM(n,e){n&1&&A(0,"app-log-panel")}var Za=class n{constructor(e,t){this.lightService=e;this.logService=t}roomWrapper;inventoryModal;shopModal;collectionModal;backgroundImageSrc=x.scene.roomDayLightOn;isDragging=!1;startX=0;scrollLeft=0;stateSubscription;petStatsSubscription;petStats=D.loadPetStats();ngOnInit(){document.addEventListener("mousemove",this.onDragMove.bind(this)),document.addEventListener("mouseup",this.onDragEnd.bind(this)),document.addEventListener("touchmove",this.onDragMove.bind(this)),document.addEventListener("touchend",this.onDragEnd.bind(this)),this.centerRoom(),this.updateBackgroundImage(),this.startStateMonitoring(),this.petStatsSubscription=D.getPetStats$().subscribe(e=>{this.petStats=e})}ngOnDestroy(){this.stateSubscription&&this.stateSubscription.unsubscribe(),this.petStatsSubscription&&this.petStatsSubscription.unsubscribe()}centerRoom(){let e=this.roomWrapper.nativeElement,t=e.querySelector(".room-container"),i=e.querySelector(".room-background");t&&i&&(this.performCentering(e,t),i.complete||(i.onload=()=>{this.performCentering(e,t)}))}performCentering(e,t){let i=t.scrollWidth,r=e.clientWidth,o=Math.max(0,(i-r)/2);e.scrollLeft=o}resetToCenter(){this.centerRoom()}onDragStart(e){let t=e.target;if(!t.classList.contains("room-background"))return;this.isDragging=!0;let i=e instanceof MouseEvent?e.clientX:e.touches[0].clientX;this.startX=i,this.scrollLeft=this.roomWrapper.nativeElement.scrollLeft,t.classList.add("dragging"),e.preventDefault(),e.stopPropagation()}onDragMove(e){if(!this.isDragging)return;let t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=(this.startX-t)*1,r=this.scrollLeft+i,o=this.roomWrapper.nativeElement.scrollWidth-this.roomWrapper.nativeElement.clientWidth;this.roomWrapper.nativeElement.scrollLeft=Math.max(0,Math.min(r,o)),e.preventDefault(),e.stopPropagation()}onDragEnd(e){if(!this.isDragging)return;this.isDragging=!1,this.roomWrapper.nativeElement.querySelector(".room-background")?.classList.remove("dragging")}startStateMonitoring(){this.stateSubscription=new ge;let e=setInterval(()=>{this.updateBackgroundImage()},1e3);this.stateSubscription.add(()=>clearInterval(e))}updateBackgroundImage(){let e=this.lightService.isLightOn,t=this.lightService.isDay;e===1&&t===1?this.backgroundImageSrc=x.scene.roomDayLightOn:e===0&&t===1?this.backgroundImageSrc=x.scene.roomDayLightOff:e===1&&t===0?this.backgroundImageSrc=x.scene.roomNightLightOn:e===0&&t===0&&(this.backgroundImageSrc=x.scene.roomNightLightOff)}openInventoryModal(){this.inventoryModal.show("food")}onInventoryModalClose(){}openShopModal(){this.shopModal.show()}onShopModalClose(){}openCollectionModal(){this.collectionModal.show()}onCollectionModalClose(){}onPurchaseSuccess(e){}onItemUsed(e){}shouldHideUIComponents(){return this.petStats.isDead||this.petStats.isFreezing||this.petStats.isCooked}static \u0275fac=function(t){return new(t||n)(T(We),T(ot))};static \u0275cmp=j({type:n,selectors:[["app-room"]],viewQuery:function(t,i){if(t&1&&(ke(CM,7),ke(bM,5),ke(SM,5),ke(DM,5)),t&2){let r;Oe(r=Pe())&&(i.roomWrapper=r.first),Oe(r=Pe())&&(i.inventoryModal=r.first),Oe(r=Pe())&&(i.shopModal=r.first),Oe(r=Pe())&&(i.collectionModal=r.first)}},standalone:!0,features:[H],decls:20,vars:3,consts:[["roomWrapper",""],["inventoryModal",""],["shopModal",""],["collectionModal",""],[1,"room-wrapper"],[1,"room-container"],["alt","Room Background",1,"room-background",3,"mousedown","touchstart","src"],[3,"openShopModal","openCollectionModal"],[3,"openInventory"],[4,"ngIf"],[3,"close","openShopModal","itemUsed"],[3,"close","purchaseSuccess"],[3,"close"]],template:function(t,i){if(t&1){let r=te();u(0,"div",4,0)(2,"div",5)(3,"img",6),b("mousedown",function(s){return w(r),I(i.onDragStart(s))})("touchstart",function(s){return w(r),I(i.onDragStart(s))}),f(),A(4,"app-window")(5,"app-bed")(6,"app-character")(7,"app-dirty-display")(8,"app-cooking-button"),f(),u(9,"app-header",7),b("openShopModal",function(){return w(r),I(i.openShopModal())})("openCollectionModal",function(){return w(r),I(i.openCollectionModal())}),f(),u(10,"app-sidebar",8),b("openInventory",function(){return w(r),I(i.openInventoryModal())}),f(),N(11,_M,1,0,"app-status-bar",9),A(12,"app-toastr"),N(13,wM,1,0,"app-log-panel",9),u(14,"app-inventory-modal",10,1),b("close",function(){return w(r),I(i.onInventoryModalClose())})("openShopModal",function(){return w(r),I(i.openShopModal())})("itemUsed",function(s){return w(r),I(i.onItemUsed(s))}),f(),u(16,"app-shop-modal",11,2),b("close",function(){return w(r),I(i.onShopModalClose())})("purchaseSuccess",function(s){return w(r),I(i.onPurchaseSuccess(s))}),f(),u(18,"app-collection-modal",12,3),b("close",function(){return w(r),I(i.onCollectionModalClose())}),f()()}t&2&&(h(3),y("src",i.backgroundImageSrc,$),h(8),y("ngIf",!i.shouldHideUIComponents()),h(2),y("ngIf",!i.shouldHideUIComponents()))},dependencies:[U,ye,Pa,Aa,ka,Na,Ba,Ua,Ia,za,Wa,Ga,qa,Ya,Qa],styles:[".room-wrapper[_ngcontent-%COMP%]{width:100%;height:100vh;overflow-x:auto;overflow-y:hidden;scrollbar-width:none;-ms-overflow-style:none;scroll-behavior:auto}.room-background[_ngcontent-%COMP%]{cursor:grab;-webkit-user-select:none;user-select:none;touch-action:pan-x}.room-background.dragging[_ngcontent-%COMP%]{cursor:grabbing}img[_ngcontent-%COMP%]{user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none}app-window[_ngcontent-%COMP%], app-bed[_ngcontent-%COMP%], app-character[_ngcontent-%COMP%]{pointer-events:auto;z-index:600}.room-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.room-container[_ngcontent-%COMP%]{position:relative;display:inline-block;height:100dvh}.room-background[_ngcontent-%COMP%]{top:0;left:0;width:auto;height:100dvh;z-index:-1;object-fit:contain}"]})};var Ka=class n{constructor(e){this.whiteTransitionService=e}isActive=!1;isFadingOut=!1;ngOnInit(){this.whiteTransitionService.fadeIn$.subscribe(e=>{e&&this.startFadeIn()}),this.whiteTransitionService.fadeOut$.subscribe(e=>{e&&this.startFadeOut()})}ngOnDestroy(){}startFadeIn(){this.isActive=!0,this.isFadingOut=!1,setTimeout(()=>{this.whiteTransitionService.triggerScenePreparation()},600)}startFadeOut(){this.isFadingOut=!0,setTimeout(()=>{this.isActive=!1,this.isFadingOut=!1,this.whiteTransitionService.reset()},800)}static \u0275fac=function(t){return new(t||n)(T(rt))};static \u0275cmp=j({type:n,selectors:[["app-white-transition"]],standalone:!0,features:[H],decls:1,vars:4,consts:[[1,"white-transition-overlay"]],template:function(t,i){t&1&&A(0,"div",0),t&2&&F("active",i.isActive)("fade-out",i.isFadingOut)},dependencies:[U],styles:[".white-transition-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#fff;z-index:99999;opacity:0;transition:opacity .6s ease-in-out,transform .8s ease-in-out;pointer-events:none;visibility:hidden}.white-transition-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}.white-transition-overlay.fade-out[_ngcontent-%COMP%]{opacity:0!important;transition:opacity .8s ease-out,transform 1s ease-out!important}"]})};var Ja=class n{petStatsSubscription;lastCheckedStats=null;constructor(){this.startMonitoring()}ngOnDestroy(){this.stopMonitoring()}startMonitoring(){this.petStatsSubscription=D.getPetStats$().subscribe(e=>{e.rare!==null&&(this.hasRelevantChanges(e)&&this.updateStatesBasedOnStats(e),this.lastCheckedStats=g({},e))})}stopMonitoring(){this.petStatsSubscription&&(this.petStatsSubscription.unsubscribe(),this.petStatsSubscription=void 0)}hasRelevantChanges(e){if(!this.lastCheckedStats)return!0;let t=this.lastCheckedStats;return e.currentHunger!==t.currentHunger||e.currentFriendship!==t.currentFriendship||e.currentWellness!==t.currentWellness||e.isLeaving!==t.isLeaving||e.isFreezing!==t.isFreezing||e.isDead!==t.isDead||e.timeStopping!==t.timeStopping||e.lifeCycle!==t.lifeCycle}updateStatesBasedOnStats(e){let t=P.loadStateData();this.updateHungryState(e,t),this.updateLowLikabilityState(e,t),this.updateWeakState(e,t),this.updateLeavingRelatedStates(e,t),this.updateFreezingRelatedStates(e,t)}updateHungryState(e,t){let i=e.currentHunger<=35&&!e.timeStopping&&(e.lifeCycle==="CHILD"||e.lifeCycle==="EVOLUTION");i&&t.hungry.isActive===0?P.activateState("hungry",t):!i&&t.hungry.isActive===1&&P.deactivateState("hungry",t)}updateLowLikabilityState(e,t){let i=e.currentFriendship<=30&&!e.timeStopping&&(e.lifeCycle==="CHILD"||e.lifeCycle==="EVOLUTION");i&&t.lowLikability.isActive===0?P.activateState("lowLikability",t):!i&&t.lowLikability.isActive===1&&P.deactivateState("lowLikability",t)}updateWeakState(e,t){let i=e.currentWellness<40&&!e.timeStopping&&(e.lifeCycle==="CHILD"||e.lifeCycle==="EVOLUTION");i&&t.weak.isActive===0?P.activateState("weak",t):!i&&t.weak.isActive===1&&P.deactivateState("weak",t)}updateLeavingRelatedStates(e,t){}updateFreezingRelatedStates(e,t){}forceStateUpdate(){let e=D.loadPetStats();e.rare!==null&&(this.updateStatesBasedOnStats(e),this.lastCheckedStats=g({},e))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var EM=["roomComponent"];function MM(n,e){n&1&&A(0,"app-welcome")}function xM(n,e){n&1&&A(0,"app-room",null,0)}var Xa=class n{constructor(e,t,i,r,o,s,a){this.whiteTransitionService=e;this.hungerManagerService=t;this.appStateService=i;this.injector=r;this.unifiedStatsCheckerService=o;this.realTimeStateMonitorService=s;this.logService=a;Ft.setInjector(this.injector),R.setLogService(this.logService),ve.setLogService(this.logService),this.unifiedStatsCheckerService.startUnifiedCheck()}roomComponent;title="achick";showWelcome=!0;showRoom=!1;ngOnInit(){this.whiteTransitionService.onWhiteReady(()=>{this.prepareScene()}),this.appStateService.showWelcome$.subscribe(e=>{this.showWelcome=e}),this.appStateService.showRoom$.subscribe(e=>{this.showRoom=e})}ngOnDestroy(){this.hungerManagerService.stopHungerSystem(),this.unifiedStatsCheckerService.stopUnifiedCheck(),this.realTimeStateMonitorService.stopMonitoring()}prepareScene(){this.appStateService.showRoomPage(),setTimeout(()=>{this.roomComponent&&(this.roomComponent.resetToCenter(),D.loadPetStats().rare!==null&&this.unifiedStatsCheckerService.executeAllChecks(),setTimeout(()=>{this.whiteTransitionService.onSceneReady()},100))},50)}static \u0275fac=function(t){return new(t||n)(T(rt),T(_t),T(lr),T(vt),T(fr),T(Ja),T(ot))};static \u0275cmp=j({type:n,selectors:[["app-root"]],viewQuery:function(t,i){if(t&1&&ke(EM,5),t&2){let r;Oe(r=Pe())&&(i.roomComponent=r.first)}},standalone:!0,features:[H],decls:4,vars:2,consts:[["roomComponent",""],[1,"app-container"],[4,"ngIf"]],template:function(t,i){t&1&&(u(0,"div",1),N(1,MM,1,0,"app-welcome",2)(2,xM,2,0,"app-room",2),A(3,"app-white-transition"),f()),t&2&&(h(),y("ngIf",i.showWelcome),h(),y("ngIf",i.showRoom))},dependencies:[U,ye,ma,Za,Ka],styles:[".app-container[_ngcontent-%COMP%]{width:100%;height:100vh;overflow:hidden}"]})};cg(Xa,Yg).catch(n=>console.error(n));
